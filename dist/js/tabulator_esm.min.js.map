{"version":3,"file":"tabulator_esm.min.js","sources":["../../src/js/core/CoreFeature.js","../../src/js/core/tools/Helpers.js","../../src/js/core/tools/Popup.js","../../src/js/core/Module.js","../../src/js/modules/Accessor/Accessor.js","../../src/js/modules/Accessor/defaults/accessors.js","../../src/js/modules/Ajax/defaults/urlGenerator.js","../../src/js/modules/Ajax/defaults/contentTypeFormatters.js","../../src/js/modules/Ajax/Ajax.js","../../src/js/modules/Ajax/defaults/config.js","../../src/js/modules/Ajax/defaults/loaderPromise.js","../../src/js/modules/Clipboard/Clipboard.js","../../src/js/modules/Clipboard/defaults/pasteActions.js","../../src/js/modules/Clipboard/defaults/pasteParsers.js","../../src/js/modules/ColumnCalcs/CalcComponent.js","../../src/js/core/cell/CellComponent.js","../../src/js/core/cell/Cell.js","../../src/js/core/column/ColumnComponent.js","../../src/js/core/column/defaults/options.js","../../src/js/core/column/Column.js","../../src/js/core/row/RowComponent.js","../../src/js/core/row/Row.js","../../src/js/modules/ColumnCalcs/defaults/calculations.js","../../src/js/modules/ColumnCalcs/ColumnCalcs.js","../../src/js/modules/DataTree/DataTree.js","../../src/js/modules/Download/defaults/downloaders.js","../../src/js/modules/Download/defaults/downloaders/csv.js","../../src/js/modules/Download/defaults/downloaders/json.js","../../src/js/modules/Download/defaults/downloaders/jsonLines.js","../../src/js/modules/Download/defaults/downloaders/pdf.js","../../src/js/modules/Download/defaults/downloaders/xlsx.js","../../src/js/modules/Download/defaults/downloaders/html.js","../../src/js/modules/Download/Download.js","../../src/js/modules/Edit/inputMask.js","../../src/js/modules/Edit/List.js","../../src/js/modules/Edit/defaults/editors.js","../../src/js/modules/Edit/defaults/editors/input.js","../../src/js/modules/Edit/defaults/editors/textarea.js","../../src/js/modules/Edit/defaults/editors/number.js","../../src/js/modules/Edit/defaults/editors/range.js","../../src/js/modules/Edit/defaults/editors/date.js","../../src/js/modules/Edit/defaults/editors/time.js","../../src/js/modules/Edit/defaults/editors/datetime.js","../../src/js/modules/Edit/defaults/editors/select.js","../../src/js/modules/Edit/defaults/editors/list.js","../../src/js/modules/Edit/defaults/editors/autocomplete.js","../../src/js/modules/Edit/defaults/editors/star.js","../../src/js/modules/Edit/defaults/editors/progress.js","../../src/js/modules/Edit/defaults/editors/tickCross.js","../../src/js/modules/Edit/Edit.js","../../src/js/modules/Export/ExportRow.js","../../src/js/modules/Export/ExportColumn.js","../../src/js/modules/Export/Export.js","../../src/js/modules/Filter/defaults/filters.js","../../src/js/modules/Filter/Filter.js","../../src/js/modules/Format/defaults/formatters.js","../../src/js/modules/Format/defaults/formatters/plaintext.js","../../src/js/modules/Format/defaults/formatters/html.js","../../src/js/modules/Format/defaults/formatters/textarea.js","../../src/js/modules/Format/defaults/formatters/money.js","../../src/js/modules/Format/defaults/formatters/link.js","../../src/js/modules/Format/defaults/formatters/image.js","../../src/js/modules/Format/defaults/formatters/tickCross.js","../../src/js/modules/Format/defaults/formatters/datetime.js","../../src/js/modules/Format/defaults/formatters/datetimediff.js","../../src/js/modules/Format/defaults/formatters/lookup.js","../../src/js/modules/Format/defaults/formatters/star.js","../../src/js/modules/Format/defaults/formatters/traffic.js","../../src/js/modules/Format/defaults/formatters/progress.js","../../src/js/modules/Format/defaults/formatters/color.js","../../src/js/modules/Format/defaults/formatters/buttonTick.js","../../src/js/modules/Format/defaults/formatters/buttonCross.js","../../src/js/modules/Format/defaults/formatters/rownum.js","../../src/js/modules/Format/defaults/formatters/handle.js","../../src/js/modules/Format/defaults/formatters/responsiveCollapse.js","../../src/js/modules/Format/defaults/formatters/rowSelection.js","../../src/js/modules/Format/Format.js","../../src/js/modules/FrozenColumns/FrozenColumns.js","../../src/js/modules/FrozenRows/FrozenRows.js","../../src/js/modules/GroupRows/GroupComponent.js","../../src/js/modules/GroupRows/Group.js","../../src/js/modules/GroupRows/GroupRows.js","../../src/js/modules/History/History.js","../../src/js/modules/History/defaults/undoers.js","../../src/js/modules/History/defaults/redoers.js","../../src/js/modules/HtmlTableImport/HtmlTableImport.js","../../src/js/modules/Import/defaults/importers.js","../../src/js/modules/Import/defaults/importers/csv.js","../../src/js/modules/Import/defaults/importers/json.js","../../src/js/modules/Import/defaults/importers/array.js","../../src/js/modules/Import/Import.js","../../src/js/modules/Interaction/Interaction.js","../../src/js/modules/Keybindings/Keybindings.js","../../src/js/modules/Keybindings/defaults/bindings.js","../../src/js/modules/Keybindings/defaults/actions.js","../../src/js/modules/Menu/Menu.js","../../src/js/modules/MoveColumns/MoveColumns.js","../../src/js/modules/MoveRows/MoveRows.js","../../src/js/modules/Mutator/Mutator.js","../../src/js/modules/Mutator/defaults/mutators.js","../../src/js/modules/Page/defaults/pageCounters.js","../../src/js/modules/Page/defaults/pageCounters/rows.js","../../src/js/modules/Page/defaults/pageCounters/pages.js","../../src/js/modules/Page/Page.js","../../src/js/modules/Persistence/defaults/readers.js","../../src/js/modules/Persistence/defaults/writers.js","../../src/js/modules/Persistence/Persistence.js","../../src/js/modules/Popup/Popup.js","../../src/js/modules/Print/Print.js","../../src/js/modules/ReactiveData/ReactiveData.js","../../src/js/modules/ResizeColumns/ResizeColumns.js","../../src/js/modules/ResizeRows/ResizeRows.js","../../src/js/modules/ResizeTable/ResizeTable.js","../../src/js/modules/ResponsiveLayout/ResponsiveLayout.js","../../src/js/modules/SelectRow/SelectRow.js","../../src/js/modules/Sort/defaults/sorters/datetime.js","../../src/js/modules/Sort/defaults/sorters.js","../../src/js/modules/Sort/defaults/sorters/number.js","../../src/js/modules/Sort/defaults/sorters/string.js","../../src/js/modules/Sort/defaults/sorters/date.js","../../src/js/modules/Sort/defaults/sorters/time.js","../../src/js/modules/Sort/defaults/sorters/boolean.js","../../src/js/modules/Sort/defaults/sorters/array.js","../../src/js/modules/Sort/defaults/sorters/exists.js","../../src/js/modules/Sort/defaults/sorters/alphanum.js","../../src/js/modules/Sort/Sort.js","../../src/js/modules/Tooltip/Tooltip.js","../../src/js/modules/Validate/defaults/validators.js","../../src/js/modules/Validate/Validate.js","../../src/js/core/tools/OptionsList.js","../../src/js/core/rendering/Renderer.js","../../src/js/core/rendering/renderers/BasicHorizontal.js","../../src/js/core/rendering/renderers/VirtualDomHorizontal.js","../../src/js/core/ColumnManager.js","../../src/js/core/rendering/renderers/BasicVertical.js","../../src/js/core/rendering/renderers/VirtualDomVertical.js","../../src/js/core/RowManager.js","../../src/js/core/FooterManager.js","../../src/js/core/tools/InteractionMonitor.js","../../src/js/core/tools/ComponentFunctionBinder.js","../../src/js/core/tools/DataLoader.js","../../src/js/core/tools/ExternalEventBus.js","../../src/js/core/tools/InternalEventBus.js","../../src/js/core/tools/DeprecationAdvisor.js","../../src/js/core/tools/TableRegistry.js","../../src/js/modules/Layout/defaults/modes/fitDataGeneral.js","../../src/js/modules/Layout/defaults/modes.js","../../src/js/modules/Layout/defaults/modes/fitData.js","../../src/js/modules/Layout/defaults/modes/fitDataStretch.js","../../src/js/modules/Layout/defaults/modes/fitColumns.js","../../src/js/modules/Layout/Layout.js","../../src/js/modules/Localize/Localize.js","../../src/js/modules/Localize/defaults/langs.js","../../src/js/modules/Comms/Comms.js","../../src/js/core/tools/ModuleBinder.js","../../src/js/core/tools/Alert.js","../../src/js/core/Tabulator.js","../../src/js/core/defaults/options.js","../../src/js/core/TabulatorFull.js","../../src/js/core/row/PseudoRow.js"],"sourcesContent":["export default class CoreFeature{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\t}\n\n\t//////////////////////////////////////////\n\t/////////////// DataLoad /////////////////\n\t//////////////////////////////////////////\n\n\treloadData(data, silent, columnsChanged){\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\n\t}\n\n\t//////////////////////////////////////////\n\t///////////// Localization ///////////////\n\t//////////////////////////////////////////\n\n\tlangText(){\n\t\treturn this.table.modules.localize.getText(...arguments);\n\t}\n\n\tlangBind(){\n\t\treturn this.table.modules.localize.bind(...arguments);\n\t}\n\n\tlangLocale(){\n\t\treturn this.table.modules.localize.getLocale(...arguments);\n\t}\n\n\n\t//////////////////////////////////////////\n\t////////// Inter Table Comms /////////////\n\t//////////////////////////////////////////\n\n\tcommsConnections(){\n\t\treturn this.table.modules.comms.getConnections(...arguments);\n\t}\n\n\tcommsSend(){\n\t\treturn this.table.modules.comms.send(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Layout  /////////////////\n\t//////////////////////////////////////////\n\n\tlayoutMode(){\n\t\treturn this.table.modules.layout.getMode();\n\t}\n\n\tlayoutRefresh(force){\n\t\treturn this.table.modules.layout.layout(force);\n\t}\n\n\n\t//////////////////////////////////////////\n\t/////////////// Event Bus ////////////////\n\t//////////////////////////////////////////\n\n\tsubscribe(){\n\t\treturn this.table.eventBus.subscribe(...arguments);\n\t}\n\n\tunsubscribe(){\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.table.eventBus.subscribed(key);\n\t}\n\n\tsubscriptionChange(){\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\n\t}\n\n\tdispatch(){\n\t\treturn this.table.eventBus.dispatch(...arguments);\n\t}\n\n\tchain(){\n\t\treturn this.table.eventBus.chain(...arguments);\n\t}\n\n\tconfirm(){\n\t\treturn this.table.eventBus.confirm(...arguments);\n\t}\n\n\tdispatchExternal(){\n\t\treturn this.table.externalEvents.dispatch(...arguments);\n\t}\n\n\tsubscribedExternal(key){\n\t\treturn this.table.externalEvents.subscribed(key);\n\t}\n\n\tsubscriptionChangeExternal(){\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Options /////////////////\n\t//////////////////////////////////////////\n\n\toptions(key){\n\t\treturn this.table.options[key];\n\t}\n\n\tsetOption(key, value){\n\t\tif(typeof value !== \"undefined\"){\n\t\t\tthis.table.options[key] = value;\n\t\t}\n\n\t\treturn this.table.options[key];\n\t}\n\n\t//////////////////////////////////////////\n\t/////////// Deprecation Checks ///////////\n\t//////////////////////////////////////////\n\n\tdeprecationCheck(oldOption, newOption){\n\t\treturn this.table.deprecationAdvisor.check(oldOption, newOption);\n\t}\n\n\tdeprecationCheckMsg(oldOption, msg){\n\t\treturn this.table.deprecationAdvisor.checkMsg(oldOption, msg);\n\t}\n\n\tdeprecationMsg(msg){\n\t\treturn this.table.deprecationAdvisor.msg(msg);\n\t}\n\t//////////////////////////////////////////\n\t//////////////// Modules /////////////////\n\t//////////////////////////////////////////\n\n\tmodule(key){\n\t\treturn this.table.module(key);\n\t}\n}","export default class Helpers{\n\n\tstatic elVisible(el){\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t}\n\n\tstatic elOffset(el){\n\t\tvar box = el.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\t\t};\n\t}\n\n\tstatic deepClone(obj, clone, list = []){\n\t\tvar objectProto = {}.__proto__,\n\t\tarrayProto = [].__proto__;\n\n\t\tif (!clone){\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\t\t}\n\n\t\tfor(var i in obj) {\n\t\t\tlet subject = obj[i],\n\t\t\tmatch, copy;\n\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\n\t\t\t\tmatch = list.findIndex((item) => {\n\t\t\t\t\treturn item.subject === subject;\n\t\t\t\t});\n\n\t\t\t\tif(match > -1){\n\t\t\t\t\tclone[i] = list[match].copy;\n\t\t\t\t}else{\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n\n\t\t\t\t\tlist.unshift({subject, copy});\n\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n\n\tstatic elOuterHeight(el){\n\t\tconst computedStyle = getComputedStyle(el);\n\t\tconst padding =\n\t\t\tparseFloat(computedStyle.getPropertyValue(\"padding-top\")) +\n\t\t\tparseFloat(computedStyle.getPropertyValue(\"padding-bottom\"));\n\t\tconst margin =\n\t\t\tparseFloat(computedStyle.getPropertyValue(\"margin-top\")) +\n\t\t\tparseFloat(computedStyle.getPropertyValue(\"margin-bottom\"));\n\t\tconst border =\n\t\t\tparseFloat(computedStyle.getPropertyValue(\"border-top\")) +\n\t\t\tparseFloat(computedStyle.getPropertyValue(\"border-bottom\"));\n\n\t\treturn el.getBoundingClientRect().height + padding + margin + border;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from './Helpers.js';\n\nexport default class Popup extends CoreFeature{\n\tconstructor(table, element, parent){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = element;\n\t\tthis.container = this._lookupContainer();\n\t\t\n\t\tthis.parent = parent;\n\t\t\n\t\tthis.reversedX = false;\n\t\tthis.childPopup = null;\n\t\tthis.blurable = false;\n\t\tthis.blurCallback = null;\n\t\tthis.blurEventsBound = false;\n\t\tthis.renderedCallback = null;\n\t\t\n\t\tthis.visible = false;\n\t\tthis.hideable = true;\n\t\t\n\t\tthis.element.classList.add(\"tabulator-popup-container\");\n\t\t\n\t\tthis.blurEvent = this.hide.bind(this, false);\n\t\tthis.escEvent = this._escapeCheck.bind(this);\n\t\t\n\t\tthis.destroyBinding = this.tableDestroyed.bind(this);\n\t\tthis.destroyed = false;\n\t}\n\t\n\ttableDestroyed(){\n\t\tthis.destroyed = true;\n\t\tthis.hide(true);\n\t}\n\t\n\t_lookupContainer(){\n\t\tvar container = this.table.options.popupContainer;\n\t\t\n\t\tif(typeof container === \"string\"){\n\t\t\tcontainer = document.querySelector(container);\n\t\t\t\n\t\t\tif(!container){\n\t\t\t\tconsole.warn(\"Menu Error - no container element found matching selector:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t\t}\n\t\t}else if (container === true){\n\t\t\tcontainer = this.table.element;\n\t\t}\n\t\t\n\t\tif(container && !this._checkContainerIsParent(container)){\n\t\t\tcontainer = false;\n\t\t\tconsole.warn(\"Menu Error - container element does not contain this table:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t}\n\t\t\n\t\tif(!container){\n\t\t\tcontainer = document.body;\n\t\t}\n\t\t\n\t\treturn container;\n\t}\n\t\n\t_checkContainerIsParent(container, element = this.table.element){\n\t\tif(container === element){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n\t\t}\n\t}\n\t\n\trenderCallback(callback){\n\t\tthis.renderedCallback = callback;\n\t}\n\t\n\tcontainerEventCoords(e){\n\t\tvar touch = !(e instanceof MouseEvent);\n\t\t\n\t\tvar x = touch ? e.touches[0].pageX : e.pageX;\n\t\tvar y = touch ? e.touches[0].pageY : e.pageY;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tlet parentOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\tx -= parentOffset.left;\n\t\t\ty -= parentOffset.top;\n\t\t}\n\t\t\n\t\treturn {x, y};\n\t}\n\t\n\telementPositionCoords(element, position = \"right\"){\n\t\tvar offset = Helpers.elOffset(element),\n\t\tcontainerOffset, x, y;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tcontainerOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\toffset.left -= containerOffset.left;\n\t\t\toffset.top -= containerOffset.top;\n\t\t}\n\t\t\n\t\tswitch(position){\n\t\t\tcase \"right\":\n\t\t\t\tx = offset.left + element.offsetWidth;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"bottom\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top + element.offsetHeight;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"left\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"top\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"center\":\n\t\t\t\tx = offset.left + (element.offsetWidth / 2);\n\t\t\t\ty = offset.top + (element.offsetHeight / 2);\n\t\t\t\tbreak;\n\t\t\t\n\t\t}\n\t\t\n\t\treturn {x, y, offset};\n\t}\n\t\n\tshow(origin, position){\n\t\tvar x, y, parentEl, parentOffset, coords;\n\t\t\n\t\tif(this.destroyed || this.table.destroyed){\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tif(origin instanceof HTMLElement){\n\t\t\tparentEl = origin;\n\t\t\tcoords = this.elementPositionCoords(origin, position);\n\t\t\t\n\t\t\tparentOffset = coords.offset;\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t}else if(typeof origin === \"number\"){\n\t\t\tparentOffset = {top:0, left:0};\n\t\t\tx = origin;\n\t\t\ty = position;\n\t\t}else{\n\t\t\tcoords = this.containerEventCoords(origin);\n\t\t\t\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t\tthis.reversedX = false;\n\t\t}\n\t\t\n\t\tthis.element.style.top = y + \"px\";\n\t\tthis.element.style.left = x + \"px\";\n\t\t\n\t\tthis.container.appendChild(this.element);\n\t\t\n\t\tif(typeof this.renderedCallback === \"function\"){\n\t\t\tthis.renderedCallback();\n\t\t}\n\t\t\n\t\tthis._fitToScreen(x, y, parentEl, parentOffset, position);\n\t\t\n\t\tthis.visible = true;\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.destroyBinding);\n\t\t\n\t\tthis.element.addEventListener(\"mousedown\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_fitToScreen(x, y, parentEl, parentOffset, position){\n\t\tvar scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\t\t\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\n\t\tif((x + this.element.offsetWidth) >= this.container.offsetWidth || this.reversedX){\n\t\t\tthis.element.style.left = \"\";\n\t\t\t\n\t\t\tif(parentEl){\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - parentOffset.left) + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - x) + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.reversedX = true;\n\t\t}\n\t\t\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\t\tif((y + this.element.offsetHeight) > Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)) {\n\t\t\tif(parentEl){\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"bottom\":\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1) + \"px\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1) + \"px\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight) + \"px\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisVisible(){\n\t\treturn this.visible;\n\t}\n\t\n\thideOnBlur(callback){\n\t\tthis.blurable = true;\n\t\t\n\t\tif(this.visible){\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n\t\t\t\t\tthis.subscribe(\"cell-editing\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\n\n\t\t\t\t\tthis.blurEventsBound = true;\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t\t\n\t\t\tthis.blurCallback = callback;\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_escapeCheck(e){\n\t\tif(e.keyCode == 27){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\tblockHide(){\n\t\tthis.hideable = false;\n\t}\n\t\n\trestoreHide(){\n\t\tthis.hideable = true;\n\t}\n\t\n\thide(silent = false){\n\t\tif(this.visible && this.hideable){\n\t\t\tif(this.blurable && this.blurEventsBound){\n\t\t\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\n\t\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\twindow.removeEventListener(\"resize\", this.blurEvent);\n\t\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t\t\t\tthis.unsubscribe(\"cell-editing\", this.blurEvent);\n\n\t\t\t\tthis.blurEventsBound = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.childPopup){\n\t\t\t\tthis.childPopup.hide();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.childPopup = null;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tif(this.blurCallback && !silent){\n\t\t\t\tthis.blurCallback();\n\t\t\t}\n\t\t\t\n\t\t\tthis.unsubscribe(\"table-destroy\", this.destroyBinding);\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\tchild(element){\n\t\tif(this.childPopup){\n\t\t\tthis.childPopup.hide();\n\t\t}\n\t\t\n\t\tthis.childPopup = new Popup(this.table, element, this);\n\t\t\n\t\treturn this.childPopup;\n\t}\n}","import CoreFeature from './CoreFeature.js';\nimport Popup from './tools/Popup.js';\n\nclass Module extends CoreFeature{\n\t\n\tconstructor(table, name){\n\t\tsuper(table);\n\t\t\n\t\tthis._handler = null;\n\t}\n\t\n\tinitialize(){\n\t\t// setup module when table is initialized, to be overridden in module\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Options Registration ///////\n\t///////////////////////////////////\n\t\n\tregisterTableOption(key, value){\n\t\tthis.table.optionsList.register(key, value);\n\t}\n\t\n\tregisterColumnOption(key, value){\n\t\tthis.table.columnManager.optionsList.register(key, value);\n\t}\n\t\n\t///////////////////////////////////\n\t/// Public Function Registration ///\n\t///////////////////////////////////\n\t\n\tregisterTableFunction(name, func){\n\t\tif(typeof this.table[name] === \"undefined\"){\n\t\t\tthis.table[name] = (...args) => {\n\t\t\t\tthis.table.initGuard(name);\n\t\t\t\t\n\t\t\t\treturn func(...args);\n\t\t\t};\n\t\t}else{\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name);\n\t\t}\n\t}\n\t\n\tregisterComponentFunction(component, func, handler){\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Data Pipeline //////////\n\t///////////////////////////////////\n\t\n\tregisterDataHandler(handler, priority){\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tregisterDisplayHandler(handler, priority){\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tdisplayRows(adjust){\n\t\tvar index = this.table.rowManager.displayRows.length - 1, \n\t\tlookupIndex;\n\t\t\n\t\tif(this._handler){\n\t\t\tlookupIndex = this.table.rowManager.displayPipeline.findIndex((item) => {\n\t\t\t\treturn item.handler === this._handler;\n\t\t\t});\n\n\t\t\tif(lookupIndex > -1){\n\t\t\t\tindex = lookupIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(adjust){\n\t\t\tindex = index + adjust;\n\t\t}\n\n\t\tif(this._handler){\n\t\t\tif(index > -1){\n\t\t\t\treturn this.table.rowManager.getDisplayRows(index);\n\t\t\t}else{\n\t\t\t\treturn this.activeRows();\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tactiveRows(){\n\t\treturn this.table.rowManager.activeRows;\n\t}\n\t\n\trefreshData(renderInPosition, handler){\n\t\tif(!handler){\n\t\t\thandler = this._handler;\n\t\t}\n\t\t\n\t\tif(handler){\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Footer Management ////////\n\t///////////////////////////////////\n\t\n\tfooterAppend(element){\n\t\treturn this.table.footerManager.append(element);\n\t}\n\t\n\tfooterPrepend(element){\n\t\treturn this.table.footerManager.prepend(element);\n\t}\n\t\n\tfooterRemove(element){\n\t\treturn this.table.footerManager.remove(element);\n\t} \n\t\n\t///////////////////////////////////\n\t//////// Popups Management ////////\n\t///////////////////////////////////\n\t\n\tpopup(menuEl, menuContainer){\n\t\treturn new Popup(this.table, menuEl, menuContainer);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Alert Management ////////\n\t///////////////////////////////////\n\t\n\talert(content, type){\n\t\treturn this.table.alertManager.alert(content, type);\n\t}\n\t\n\tclearAlert(){\n\t\treturn this.table.alertManager.clear();\n\t}\n\t\n}\n\nexport default Module;","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultAccessors from './defaults/accessors.js';\n\nclass Accessor extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\n\t\tthis.registerColumnOption(\"accessor\");\n\t\tthis.registerColumnOption(\"accessorParams\");\n\t\tthis.registerColumnOption(\"accessorData\");\n\t\tthis.registerColumnOption(\"accessorDataParams\");\n\t\tthis.registerColumnOption(\"accessorDownload\");\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\n\t\tthis.registerColumnOption(\"accessorClipboard\");\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\n\t\tthis.registerColumnOption(\"accessorPrint\");\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n\t}\n\n\t//initialize column accessor\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\taccessor;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor:accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t}\n\n\tlookupAccessor(value){\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Accessor.accessors[value]){\n\t\t\t\t\taccessor = Accessor.accessors[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\taccessor = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t}\n\n\t//apply accessor to row\n\ttransformRow(row, type){\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\trowComponent = row.getComponent();\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Helpers.deepClone(row.data || {});\n\n\t\tthis.table.columnManager.traverse(function(column){\n\t\t\tvar value, accessor, params, colComponent;\n\n\t\t\tif(column.modules.accessor){\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif(value != \"undefined\"){\n\t\t\t\t\t\tcolComponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}\n\n//load defaults\nAccessor.moduleName = \"accessor\";\nAccessor.accessors = defaultAccessors;\n\nexport default Accessor;","export default {};","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nfunction serializeParams(params){\n\tvar output = generateParamsList(params),\n\tencoded = [];\n\n\toutput.forEach(function(item){\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t});\n\n\treturn encoded.join(\"&\");\n}\n\nexport default function(url, config, params){\n\tif(url){\n\t\tif(params && Object.keys(params).length){\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\n\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn url;\n}","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nexport default {\n\t\"json\":{\n\t\theaders:{\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody:function(url, config, params){\n\t\t\treturn JSON.stringify(params);\n\t\t},\n\t},\n\t\"form\":{\n\t\theaders:{\n\t\t},\n\t\tbody:function(url, config, params){\n\n\t\t\tvar output = generateParamsList(params),\n\t\t\tform = new FormData();\n\n\t\t\toutput.forEach(function(item){\n\t\t\t\tform.append(item.key, item.value);\n\t\t\t});\n\n\t\t\treturn form;\n\t\t},\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultConfig from './defaults/config.js';\nimport defaultURLGenerator from './defaults/urlGenerator.js';\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\n\nclass Ajax extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {}; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\t\t\n\t\tthis.loaderPromise = false;\n\t\t\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\t\t\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\n\t\t\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\n\t}\n\t\n\t//initialize setup options\n\tinitialize(){\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n\t\t\n\t\tif(this.table.options.ajaxURL){\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\n\t\tthis.setDefaultConfig(this.table.options.ajaxConfig);\n\t\t\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n\t\tthis.subscribe(\"data-params\", this.requestParams.bind(this));\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\n\t}\n\t\n\trequestParams(data, config, silent, params){\n\t\tvar ajaxParams = this.table.options.ajaxParams;\n\t\t\n\t\tif(ajaxParams){\n\t\t\tif(typeof ajaxParams === \"function\"){\n\t\t\t\tajaxParams = ajaxParams.call(this.table);\n\t\t\t}\n\t\t\t\n\t\t\tparams = Object.assign(params, ajaxParams);\n\t\t}\t\t\n\t\t\n\t\treturn params;\n\t}\n\t\n\trequestDataCheck(data, params, config, silent){\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\n\t}\n\t\n\trequestData(url, params, config, silent, previousData){\n\t\tvar ajaxConfig;\n\t\t\n\t\tif(!previousData && this.requestDataCheck(url)){\n\t\t\tif(url){\n\t\t\t\tthis.setUrl(url);\n\t\t\t}\n\t\t\t\n\t\t\tajaxConfig = this.generateConfig(config);\n\t\t\t\n\t\t\treturn this.sendRequest(this.url, params, ajaxConfig);\n\t\t}else{\n\t\t\treturn previousData;\n\t\t}\n\t}\n\t\n\tsetDefaultConfig(config = {}){\n\t\tthis.config = Object.assign({}, Ajax.defaultConfig);\n\n\t\tif(typeof config == \"string\"){\n\t\t\tthis.config.method = config;\n\t\t}else{\n\t\t\tObject.assign(this.config, config);\n\t\t}\n\t}\n\t\n\t//load config object\n\tgenerateConfig(config = {}){\n\t\tvar ajaxConfig = Object.assign({}, this.config);\n\t\t\n\t\tif(typeof config == \"string\"){\n\t\t\tajaxConfig.method = config;\n\t\t}else{\n\t\t\tObject.assign(ajaxConfig, config);\n\t\t}\n\t\t\n\t\treturn ajaxConfig;\n\t}\n\t\n\t//set request url\n\tsetUrl(url){\n\t\tthis.url = url;\n\t}\n\t\n\t//get request url\n\tgetUrl(){\n\t\treturn this.url;\n\t}\n\t\n\t//send ajax request\n\tsendRequest(url, params, config){\n\t\tif(this.table.options.ajaxRequesting.call(this.table, url, params) !== false){\n\t\t\treturn this.loaderPromise(url, config, params)\n\t\t\t\t.then((data)=>{\n\t\t\t\t\tif(this.table.options.ajaxResponse){\n\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, url, params, data);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\treturn data;\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n}\n\nAjax.moduleName = \"ajax\";\n\n//load defaults\nAjax.defaultConfig = defaultConfig;\nAjax.defaultURLGenerator = defaultURLGenerator;\nAjax.defaultLoaderPromise = defaultLoaderPromise;\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\n\nexport default Ajax;","export default {\n\tmethod: \"GET\",\n};","export default function(url, config, params){\n\tvar contentType;\n\n\treturn new Promise((resolve, reject) => {\n\t\t//set url\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\n\n\t\t//set body content if not GET request\n\t\tif(config.method.toUpperCase() != \"GET\"){\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n\t\t\tif(contentType){\n\n\t\t\t\tfor(var key in contentType.headers){\n\t\t\t\t\tif(!config.headers){\n\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n\t\t\t}\n\t\t}\n\n\t\tif(url){\n\t\t\t//configure headers\n\t\t\tif(typeof config.headers === \"undefined\"){\n\t\t\t\tconfig.headers = {};\n\t\t\t}\n\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\n\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t}\n\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif(typeof config.mode === \"undefined\"){\n\t\t\t\tconfig.mode = \"cors\";\n\t\t\t}\n\n\t\t\tif(config.mode == \"cors\"){\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\n\t\t\t\t}\n        \n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//send request\n\t\t\tfetch(url, config)\n\t\t\t\t.then((response)=>{\n\t\t\t\t\tif(response.ok) {\n\t\t\t\t\t\tresponse.json()\n\t\t\t\t\t\t\t.then((data)=>{\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error)=>{\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\tresolve([]);\n\t\t}\n\t});\n}","import Module from '../../core/Module.js';\n\nimport defaultPasteActions from './defaults/pasteActions.js';\nimport defaultPasteParsers from './defaults/pasteParsers.js';\n\nclass Clipboard extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = true;\n\t\tthis.pasteParser = function(){};\n\t\tthis.pasteAction = function(){};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n\t\tthis.registerColumnOption(\"clipboard\");\n\t\tthis.registerColumnOption(\"titleClipboard\");\n\t}\n\n\tinitialize(){\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif(this.mode === true || this.mode === \"copy\"){\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\n\t\t\t\tvar plain, html, list;\n\n\t\t\t\tif(!this.blocked){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif(this.customSelection){\n\t\t\t\t\t\tplain = this.customSelection;\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\n\t\t\t\t\t\tlist = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n\n\t\t\t\t\t\thtml = this.table.modules.export.generateHTMLTable(list);\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\n\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif(this.mode === true || this.mode === \"paste\"){\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\n\t\t\t\tthis.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n\t}\n\n\treset(){\n\t\tthis.blocked = true;\n\t\tthis.customSelection = false;\n\t}\n\n\tgeneratePlainContent (list) {\n\t\tvar output = [];\n\n\t\tlist.forEach((row) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach((col) => {\n\t\t\t\tvar value = \"\";\n\n\t\t\t\tif(col){\n\n\t\t\t\t\tif(row.type === \"group\"){\n\t\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t\t}\n\n\t\t\t\t\tif(col.value === null){\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowData.push(value);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t}\n\n\tcopy (range, internal) {\n\t\tvar sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t}\n\n\t//PASTE EVENT HANDLING\n\tsetPasteAction(action){\n\n\t\tswitch(typeof action){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\n\n\t\t\t\tif(!this.pasteAction){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteAction = action;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetPasteParser(parser){\n\t\tswitch(typeof parser){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\n\n\t\t\t\tif(!this.pasteParser){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteParser = parser;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaste(e){\n\t\tvar data, rowData, rows;\n\n\t\tif(this.checkPaseOrigin(e)){\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif(rowData){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif(this.table.modExists(\"mutator\")){\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\n\t\t\t}\n\t\t}\n\t}\n\n\tmutateData(data){\n\t\tvar output = [];\n\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t}else{\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\n\tcheckPaseOrigin(e){\n\t\tvar valid = true;\n\n\t\tif(e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell){\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t}\n\n\tgetPasteData(e){\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t}\n}\n\nClipboard.moduleName = \"clipboard\";\n\n//load defaults\nClipboard.pasteActions = defaultPasteActions;\nClipboard.pasteParsers = defaultPasteParsers;\n\nexport default Clipboard;","export default {\n\treplace:function(rows){\n\t\treturn this.table.setData(rows);\n\t},\n\tupdate:function(rows){\n\t\treturn this.table.updateOrAddData(rows);\n\t},\n\tinsert:function(rows){\n\t\treturn this.table.addData(rows);\n\t},\n};","export default {\n\ttable:function(clipboard){\n\t\tvar data = [],\n\t\theaderFindSuccess = true,\n\t\tcolumns = this.table.columnManager.columns,\n\t\tcolumnMap = [],\n\t\trows = [];\n\n\t\t//get data from clipboard into array of columns and rows.\n\t\tclipboard = clipboard.split(\"\\n\");\n\n\t\tclipboard.forEach(function(row){\n\t\t\tdata.push(row.split(\"\\t\"));\n\t\t});\n\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\n\n\t\t\t//check if headers are present by title\n\t\t\tdata[0].forEach(function(value){\n\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t});\n\n\t\t\t\tif(column){\n\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t}else{\n\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//check if column headers are present by field\n\t\t\tif(!headerFindSuccess){\n\t\t\t\theaderFindSuccess = true;\n\t\t\t\tcolumnMap = [];\n\n\t\t\t\tdata[0].forEach(function(value){\n\t\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t});\n\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t}else{\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(!headerFindSuccess){\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//remove header row if found\n\t\t\tif(headerFindSuccess){\n\t\t\t\tdata.shift();\n\t\t\t}\n\n\t\t\tdata.forEach(function(item){\n\t\t\t\tvar row = {};\n\n\t\t\t\titem.forEach(function(value, i){\n\t\t\t\t\tif(columnMap[i]){\n\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trows.push(row);\n\t\t\t});\n\n\t\t\treturn rows;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n};","class CalcComponent{\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n}\n\nexport default CalcComponent;","//public cell object\nexport default class CellComponent {\n\n\tconstructor (cell){\n\t\tthis._cell = cell;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetValue(){\n\t\treturn this._cell.getValue();\n\t}\n\n\tgetOldValue(){\n\t\treturn this._cell.getOldValue();\n\t}\n\n\tgetInitialValue(){\n\t\treturn this._cell.initialValue;\n\t}\n\n\tgetElement(){\n\t\treturn this._cell.getElement();\n\t}\n\n\tgetRow(){\n\t\treturn this._cell.row.getComponent();\n\t}\n\n\tgetData(transform){\n\t\treturn this._cell.row.getData(transform);\n\t}\n\tgetType(){\n\t\treturn \"cell\";\n\t}\n\tgetField(){\n\t\treturn this._cell.column.getField();\n\t}\n\n\tgetColumn(){\n\t\treturn this._cell.column.getComponent();\n\t}\n\n\tsetValue(value, mutate){\n\t\tif(typeof mutate == \"undefined\"){\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t}\n\n\trestoreOldValue(){\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t}\n\n\trestoreInitialValue(){\n\t\tthis._cell.setValueActual(this._cell.initialValue);\n\t}\n\n\tcheckHeight(){\n\t\tthis._cell.checkHeight();\n\t}\n\n\tgetTable(){\n\t\treturn this._cell.table;\n\t}\n\n\t_getSelf(){\n\t\treturn this._cell;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from '../tools/Helpers.js';\nimport CellComponent from './CellComponent.js';\n\nexport default class Cell extends CoreFeature{\n\tconstructor(column, row){\n\t\tsuper(column.table);\n\n\t\tthis.table = column.table;\n\t\tthis.column = column;\n\t\tthis.row = row;\n\t\tthis.element = null;\n\t\tthis.value = null;\n\t\tthis.initialValue;\n\t\tthis.oldValue = null;\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\n\t\tthis.component = null;\n\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\n\n\t\tthis.build();\n\t}\n\n\t//////////////// Setup Functions /////////////////\n\t//generate element\n\tbuild(){\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\n\t\tthis.initialValue = this.value;\n\t}\n\n\tgenerateElement(){\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = \"tabulator-cell\";\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\t}\n\n\t_configureCell(){\n\t\tvar element = this.element,\n\t\tfield = this.column.getField(),\n\t\tvertAligns = {\n\t\t\ttop:\"flex-start\",\n\t\t\tbottom:\"flex-end\",\n\t\t\tmiddle:\"center\",\n\t\t},\n\t\thozAligns = {\n\t\t\tleft:\"flex-start\",\n\t\t\tright:\"flex-end\",\n\t\t\tcenter:\"center\",\n\t\t};\n\n\t\t//set text alignment\n\t\telement.style.textAlign = this.column.hozAlign;\n\n\t\tif(this.column.vertAlign){\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n\n\t\t\tif(this.column.hozAlign){\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif(field){\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\t\tif(this.column.definition.cssClass){\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\telement.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.dispatch(\"cell-init\", this);\n\n\t\t//hide cell if not visible\n\t\tif(!this.column.visible){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//generate cell contents\n\t_generateContents(){\n\t\tvar val;\n\n\t\tval = this.chain(\"cell-format\", this, null, () => {\n\t\t\treturn this.element.innerHTML = this.value;\n\t\t});\n\n\t\tswitch(typeof val){\n\t\t\tcase \"object\":\n\t\t\t\tif(val instanceof Node){\n\n\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\t\t\t\tthis.element.appendChild(val);\n\t\t\t\t}else{\n\t\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\t\tif(val != null){\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.element.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.element.innerHTML = val;\n\t\t}\n\t}\n\n\tcellRendered(){\n\t\tthis.dispatch(\"cell-rendered\", this);\n\t}\n\n\t//////////////////// Getters ////////////////////\n\tgetElement(containerOnly){\n\t\tif(!this.loaded){\n\t\t\tthis.loaded = true;\n\t\t\tif(!containerOnly){\n\t\t\t\tthis.layoutElement();\n\t\t\t}\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tgetValue(){\n\t\treturn this.value;\n\t}\n\n\tgetOldValue(){\n\t\treturn this.oldValue;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tsetValue(value, mutate, force){\n\t\tvar changed = this.setValueProcessData(value, mutate, force);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\n\n\t\t\tthis.cellRendered();\n\n\t\t\tif(this.column.definition.cellEdited){\n\t\t\t\tthis.column.definition.cellEdited.call(this.table, this.getComponent());\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\n\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValueProcessData(value, mutate, force){\n\t\tvar changed = false;\n\n\t\tif(this.value !== value || force){\n\n\t\t\tchanged = true;\n\n\t\t\tif(mutate){\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tsetValueActual(value){\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tthis.dispatch(\"cell-value-save-before\", this);\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tthis.dispatch(\"cell-value-save-after\", this);\n\n\t\tif(this.loaded){\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\n\tlayoutElement(){\n\t\tthis._generateContents();\n\n\t\tthis.dispatch(\"cell-layout\", this);\n\t}\n\n\tsetWidth(){\n\t\tthis.width = this.column.width;\n\t\tthis.element.style.width = this.column.widthStyled;\n\t}\n\n\tclearWidth(){\n\t\tthis.width = \"\";\n\t\tthis.element.style.width = \"\";\n\t}\n\n\tgetWidth(){\n\t\treturn this.width || this.element.offsetWidth;\n\t}\n\n\tsetMinWidth(){\n\t\tthis.minWidth = this.column.minWidth;\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t}\n\n\tsetMaxWidth(){\n\t\tthis.maxWidth = this.column.maxWidth;\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\n\t}\n\n\tcheckHeight(){\n\t\t// var height = this.element.css(\"height\");\n\t\tthis.row.reinitializeHeight();\n\t}\n\n\tclearHeight(){\n\t\tthis.element.style.height = \"\";\n\t\tthis.height = null;\n\n\t\tthis.dispatch(\"cell-height\", this, \"\");\n\t}\n\n\tsetHeight(){\n\t\tthis.height = this.row.height;\n\t\tthis.element.style.height = this.row.heightStyled;\n\n\t\tthis.dispatch(\"cell-height\", this, this.row.heightStyled);\n\t}\n\n\tgetHeight(){\n\t\treturn this.height ||\n\t\t\t(this.table.options.outerRowHeight\n\t\t\t\t? Helpers.elOuterHeight(this.element)\n\t\t\t\t:\tthis.element.offsetHeight);\n\t}\n\n\tshow(){\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n\t}\n\n\thide(){\n\t\tthis.element.style.display = \"none\";\n\t}\n\n\tdelete(){\n\t\tthis.dispatch(\"cell-delete\", this);\n\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tthis.element = false;\n\t\tthis.column.deleteCell(this);\n\t\tthis.row.deleteCell(this);\n\t\tthis.calcs = {};\n\t}\n\n\tgetIndex(){\n\t\treturn this.row.getCellIndex(this);\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new CellComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n","import Column from './Column.js';\n\n//public column object\nexport default class ColumnComponent {\n\tconstructor (column){\n\t\tthis._column = column;\n\t\tthis.type = \"ColumnComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetElement(){\n\t\treturn this._column.getElement();\n\t}\n\n\tgetDefinition(){\n\t\treturn this._column.getDefinition();\n\t}\n\n\tgetField(){\n\t\treturn this._column.getField();\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this._column.getTitleDownload();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tisVisible(){\n\t\treturn this._column.visible;\n\t}\n\n\tshow(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.show();\n\t\t}\n\t}\n\n\thide(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.hide();\n\t\t}\n\t}\n\n\ttoggle(){\n\t\tif(this._column.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tdelete(){\n\t\treturn this._column.delete();\n\t}\n\n\tgetSubColumns(){\n\t\tvar output = [];\n\n\t\tif(this._column.columns.length){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetParentColumn(){\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._column;\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column, position, ifVisible);\n\t}\n\n\tgetTable(){\n\t\treturn this._column.table;\n\t}\n\n\tmove(to, after){\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif(toColumn){\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t}\n\n\tgetNextColumn(){\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t}\n\n\tgetPrevColumn(){\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t}\n\n\tupdateDefinition(updates){\n\t\treturn this._column.updateDefinition(updates);\n\t}\n\n\tgetWidth(){\n\t\treturn this._column.getWidth();\n\t}\n\n\tsetWidth(width){\n\t\tvar result;\n\n\t\tif(width === true){\n\t\t\tresult =  this._column.reinitializeWidth(true);\n\t\t}else{\n\t\t\tresult =  this._column.setWidth(width);\n\t\t}\n\n\t\tthis._column.table.columnManager.rerenderColumns(true);\n\n\t\treturn result;\n\t}\n}","export default {\n\t\"title\": undefined,\n\t\"field\": undefined,\n\t\"columns\": undefined,\n\t\"visible\": undefined,\n\t\"hozAlign\": undefined,\n\t\"vertAlign\": undefined,\n\t\"width\": undefined,\n\t\"minWidth\": 40,\n\t\"maxWidth\": undefined,\n\t\"maxInitialWidth\": undefined,\n\t\"cssClass\": undefined,\n\t\"variableHeight\": undefined,\n\t\"headerVertical\": undefined,\n\t\"headerHozAlign\": undefined,\n\t\"headerWordWrap\": false,\n\t\"editableTitle\": undefined,\n};","import CoreFeature from '../CoreFeature.js';\nimport ColumnComponent from './ColumnComponent.js';\nimport defaultOptions from './defaults/options.js';\n\nimport Cell from '../cell/Cell.js';\n\nclass Column extends CoreFeature{\n\n\tconstructor(def, parent){\n\t\tsuper(parent.table);\n\n\t\tthis.definition = def; //column definition\n\t\tthis.parent = parent; //hold parent object\n\t\tthis.type = \"column\"; //type of element\n\t\tthis.columns = []; //child columns\n\t\tthis.cells = []; //cells bound to this column\n\t\tthis.element = this.createElement(); //column header element\n\t\tthis.contentElement = false;\n\t\tthis.titleHolderElement = false;\n\t\tthis.titleElement = false;\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\t\tthis.isGroup = false;\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\n\t\t//multi dimensional filed handling\n\t\tthis.field =\"\";\n\t\tthis.fieldStructure = \"\";\n\t\tthis.getFieldValue = \"\";\n\t\tthis.setFieldValue = \"\";\n\n\t\tthis.titleDownload = null;\n\t\tthis.titleFormatterRendered = false;\n\n\t\tthis.mapDefinitions();\n\n\t\tthis.setField(this.definition.field);\n\n\t\tthis.modules = {}; //hold module variables;\n\n\t\tthis.width = null; //column width\n\t\tthis.widthStyled = \"\"; //column width pre-styled to improve render efficiency\n\t\tthis.maxWidth = null; //column maximum width\n\t\tthis.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\n\t\tthis.maxInitialWidth = null;\n\t\tthis.minWidth = null; //column minimum width\n\t\tthis.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\n\t\tthis.visible = true; //default visible state\n\n\t\tthis.component = null;\n\n\t\t//initialize column\n\t\tif(this.definition.columns){\n\n\t\t\tthis.isGroup = true;\n\n\t\t\tthis.definition.columns.forEach((def, i) => {\n\t\t\t\tvar newCol = new Column(def, this);\n\t\t\t\tthis.attachColumn(newCol);\n\t\t\t});\n\n\t\t\tthis.checkColumnVisibility();\n\t\t}else{\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\n\t\tthis._initialize();\n\t}\n\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\tswitch(this.table.options.columnHeaderVertAlign){\n\t\t\tcase \"middle\":\n\t\t\t\tel.style.justifyContent = \"center\";\n\t\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tel.style.justifyContent = \"flex-end\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn el;\n\t}\n\n\tcreateGroupElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\n\t\treturn el;\n\t}\n\n\tmapDefinitions(){\n\t\tvar defaults = this.table.options.columnDefaults;\n\n\t\t//map columnDefaults onto column definitions\n\t\tif(defaults){\n\t\t\tfor(let key in defaults){\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\n\t\t\t\t\tthis.definition[key] = defaults[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\n\t}\n\n\tcheckDefinition(){\n\t\tObject.keys(this.definition).forEach((key) => {\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetField(field){\n\t\tthis.field = field;\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t}\n\n\t//register column position with column manager\n\tregisterColumnPosition(column){\n\t\tthis.parent.registerColumnPosition(column);\n\t}\n\n\t//register column position with column manager\n\tregisterColumnField(column){\n\t\tthis.parent.registerColumnField(column);\n\t}\n\n\t//trigger position registration\n\treRegisterPosition(){\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t}else{\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t}\n\n\t//build header element\n\t_initialize(){\n\t\tvar def = this.definition;\n\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\tif(def.headerVertical){\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\n\n\t\t\tif(def.headerVertical === \"flip\"){\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\n\t\tthis.contentElement = this._buildColumnHeaderContent();\n\n\t\tthis.element.appendChild(this.contentElement);\n\n\t\tif(this.isGroup){\n\t\t\tthis._buildGroupHeader();\n\t\t}else{\n\t\t\tthis._buildColumnHeader();\n\t\t}\n\n\t\tthis.dispatch(\"column-init\", this);\n\t}\n\n\t//build header element for header\n\t_buildColumnHeader(){\n\t\tvar def = this.definition;\n\n\t\tthis.dispatch(\"column-layout\", this);\n\n\t\t//set column visibility\n\t\tif(typeof def.visible != \"undefined\"){\n\t\t\tif(def.visible){\n\t\t\t\tthis.show(true);\n\t\t\t}else{\n\t\t\t\tthis.hide(true);\n\t\t\t}\n\t\t}\n\n\t\t//assign additional css classes to column header\n\t\tif(def.cssClass){\n\t\t\tvar classNames = def.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tif(def.field){\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\n\t\t//set min width if present\n\t\tthis.setMinWidth(parseInt(def.minWidth));\n\n\t\tif (def.maxInitialWidth) {\n\t\t\tthis.maxInitialWidth = parseInt(def.maxInitialWidth);\n\t\t}\n\t\t\n\t\tif(def.maxWidth){\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\n\t\t}\n\n\t\tthis.reinitializeWidth();\n\n\t\t//set horizontal text alignment\n\t\tthis.hozAlign = this.definition.hozAlign;\n\t\tthis.vertAlign = this.definition.vertAlign;\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t}\n\n\t_buildColumnHeaderContent(){\n\t\tvar contentElement = document.createElement(\"div\");\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\n\t\tthis.titleHolderElement = document.createElement(\"div\");\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n\n\t\tcontentElement.appendChild(this.titleHolderElement);\n\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\n\n\t\treturn contentElement;\n\t}\n\n\t//build title element of column\n\t_buildColumnHeaderTitle(){\n\t\tvar def = this.definition;\n\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\t\t\n\t\tif(def.headerWordWrap){\n\t\t\ttitleHolderElement.classList.add(\"tabulator-col-title-wrap\");\n\t\t}\n\n\t\tif(def.editableTitle){\n\t\t\tvar titleElement = document.createElement(\"input\");\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\n\t\t\ttitleElement.addEventListener(\"change\", () => {\n\t\t\t\tdef.title = titleElement.value;\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n\t\t\t});\n\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\n\t\t\t}\n\n\t\t}else{\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\n\t\treturn titleHolderElement;\n\t}\n\n\t_formatColumnHeaderTitle(el, title){\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\n\t\t\treturn title;\n\t\t});\n\n\t\tswitch(typeof contents){\n\t\t\tcase \"object\":\n\t\t\t\tif(contents instanceof Node){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = \"\";\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tel.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tel.innerHTML = contents;\n\t\t}\n\t}\n\n\t//build header element for column group\n\t_buildGroupHeader(){\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\n\t\t//asign additional css classes to column header\n\t\tif(this.definition.cssClass){\n\t\t\tvar classNames = this.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\n\t\tthis.element.appendChild(this.groupElement);\n\t}\n\n\t//flat field lookup\n\t_getFlatData(data){\n\t\treturn data[this.field];\n\t}\n\n\t//nested field lookup\n\t_getNestedData(data){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length,\n\t\toutput;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tdataObj = dataObj[structure[i]];\n\n\t\t\toutput = dataObj;\n\n\t\t\tif(!dataObj){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//flat field set\n\t_setFlatData(data, value){\n\t\tif(this.field){\n\t\t\tdata[this.field] = value;\n\t\t}\n\t}\n\n\t//nested field set\n\t_setNestedData(data, value){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tif(i == length -1){\n\t\t\t\tdataObj[structure[i]] = value;\n\t\t\t}else{\n\t\t\t\tif(!dataObj[structure[i]]){\n\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\tdataObj[structure[i]] = {};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t}\n\t\t}\n\t}\n\n\t//attach column to this group\n\tattachColumn(column){\n\t\tif(this.groupElement){\n\t\t\tthis.columns.push(column);\n\t\t\tthis.groupElement.appendChild(column.getElement());\n\n\t\t\tcolumn.columnRendered();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t}\n\n\t//vertically align header in column\n\tverticalAlign(alignment, height){\n\n\t\t//calculate height of column header and group holder element\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n\t\tthis.element.style.height = parentHeight + \"px\";\n\n\t\tthis.dispatch(\"column-height\", this, this.element.style.height);\n\n\t\tif(this.isGroup){\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t}\n\n\t\t//vertically align cell contents\n\t\t// if(!this.isGroup && alignment !== \"top\"){\n\t\t// \tif(alignment === \"bottom\"){\n\t\t// \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t// \t}else{\n\t\t// \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n\t\t// \t}\n\t\t// }\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t}\n\n\t//clear vertical alignment\n\tclearVerticalAlign(){\n\t\tthis.element.style.paddingTop = \"\";\n\t\tthis.element.style.height = \"\";\n\t\tthis.element.style.minHeight = \"\";\n\t\tthis.groupElement.style.minHeight = \"\";\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\n\t\tthis.dispatch(\"column-height\", this, \"\");\n\t}\n\n\t//// Retrieve Column Information ////\n\t//return column header element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return column group element\n\tgetGroupElement(){\n\t\treturn this.groupElement;\n\t}\n\n\t//return field name\n\tgetField(){\n\t\treturn this.field;\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this.titleDownload;\n\t}\n\n\t//return the first column in a group\n\tgetFirstColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return the last column in a group\n\tgetLastColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return all columns in a group\n\tgetColumns(traverse){\n\t\tvar columns = [];\n\n\t\tif(traverse){\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumns.push(column);\n\t\t\t\t\t\n\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t});\n\t\t}else{\n\t\t\tcolumns = this.columns;\n\t\t}\n\t\t\n\t\treturn columns;\n\t}\n\n\t//return all columns in a group\n\tgetCells(){\n\t\treturn this.cells;\n\t}\n\n\t//retrieve the top column in a group of columns\n\tgetTopColumn(){\n\t\tif(this.parent.isGroup){\n\t\t\treturn this.parent.getTopColumn();\n\t\t}else{\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t//return column definition object\n\tgetDefinition(updateBranches){\n\t\tvar colDefs = [];\n\n\t\tif(this.isGroup && updateBranches){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\n\t\treturn this.definition;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tcheckColumnVisibility(){\n\t\tvar visible = false;\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tif(column.visible){\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\n\t\tif(visible){\n\t\t\tthis.show();\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t}else{\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//show column\n\tshow(silent, responsiveToggle){\n\t\tif(!this.visible){\n\t\t\tthis.visible = true;\n\n\t\t\tthis.element.style.display = \"\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.show();\n\t\t\t});\n\n\t\t\tif(!this.isGroup && this.width === null){\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\t//hide column\n\thide(silent, responsiveToggle){\n\t\tif(this.visible){\n\t\t\tthis.visible = false;\n\n\t\t\tthis.element.style.display = \"none\";\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.hide();\n\t\t\t});\n\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\tmatchChildWidths(){\n\t\tvar childWidth = 0;\n\n\t\tif(this.contentElement && this.columns.length){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveChild(child){\n\t\tvar index = this.columns.indexOf(child);\n\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\n\t\tif(!this.columns.length){\n\t\t\tthis.delete();\n\t\t}\n\t}\n\n\tsetWidth(width){\n\t\tthis.widthFixed = true;\n\t\tthis.setWidthActual(width);\n\t}\n\n\tsetWidthActual(width){\n\t\tif(isNaN(width)){\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\n\t\t}\n\n\t\twidth = Math.max(this.minWidth, width);\n\n\t\tif(this.maxWidth){\n\t\t\twidth = Math.min(this.maxWidth, width);\n\t\t}\n\n\t\tthis.width = width;\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\n\t\tthis.element.style.width = this.widthStyled;\n\n\t\tif(!this.isGroup){\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\n\t\tif(this.parent.isGroup){\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\n\t\tthis.dispatch(\"column-width\", this);\n\t}\n\n\tcheckCellHeights(){\n\t\tvar rows = [];\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tif(cell.row.heightInitialized){\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\n\t\t\t\t\trows.push(cell.row);\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t}else{\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.calcHeight();\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.setCellHeight();\n\t\t});\n\t}\n\n\tgetWidth(){\n\t\tvar width = 0;\n\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\twidth = this.width;\n\t\t}\n\n\t\treturn width;\n\t}\n\n\tgetLeftOffset(){\n\t\tvar offset = this.element.offsetLeft;\n\n\t\tif(this.parent.isGroup){\n\t\t\toffset += this.parent.getLeftOffset();\n\t\t}\n\n\t\treturn offset;\n\t}\n\n\tgetHeight(){\n\t\treturn Math.ceil(this.element.getBoundingClientRect().height);\n\t}\n\n\tsetMinWidth(minWidth){\n\t\tif(this.maxWidth && minWidth > this.maxWidth){\n\t\t\tminWidth = this.maxWidth;\n\n\t\t\tconsole.warn(\"the minWidth (\"+ minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\"+ this.maxWidthStyled + \")\");\n\t\t}\n\n\t\tthis.minWidth = minWidth;\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMinWidth();\n\t\t});\n\t}\n\n\tsetMaxWidth(maxWidth){\n\t\tif(this.minWidth && maxWidth < this.minWidth){\n\t\t\tmaxWidth = this.minWidth;\n\n\t\t\tconsole.warn(\"the maxWidth (\"+ maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\"+ this.minWidthStyled + \")\");\n\t\t}\n\n\t\tthis.maxWidth = maxWidth;\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMaxWidth();\n\t\t});\n\t}\n\n\tdelete(){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(this.isGroup){\n\t\t\t\tthis.columns.forEach(function(column){\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.dispatch(\"column-delete\", this);\n\n\t\t\tvar cellCount = this.cells.length;\n\n\t\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\t\tthis.cells[0].delete();\n\t\t\t}\n\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\n\t\t\tthis.element = false;\n\t\t\tthis.contentElement = false;\n\t\t\tthis.titleElement = false;\n\t\t\tthis.groupElement = false;\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.removeChild(this);\n\t\t\t}\n\n\t\t\tthis.table.columnManager.deregisterColumn(this);\n\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\n\t\t\tresolve();\n\t\t});\n\t}\n\n\tcolumnRendered(){\n\t\tif(this.titleFormatterRendered){\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\n\t\tthis.dispatch(\"column-rendered\", this);\n\t}\n\n\t//////////////// Cell Management /////////////////\n\t//generate cell for this column\n\tgenerateCell(row){\n\t\tvar cell = new Cell(this, row);\n\n\t\tthis.cells.push(cell);\n\n\t\treturn cell;\n\t}\n\n\tnextColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t}\n\n\t_nextVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t}\n\n\tprevColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t}\n\n\t_prevVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t}\n\n\treinitializeWidth(force){\n\t\tthis.widthFixed = false;\n\n\t\t//set width if present\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\n\t\t\t// maxInitialWidth ignored here as width specified\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\n\t\tthis.dispatch(\"column-width-fit-before\", this);\n\n\t\tthis.fitToData(force);\n\n\t\tthis.dispatch(\"column-width-fit-after\", this);\n\t}\n\n\t//set column width to maximum cell width for non group columns\n\tfitToData(force){\n\t\tif(this.isGroup){\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.widthFixed){\n\t\t\tthis.element.style.width = \"\";\n\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\n\t\tvar maxWidth = this.element.offsetWidth;\n\n\t\tif(!this.width || !this.widthFixed){\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tvar width = cell.getWidth();\n\n\t\t\t\tif(width > maxWidth){\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(maxWidth){\n\t\t\t\tvar setTo = maxWidth + 1;\n\t\t\t\tif (this.maxInitialWidth && !force) {\n\t\t\t\t\tsetTo = Math.min(setTo, this.maxInitialWidth);\n\t\t\t\t}\n\t\t\t\tthis.setWidthActual(setTo);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateDefinition(updates){\n\t\tvar definition;\n\n\t\tif(!this.isGroup){\n\t\t\tif(!this.parent.isGroup){\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\n\t\t\t\t\t.then((column) => {\n\n\t\t\t\t\t\tif(definition.field == this.field){\n\t\t\t\t\t\t\tthis.field = false; //clear field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.delete()\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t}\n\t}\n\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new ColumnComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n\nColumn.defaultOptionList = defaultOptions;\n\nexport default Column;\n","//public row object\nexport default class RowComponent {\n\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\tgetIndex(){\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t}\n\n\tgetPosition(){\n\t\treturn this._row.getPosition();\n\t}\n\n\twatchPosition(callback){\n\t\treturn this._row.watchPosition(callback);\n\t}\n\n\tdelete(){\n\t\treturn this._row.delete();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._row.table.rowManager.scrollToRow(this._row, position, ifVisible);\n\t}\n\n\tmove(to, after){\n\t\tthis._row.moveToRow(to, after);\n\t}\n\n\tupdate(data, forceRowUpdate, forcedColumnUpdateName){\n\t\tif((!Array.isArray(forcedColumnUpdateName) && typeof forcedColumnUpdateName != 'string') || forcedColumnUpdateName.length == 0){\n\t\t\tforcedColumnUpdateName = undefined;\n\t\t}\n\t\treturn this._row.updateData(data, forceRowUpdate, forcedColumnUpdateName);\n\t}\n\n\tnormalizeHeight(){\n\t\tthis._row.normalizeHeight(true);\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n\n\treformat(){\n\t\treturn this._row.reinitialize();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetNextRow(){\n\t\tvar row = this._row.nextRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n\n\tgetPrevRow(){\n\t\tvar row = this._row.prevRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport RowComponent from './RowComponent.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Row extends CoreFeature{\n\tconstructor (data, parent, type = \"row\"){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.parent = parent;\n\t\tthis.data = {};\n\t\tthis.type = type; //type of element\n\t\tthis.element = false;\n\t\tthis.modules = {}; //hold module variables;\n\t\tthis.cells = [];\n\t\tthis.height = 0; //hold element height\n\t\tthis.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\n\t\tthis.manualHeight = false; //user has manually set row height\n\t\tthis.outerHeight = 0; //hold elements outer height\n\t\tthis.initialized = false; //element has been rendered\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\t\tthis.position = 0; //store position of element in row list\n\t\tthis.positionWatchers = [];\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.created = false;\n\t\t\n\t\tthis.setData(data);\n\t}\n\t\n\tcreate(){\n\t\tif(!this.created){\n\t\t\tthis.created = true;\n\t\t\tthis.generateElement();\n\t\t}\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\tthis.element = el;\n\t}\n\t\n\tgetElement(){\n\t\tthis.create();\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.createElement();\n\t\tthis.dispatch(\"row-init\", this);\n\t}\n\t\n\tgenerateCells(){\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t}\n\t\n\t//functions to setup on first render\n\tinitialize(force, inFragment){\n\t\tthis.create();\n\t\t\n\t\tif(!this.initialized || force){\n\t\t\t\n\t\t\tthis.deleteCells();\n\t\t\t\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-before\", this);\n\t\t\t\n\t\t\tthis.generateCells();\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t\t\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this, inFragment);\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.normalizeHeight();\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout\", this);\n\t\t\t\n\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-after\", this);\n\t\t}else{\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this, inFragment);\n\t\t}\n\t}\n\n\trendered(){\n\t\tthis.cells.forEach((cell) => {\n\t\t\tcell.cellRendered();\n\t\t});\n\t}\n\t\n\treinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t}\n\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tdeinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t}\n\t\n\treinitialize(children){\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(!this.manualHeight){\n\t\t\tthis.height = 0;\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.initialize(true);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"row-relayout\", this);\n\t}\n\t\n\t//get heights when doing bulk row style calcs in virtual DOM\n\tcalcHeight(force){\n\t\tvar maxHeight = 0,\n\t\tminHeight;\n\t\t\n\t\tif(this.table.options.rowHeight){\n\t\t\tthis.height = this.table.options.rowHeight;\n\t\t}else{\n\t\t\tminHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tvar height = cell.getHeight();\n\t\t\t\tif(height > maxHeight){\n\t\t\t\t\tmaxHeight = height;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t\t}else{\n\t\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n\t\n\t//set of cells\n\tsetCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setHeight();\n\t\t});\n\t\t\n\t\tthis.heightInitialized = true;\n\t}\n\t\n\tclearCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.clearHeight();\n\t\t});\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(force){\n\t\tif(force && !this.table.options.rowHeight){\n\t\t\tthis.clearCellHeight();\n\t\t}\n\t\t\n\t\tthis.calcHeight(force);\n\t\t\n\t\tthis.setCellHeight();\n\t}\n\t\n\t//set height of rows\n\tsetHeight(height, force){\n\t\tif(this.height != height || force){\n\t\t\t\n\t\t\tthis.manualHeight = true;\n\t\t\t\n\t\t\tthis.height = height;\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\t\t\t\n\t\t\tthis.setCellHeight();\n\t\t\t\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\t//return rows outer Width\n\tgetWidth(){\n\t\treturn this.element.offsetWidth;\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Data Management /////////////////\n\tsetData(data){\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n\t\t\n\t\tthis.dispatch(\"row-data-init-after\", this);\n\t}\n\t\n\t//update the rows data\n\tupdateData(updatedData, forceRowUpdate, forcedColumnUpdateName){\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\n\t\ttempData = {},\n\t\tnewRowData;\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof updatedData === \"string\"){\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\n\t\t\t\n\t\t\tif(this.subscribed(\"row-data-changing\")){\n\t\t\t\ttempData = Object.assign(tempData, this.data);\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\t\t\t\n\t\t\t//set data\n\t\t\tfor (let attrname in newRowData) {\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\n\t\t\t\n\t\t\t//update affected cells only\n\t\t\tfor (let attrname in updatedData) {\n\t\t\t\t\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n\t\t\t\t\n\t\t\t\tcolumns.forEach((column) => {\n\t\t\t\t\tlet cell = this.getCell(column.getField());\n\t\t\t\t\t\n\t\t\t\t\tif(cell){\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\n\t\t\t\t\t\tconst forceColumnUpdate = (Array.isArray(forcedColumnUpdateName) && forcedColumnUpdateName.includes(column.field)) || forcedColumnUpdateName === column.field;\n\t\t\t\t\t\tif(forceRowUpdate || forceColumnUpdate || cell.getValue() !== value){\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(visible){\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//Partial reinitialization if visible\n\t\t\tif(visible){\n\t\t\t\tthis.normalizeHeight(true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.initialized = false;\n\t\t\t\tthis.height = 0;\n\t\t\t\tthis.heightStyled = \"\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\n\t\t\t\n\t\t\t//this.reinitialize();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tgetData(transform){\n\t\tif(transform){\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\tgetCell(column){\n\t\tvar match = false;\n\t\t\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\t\t\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\tmatch = this.cells.find(function(cell){\n\t\t\treturn cell.column === column;\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetCellIndex(findCell){\n\t\treturn this.cells.findIndex(function(cell){\n\t\t\treturn cell === findCell;\n\t\t});\n\t}\n\t\n\tfindCell(subject){\n\t\treturn this.cells.find((cell) => {\n\t\t\treturn cell.element === subject;\n\t\t});\n\t}\n\t\n\tgetCells(){\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\treturn this.cells;\n\t}\n\t\n\tnextRow(){\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tprevRow(){\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tmoveToRow(to, before){\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\t\t\n\t\tif(toRow){\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t}\n\t\n\t///////////////////// Actions  /////////////////////\n\tdelete(){\n\t\tthis.dispatch(\"row-delete\", this);\n\t\t\n\t\tthis.deleteActual();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\tdeleteActual(blockRedraw){\n\t\tthis.detachModules();\n\t\t\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\t\t\n\t\tthis.deleteCells();\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\tthis.element = false;\n\t\t\n\t\tthis.dispatch(\"row-deleted\", this);\n\t}\n\t\n\tdetachModules(){\n\t\tthis.dispatch(\"row-deleting\", this);\n\t}\n\t\n\tdeleteCells(){\n\t\tvar cellCount = this.cells.length;\n\t\t\n\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t}\n\t\n\twipe(){\n\t\tthis.detachModules();\n\t\tthis.deleteCells();\n\t\t\n\t\tif(this.element){\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.modules = {};\n\t}\n\n\tisDisplayed(){\n\t\treturn this.table.rowManager.getDisplayRows().includes(this);\n\t}\n\n\tgetPosition(){\n\t\treturn this.isDisplayed() ? this.position : false;\n\t}\n\n\tsetPosition(position){\n\t\tif(position != this.position){\n\t\t\tthis.position = position;\n\n\t\t\tthis.positionWatchers.forEach((callback) => {\n\t\t\t\tcallback(this.position);\n\t\t\t});\n\t\t}\n\t}\n\n\twatchPosition(callback){\n\t\tthis.positionWatchers.push(callback);\n\n\t\tcallback(this.position);\n\t}\n\t\n\tgetGroup(){\n\t\treturn this.modules.group || false;\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new RowComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n","export default {\n\t\"avg\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn Number(sum) + Number(value);\n\t\t\t});\n\n\t\t\toutput = output / values.length;\n\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t}\n\n\t\treturn parseFloat(output).toString();\n\t},\n\t\"max\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value > output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"min\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value < output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"sum\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t});\n\t\t}\n\n\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t},\n\t\"concat\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn String(sum) + String(value);\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"count\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tif(value){\n\t\t\t\t\toutput ++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"unique\":function(values, data, calcParams){\n\t\tvar unique = values.filter((value, index) => {\n\t\t\treturn (values || value === 0) && values.indexOf(value) === index;\n\t\t});\n\n\t\treturn unique.length;\n\t},\n};","import Module from '../../core/Module.js';\n\nimport CalcComponent from './CalcComponent.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\nimport Row from '../../core/row/Row.js';\n\nimport defaultCalculations from './defaults/calculations.js';\n\nclass ColumnCalcs extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\t\t\n\t\tthis.blocked = false;\n\t\tthis.recalcAfterBlock = false;\n\t\t\n\t\tthis.registerTableOption(\"columnCalcs\", true);\n\t\t\n\t\tthis.registerColumnOption(\"topCalc\");\n\t\tthis.registerColumnOption(\"topCalcParams\");\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\n\t\tthis.registerColumnOption(\"bottomCalc\");\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\n\t\t\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t\t\n\t\tthis.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this));\n\t\tthis.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this));\n\n\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\t\n\ttableRedraw(force){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t\n\t\tif(force){\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.blocked = true;\n\t\tthis.recalcAfterBlock = false;\n\t}\n\t\n\t\n\trestoreRedraw(){\n\t\tthis.blocked = false;\n\t\t\n\t\tif(this.recalcAfterBlock){\n\t\t\tthis.recalcAfterBlock = false;\n\t\t\tthis.recalcActiveRowsRefresh();\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tuserRecalc(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tblockCheck(){\n\t\tif(this.blocked){\n\t\t\tthis.recalcAfterBlock = true;\n\t\t}\n\t\t\n\t\treturn this.blocked;\n\t}\n\t\n\tvisibleRows(viewable, rows){\n\t\tif(this.topRow){\n\t\t\trows.unshift(this.topRow);\n\t\t}\n\t\t\n\t\tif(this.botRow){\n\t\t\trows.push(this.botRow);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.recalcRowGroup(row);\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRowsRefresh(){\n\t\tif(this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree){\n\t\t\tthis.recalcAll();\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRows(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\tcellValueChanged(cell){\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\n\t\t\tif(this.table.options.groupBy){\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\n\t\t\t\t\tthis.recalcActiveRows();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeColumnCheck(column){\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//initialize column calcs\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\tvar config = {\n\t\t\ttopCalcParams:def.topCalcParams || {},\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\n\t\t};\n\t\t\n\t\tif(def.topCalc){\n\t\t\t\n\t\t\tswitch(typeof def.topCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\n\t\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.topCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(def.bottomCalc){\n\t\t\tswitch(typeof def.bottomCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\n\t\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.botCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t//dummy functions to handle being mock column manager\n\tregisterColumnField(){}\n\t\n\tremoveCalcs(){\n\t\tvar changed = false;\n\t\t\n\t\tif(this.topInitialized){\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(this.botInitialized){\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.footerRemove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\treinitializeCalcs(){\n\t\tif(this.topCalcs.length){\n\t\t\tthis.initializeTopRow();\n\t\t}\n\n\t\tif(this.botCalcs.length){\n\t\t\tthis.initializeBottomRow();\n\t\t}\n\t}\n\t\n\tinitializeTopRow(){\n\t\tif(!this.topInitialized){\n\t\t\tthis.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t}\n\t\n\tinitializeBottomRow(){\n\t\tif(!this.botInitialized){\n\t\t\tthis.footerPrepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tif(this.botInitialized && this.botRow){\n\t\t\tthis.botElement.scrollLeft = left;\n\t\t}\n\t}\n\t\n\trecalc(rows){\n\t\tvar data, row;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(this.topInitialized || this.botInitialized){\n\t\t\t\tdata = this.rowsToData(rows);\n\t\t\t\t\n\t\t\t\tif(this.topInitialized){\n\t\t\t\t\tif(this.topRow){\n\t\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"top\", data);\n\t\t\t\t\tthis.topRow = row;\n\t\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.botInitialized){\n\t\t\t\t\tif(this.botRow){\n\t\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"bottom\", data);\n\t\t\t\t\tthis.botRow = row;\n\t\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\t\tthis.botElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t\t\t\n\t\t\t\t//set resizable handles\n\t\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcRowGroup(row){\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t}\n\t\n\trecalcAll(){\n\t\tif(this.topCalcs.length || this.botCalcs.length){\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\n\t\t\t\t\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\n\t\t\t\t\n\t\t\t\tgroups.forEach((group) => {\n\t\t\t\t\tthis.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcGroup(group){\n\t\tvar data, rowData;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(group){\n\t\t\t\tif(group.calcs){\n\t\t\t\t\tif(group.calcs.bottom){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(group.calcs.top){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//generate top stats row\n\tgenerateTopRow(rows){\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t}\n\t//generate bottom stats row\n\tgenerateBottomRow(rows){\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t}\n\t\n\trowsToData(rows){\n\t\tvar data = [];\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tdata.push(row.getData());\n\t\t\t\n\t\t\tif(this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs){\n\t\t\t\tif(row.modules.dataTree && row.modules.dataTree.open){\n\t\t\t\t\tvar children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\n\t\t\t\t\tdata = data.concat(children);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\t//generate stats row\n\tgenerateRow(pos, data){\n\t\tvar rowData = this.generateRowData(pos, data),\n\t\trow;\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.disable();\n\t\t}\n\t\t\n\t\trow = new Row(rowData, this, \"calc\");\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.enable();\n\t\t}\n\t\t\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\t\t\n\t\trow.component = false;\n\t\t\n\t\trow.getComponent = () => {\n\t\t\tif(!row.component){\n\t\t\t\trow.component = new CalcComponent(row);\n\t\t\t}\n\t\t\t\n\t\t\treturn row.component;\n\t\t};\n\t\t\n\t\trow.generateCells = () => {\n\t\t\t\n\t\t\tvar cells = [];\n\t\t\t\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\t\n\t\t\t\t//set field name of mock column\n\t\t\t\tthis.genColumn.setField(column.getField());\n\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\n\t\t\t\t\n\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\n\t\t\t\t\t\tparams:{}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//ensure css class definition is replicated to calculation cell\n\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\n\t\t\t\t\n\t\t\t\t//generate cell and assign to correct column\n\t\t\t\tvar cell = new Cell(this.genColumn, row);\n\t\t\t\tcell.getElement();\n\t\t\t\tcell.column = column;\n\t\t\t\tcell.setWidth();\n\t\t\t\t\n\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\tcells.push(cell);\n\t\t\t\t\n\t\t\t\tif(!column.visible){\n\t\t\t\t\tcell.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\trow.cells = cells;\n\t\t};\n\t\t\n\t\treturn row;\n\t}\n\t\n\t//generate stats row\n\tgenerateRowData(pos, data){\n\t\tvar rowData = {},\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\tparams, paramKey;\n\t\t\n\t\tcalcs.forEach(function(column){\n\t\t\tvar values = [];\n\t\t\t\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\n\t\t\t\tdata.forEach(function(item){\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\t\t\t\t\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowData;\n\t}\n\t\n\thasTopCalcs(){\n\t\treturn\t!!(this.topCalcs.length);\n\t}\n\t\n\thasBottomCalcs(){\n\t\treturn\t!!(this.botCalcs.length);\n\t}\n\t\n\t//handle table redraw\n\tredraw(){\n\t\tif(this.topRow){\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif(this.botRow){\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t}\n\t\n\t//return the calculated\n\tgetResults(){\n\t\tvar results = {},\n\t\tgroups;\n\t\t\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\t\t\t\n\t\t\tgroups.forEach((group) => {\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\n\t\t\t});\n\t\t}else{\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\n\t\t\t};\n\t\t}\n\t\t\n\t\treturn results;\n\t}\n\t\n\t//get results from a group\n\tgetGroupResults(group){\n\t\tvar groupObj = group._getSelf(),\n\t\tsubGroups = group.getSubGroups(),\n\t\tsubGroupResults = {},\n\t\tresults = {};\n\t\t\n\t\tsubGroups.forEach((subgroup) => {\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n\t\t});\n\t\t\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults,\n\t\t};\n\t\t\n\t\treturn results;\n\t}\n\t\n\tadjustForScrollbar(width){\n\t\tif(this.botRow){\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.botElement.style.paddingLeft = width + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.botElement.style.paddingRight = width + \"px\";\n\t\t\t}\n\t\t}\n\t}\n}\n\nColumnCalcs.moduleName = \"columnCalcs\";\n\n//load defaults\nColumnCalcs.calculations = defaultCalculations;\n\nexport default ColumnCalcs;","import Module from '../../core/Module.js';\n\nimport Row from '../../core/row/Row.js';\n\nimport RowComponent from '../../core/row/RowComponent.js';\n\nclass DataTree extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function(){};\n\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//selecting a parent row selects its children\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.dataTree){\n\t\t\tvar dummyEl = null,\n\t\t\toptions = this.table.options;\n\n\t\t\tthis.field = options.dataTreeChildField;\n\t\t\tthis.indent = options.dataTreeChildIndent;\n\n\t\t\tif(this.options(\"movableRows\")){\n\t\t\t\tconsole.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeBranchElement){\n\n\t\t\t\tif(options.dataTreeBranchElement === true){\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t\t}else{\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch-empty\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeCollapseElement){\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t\t}\n\n\t\t\tif(options.dataTreeExpandElement){\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t\t}\n\n\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\n\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\n\t\t}\n\t}\n\n\ttableRedrawing(force){\n\t\tvar rows;\n\n\t\tif(force){\n\t\t\trows = this.table.rowManager.getRows();\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.reinitializeRowChildren(row);\n\t\t\t});\n\t\t}\n\t}\n\n\tinitializeElementField(){\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\n\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\t}\n\t\n\tgetRowChildren(row){\n\t\treturn this.getTreeChildren(row, true);\n\t}\n\n\tcolumnMoving(){\n\t\tvar rows = [];\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\trowDataChanged(row, visible, updatedData){\n\t\tif(this.redrawNeeded(updatedData)){\n\t\t\tthis.initializeRow(row);\n\n\t\t\tif(visible){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcellValueChanged(cell){\n\t\tvar field = cell.column.getField();\n\n\t\tif(field === this.elementField){\n\t\t\tthis.layoutRow(cell.row);\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren:children,\n\t\t};\n\t}\n\n\treinitializeRowChildren(row){\n\t\tvar children = this.getTreeChildren(row, false, true);\n\n\t\tchildren.forEach(function(child){\n\t\t\tchild.reinitialize(true);\n\t\t});\n\t}\n\n\tlayoutRow(row){\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\tel = cell.getElement(),\n\t\tconfig = row.modules.dataTree;\n\n\t\tif(config.branchEl){\n\t\t\tif(config.branchEl.parentNode){\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif(config.controlEl){\n\t\t\tif(config.controlEl.parentNode){\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif(config.index){\n\t\t\tif(this.branchEl){\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateControlElement(row, el){\n\t\tvar config = row.modules.dataTree,\n\t\toldControl = config.controlEl;\n\n\t\tel = el || row.getCells()[0].getElement();\n\n\t\tif(config.children !== false){\n\n\t\t\tif(config.open){\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.collapseRow(row);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif(oldControl && oldControl.parentNode === el){\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\n\t\t\t}else{\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRows(rows){\n\t\tvar output = [];\n\n\t\trows.forEach((row, i) => {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif(row instanceof Row){\n\n\t\t\t\trow.create();\n\n\t\t\t\tconfig = row.modules.dataTree;\n\n\t\t\t\tif(!config.index && config.children !== false){\n\t\t\t\t\tchildren = this.getChildren(row);\n\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tchild.create();\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetChildren(row, allChildren){\n\t\tvar config = row.modules.dataTree,\n\t\tchildren = [],\n\t\toutput = [];\n\n\t\tif(config.children !== false && (config.open || allChildren)){\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\n\t\t\t\tthis.table.modules.sort.sort(children);\n\t\t\t}\n\n\t\t\tchildren.forEach((child) => {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = this.getChildren(child);\n\n\t\t\t\tsubChildren.forEach((sub) => {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgenerateChildren(row){\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif(!Array.isArray(childArray)){\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach((childData) => {\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\n\n\t\t\tchildRow.create();\n\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\n\t\t\tif(childRow.modules.dataTree.children){\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t}\n\n\texpandRow(row, silent){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\tcollapseRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\ttoggleRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tif(config.open){\n\t\t\t\tthis.collapseRow(row);\n\t\t\t}else{\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowExpanded(row){\n\t\treturn row.modules.dataTree.open;\n\t}\n\n\tgetTreeParent(row){\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t}\n\n\tgetTreeParentRoot(row){\n\t\treturn row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\n\t}\n\n\tgetFilteredTreeChildren(row){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [], children;\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\trowDelete(row){\n\t\tvar parent = row.modules.dataTree.parent,\n\t\tchildIndex;\n\n\t\tif(parent){\n\t\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t\t}\n\n\t\t\tif(!parent.data[this.field].length){\n\t\t\t\tdelete parent.data[this.field];\n\t\t\t}\n\n\t\t\tthis.initializeRow(parent);\n\t\t\tthis.layoutRow(parent);\n\t\t}\n\n\t\tthis.refreshData(true);\n\t}\n\n\taddTreeChildRow(row, data, top, index){\n\t\tvar childIndex = false;\n\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(!Array.isArray(row.data[this.field])){\n\t\t\trow.data[this.field] = [];\n\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\n\t\t\t}\n\t\t}\n\n\t\tif(childIndex === false){\n\t\t\tif(top){\n\t\t\t\trow.data[this.field].unshift(data);\n\t\t\t}else{\n\t\t\t\trow.data[this.field].push(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.initializeRow(row);\n\t\tthis.layoutRow(row);\n\n\t\tthis.refreshData(true);\n\t}\n\n\tfindChildIndex(subject, parent){\n\t\tvar match = false;\n\n\t\tif(typeof subject == \"object\"){\n\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\tmatch = subject.data;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\tmatch = subject._getSelf().data;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\tif(parent.modules.dataTree){\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tmatch = match.data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else if(subject === null){\n\t\t\t\tmatch = false;\n\t\t\t}\n\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\tmatch = false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tmatch = parent.data[this.field].find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t}\n\n\t\tif(match){\n\n\t\t\tif(Array.isArray(parent.data[this.field])){\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t\t}\n\n\t\t\tif(match == -1){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\t\treturn match;\n\t}\n\n\tgetTreeChildren(row, component, recurse){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [];\n\n\t\tif(config && config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\n\n\t\t\t\t\tif(recurse){\n\t\t\t\t\t\toutput = output.concat(this.getTreeChildren(childRow, component, recurse));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetChildField(){\n\t\treturn this.field;\n\t}\n\n\tredrawNeeded(data){\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t}\n}\n\nDataTree.moduleName = \"dataTree\";\n\nexport default DataTree;","import csv from './downloaders/csv.js';\nimport json from './downloaders/json.js';\nimport pdf from './downloaders/pdf.js';\nimport xlsx from './downloaders/xlsx.js';\nimport html from './downloaders/html.js';\nimport jsonLines from './downloaders/jsonLines.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tjsonLines:jsonLines,\n\tpdf:pdf,\n\txlsx:xlsx,\n\thtml:html,\n};","export default function(list, options = {}, setFileContents){\n\tvar delimiter = options.delimiter ? options.delimiter : \",\",\n\tfileContents = [],\n\theaders = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = [];\n\n\t\tswitch(row.type){\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"header\":\n\t\t\t\trow.columns.forEach((col, i) => {\n\t\t\t\t\tif(col && col.depth === 1){\n\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\n\t\t\t\t\tif(col){\n\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item.join(delimiter));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(headers.length){\n\t\tfileContents.unshift(headers.join(delimiter));\n\t}\n\n\tfileContents = fileContents.join(\"\\n\");\n\n\tif(options.bom){\n\t\tfileContents = \"\\ufeff\" + fileContents;\n\t}\n\n\tsetFileContents(fileContents, \"text/csv\");\n}\n","export default function(list, options, setFileContents){\n\tvar fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = {};\n\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif(col){\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\tsetFileContents(fileContents, \"application/json\");\n}","export default function (list, options, setFileContents) {\n\tconst fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tconst item = {};\n\n\t\tswitch (row.type) {\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(JSON.stringify(item));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tsetFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n}","export default function(list, options = {}, setFileContents){\n\tvar header = [],\n\tbody = [],\n\tautoTableParams = {},\n\trowGroupStyles = options.rowGroupStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 12,\n\t\tcellPadding: 6,\n\t\tfillColor: 220,\n\t},\n\trowCalcStyles = options.rowCalcStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 10,\n\t\tcellPadding: 4,\n\t\tfillColor: 232,\n\t},\n\tjsPDFParams = options.jsPDF || {},\n\ttitle = options.title ? options.title : \"\";\n\n\tif(!jsPDFParams.orientation){\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t}\n\n\tif(!jsPDFParams.unit){\n\t\tjsPDFParams.unit = \"pt\";\n\t}\n\n\t//parse row list\n\tlist.forEach((row) => {\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\theader.push(parseRow(row));\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\tbody.push(parseRow(row));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfunction parseRow(row, styles){\n\t\tvar rowData = [];\n\n\t\trow.columns.forEach((col) =>{\n\t\t\tvar cell;\n\n\t\t\tif(col){\n\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcell = {\n\t\t\t\t\tcontent:col.value,\n\t\t\t\t\tcolSpan:col.width,\n\t\t\t\t\trowSpan:col.height,\n\t\t\t\t};\n\n\t\t\t\tif(styles){\n\t\t\t\t\tcell.styles = styles;\n\t\t\t\t}\n\n\t\t\t\trowData.push(cell);\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t}\n\n\n\t//configure PDF\n\tvar doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n\tif(options.autoTable){\n\t\tif(typeof options.autoTable === \"function\"){\n\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t}else{\n\t\t\tautoTableParams = options.autoTable;\n\t\t}\n\t}\n\n\tif(title){\n\t\tautoTableParams.didDrawPage = function(data) {\n\t\t\tdoc.text(title, 40, 30);\n\t\t};\n\t}\n\n\tautoTableParams.head = header;\n\tautoTableParams.body = body;\n\n\tdoc.autoTable(autoTableParams);\n\n\tif(options.documentProcessing){\n\t\toptions.documentProcessing(doc);\n\t}\n\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n}\n","import CoreFeature from '../../../../core/CoreFeature.js';\n\nexport default function(list, options, setFileContents){\n\tvar self = this,\n\tsheetName = options.sheetName || \"Sheet1\",\n\tworkbook = XLSX.utils.book_new(),\n\ttableFeatures = new CoreFeature(this),\n\tcompression =  'compress' in options ? options.compress : true,\n\twriteOptions = options.writeOptions || {bookType:'xlsx', bookSST:true, compression},\n\toutput;\n\n\twriteOptions.type = 'binary';\n\n\tworkbook.SheetNames = [];\n\tworkbook.Sheets = {};\n\n\tfunction generateSheet(){\n\t\tvar rows = [],\n\t\tmerges = [],\n\t\tworksheet = {},\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\n\n\t\t//parse row list\n\t\tlist.forEach((row, i) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function(col, j){\n\n\t\t\t\tif(col){\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\trowData.push(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trows.push(rowData);\n\t\t});\n\n\t\t//convert rows to worksheet\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\n\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\n\n\t\tif(merges.length){\n\t\t\tworksheet[\"!merges\"] = merges;\n\t\t}\n\n\t\treturn worksheet;\n\t}\n\n\tif(options.sheetOnly){\n\t\tsetFileContents(generateSheet());\n\t\treturn;\n\t}\n\n\tif(options.sheets){\n\t\tfor(var sheet in options.sheets){\n\n\t\t\tif(options.sheets[sheet] === true){\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t}else{\n\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\n\t\t\t\t\ttype:\"xlsx\",\n\t\t\t\t\toptions:{sheetOnly:true},\n\t\t\t\t\tactive:self.active,\n\t\t\t\t\tintercept:function(data){\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}else{\n\t\tworkbook.SheetNames.push(sheetName);\n\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t}\n\n\tif(options.documentProcessing){\n\t\tworkbook = options.documentProcessing(workbook);\n\t}\n\n\t//convert workbook to binary array\n\tfunction s2ab(s) {\n\t\tvar buf = new ArrayBuffer(s.length);\n\t\tvar view = new Uint8Array(buf);\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n\t\treturn buf;\n\t}\n\n\toutput = XLSX.write(workbook, writeOptions);\n\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\n}\n","export default function(list, options, setFileContents){\n\tif(this.modExists(\"export\", true)){\n\t\tsetFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\n\t}\n}","import Module from '../../core/Module.js';\n\nimport defaultDownloaders from './defaults/downloaders.js';\n\nclass Download extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.registerTableOption(\"downloadEncoder\", function(data, mimeType){\n\t\t\treturn new Blob([data],{type:mimeType});\n\t\t}); //function to manipulate download data\n\t\tthis.registerTableOption(\"downloadReady\", undefined); //warn of function deprecation\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n\t\tthis.registerColumnOption(\"download\");\n\t\tthis.registerColumnOption(\"titleDownload\");\n\t}\n\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n\t}\n\n\tdeprecatedOptionsCheck(){\n\t\tthis.deprecationCheck(\"downloadReady\", \"downloadEncoder\");\n\t}\t\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tdownloadToTab(type, filename, options, active){\n\t\tthis.download(type, filename, options, active, true);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//trigger file download\n\tdownload(type, filename, options, range, interceptCallback){\n\t\tvar downloadFunc = false;\n\n\t\tfunction buildLink(data, mime){\n\t\t\tif(interceptCallback){\n\t\t\t\tif(interceptCallback === true){\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t}else{\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif(typeof type == \"function\"){\n\t\t\tdownloadFunc = type;\n\t\t}else{\n\t\t\tif(Download.downloaders[type]){\n\t\t\t\tdownloadFunc = Download.downloaders[type];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tif(downloadFunc){\n\t\t\tvar list = this.generateExportList(range);\n\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\n\t\t}\n\t}\n\n\tgenerateExportList(range){\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t\t//assign group header formatter\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\n\t\t\tgroupHeader = [groupHeader];\n\t\t}\n\n\t\tlist.forEach((row) => {\n\t\t\tvar group;\n\n\t\t\tif(row.type === \"group\"){\n\t\t\t\tgroup = row.columns[0];\n\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn list;\n\t}\n\n\ttriggerDownload(data, mime, type, filename, newTab){\n\t\tvar element = document.createElement('a'),\n\t\tblob = this.table.options.downloadEncoder(data, mime);\n\n\t\tif(blob){\n\t\t\tif(newTab){\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t}else{\n\t\t\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\t\t\t\t\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t}else{\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\n\t\t}\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"intercept\":\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nDownload.moduleName = \"download\";\n\n//load defaults\nDownload.downloaders = defaultDownloaders;\n\nexport default Download;","export default function maskInput(el, options){\n\tvar mask = options.mask,\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\n\n\tfunction fillSymbols(index){\n\t\tvar symbol = mask[index];\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\n\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\tfillSymbols(index+1);\n\t\t}\n\t}\n\n\tel.addEventListener(\"keydown\", (e) => {\n\t\tvar index = el.value.length,\n\t\tchar = e.key;\n\n\t\tif(e.keyCode > 46 && !e.ctrlKey && !e.metaKey){\n\t\t\tif(index >= mask.length){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tswitch(mask[index]){\n\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\tif(isNaN(char)){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(char !== mask[index]){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn;\n\t});\n\n\tel.addEventListener(\"keyup\", (e) => {\n\t\tif(e.keyCode > 46){\n\t\t\tif(options.maskAutoFill){\n\t\t\t\tfillSymbols(el.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\n\tif(!el.placeholder){\n\t\tel.placeholder = mask;\n\t}\n\n\tif(options.maskAutoFill){\n\t\tfillSymbols(el.value.length);\n\t}\n}","import maskInput from './inputMask.js';\nimport urlBuilder from '../Ajax/defaults/urlGenerator.js';\n\nexport default class Edit{\n\tconstructor(editor, cell, onRendered, success, cancel, editorParams){\n\t\tthis.edit = editor;\n\t\tthis.table = editor.table;\n\t\tthis.cell = cell;\n\t\tthis.params = this._initializeParams(editorParams);\n\t\t\n\t\tthis.data = [];\n\t\tthis.displayItems = [];\n\t\tthis.currentItems = [];\n\t\tthis.focusedItem = null;\n\t\t\n\t\tthis.input = this._createInputElement();\n\t\tthis.listEl = this._createListElement();\n\t\t\n\t\tthis.initialValues = null; \n\t\t\n\t\tthis.isFilter = cell.getType() === \"header\";\n\t\t\n\t\tthis.filterTimeout = null;\n\t\tthis.filtered = false;\n\t\tthis.typing = false;\n\t\t\n\t\tthis.values = []; \n\t\tthis.popup = null;  \n\t\t\n\t\tthis.listIteration = 0;\n\t\t\n\t\tthis.lastAction=\"\";\n\t\tthis.filterTerm=\"\";\n\t\t\n\t\tthis.blurable = true;\n\t\t\n\t\tthis.actions = {\n\t\t\tsuccess:success,\n\t\t\tcancel:cancel\n\t\t};\n\t\t\n\t\tthis._deprecatedOptionsCheck();\n\t\tthis._initializeValue();\n\t\t\n\t\tonRendered(this._onRendered.bind(this));\n\t}\n\t\n\t_deprecatedOptionsCheck(){\n\t\tif(this.params.listItemFormatter){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.sortValuesList){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.searchFunc){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.searchingPlaceholder){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t}\n\t\n\t_initializeValue(){\n\t\tvar initialValue = this.cell.getValue();\n\t\t\n\t\tif(typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\"){\n\t\t\tinitialValue = this.params.defaultValue;\n\t\t}\n\t\t\n\t\tthis.initialValues = this.params.multiselect ? initialValue : [initialValue];\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\n\t\t\tthis.headerFilterInitialListGen();            \n\t\t}\n\t}\n\t\n\t_onRendered(){\n\t\tvar cellEl = this.cell.getElement();\n\t\t\n\t\tfunction clickStop(e){\n\t\t\te.stopPropagation();\n\t\t}\t\n\t\t\n\t\tif(!this.isFilter){\n\t\t\tthis.input.style.height = \"100%\";\n\t\t\tthis.input.focus({preventScroll: true});\n\t\t}\n\t\t\n\t\t\n\t\tcellEl.addEventListener(\"click\", clickStop);\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tcellEl.removeEventListener(\"click\", clickStop);\n\t\t}, 1000);\n\t\t\n\t\tthis.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n\t}\n\t\n\t_createListElement(){\n\t\tvar listEl = document.createElement(\"div\");\n\t\tlistEl.classList.add(\"tabulator-edit-list\");\n\t\t\n\t\tlistEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\tlistEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\t\n\t\treturn listEl;\n\t}\n\t\n\t_setListWidth(){\n\t\tvar element = this.isFilter ? this.input : this.cell.getElement();\n\t\t\n\t\tthis.listEl.style.minWidth = element.offsetWidth + \"px\";\n\t\t\n\t\tif(this.params.maxWidth){\n\t\t\tif(this.params.maxWidth === true){\n\t\t\t\tthis.listEl.style.maxWidth = element.offsetWidth + \"px\";\n\t\t\t}else if(typeof this.params.maxWidth === \"number\"){\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t_createInputElement(){\n\t\tvar attribs = this.params.elementAttributes;\n\t\tvar input = document.createElement(\"input\");\n\t\t\n\t\tinput.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n\t\t\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\t\t\n\t\tif(!this.params.autocomplete){\n\t\t\tinput.style.cursor = \"default\";\n\t\t\tinput.style.caretColor = \"transparent\";\n\t\t\t// input.readOnly = (this.edit.currentCell != false);\n\t\t}\n\t\t\n\t\tif(attribs && typeof attribs == \"object\"){\n\t\t\tfor (let key in attribs){\n\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n\t\t\t\t}else{\n\t\t\t\t\tinput.setAttribute(key, attribs[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(this.params.mask){\n\t\t\tmaskInput(input, this.params);\n\t\t}\n\t\t\n\t\tthis._bindInputEvents(input);\n\t\t\n\t\treturn input;\n\t}\n\t\n\t_initializeParams(params){\n\t\tvar valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n\t\tvalueCheck;\n\t\t\n\t\tparams = Object.assign({}, params);\n\t\t\n\t\tparams.verticalNavigation = params.verticalNavigation || \"editor\";\n\t\tparams.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n\t\tparams.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n\t\tparams.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n\t\t\n\t\tparams.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n\t\t\n\t\tvalueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n\t\t\n\t\tif(!valueCheck){\n\t\t\tconsole.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\n\t\t}else if(valueCheck > 1){\n\t\t\tconsole.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\n\t\t}\n\t\t\n\t\tif(params.autocomplete){\n\t\t\tif(params.multiselect){\n\t\t\t\tparams.multiselect = false;\n\t\t\t\tconsole.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\n\t\t\t}\n\t\t}else{\n\t\t\tif(params.freetext){\n\t\t\t\tparams.freetext = false;\n\t\t\t\tconsole.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterFunc){\n\t\t\t\tparams.filterFunc = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterRemote){\n\t\t\t\tparams.filterRemote = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.mask){\n\t\t\t\tparams.mask = false;\n\t\t\t\tconsole.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.allowEmpty){\n\t\t\t\tparams.allowEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.listOnEmpty){\n\t\t\t\tparams.listOnEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)){\n\t\t\tparams.filterRemote = false;\n\t\t\tconsole.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n\t\t}\n\t\treturn params;\n\t}\n\t//////////////////////////////////////\n\t////////// Event Handling ////////////\n\t//////////////////////////////////////\n\t\n\t_bindInputEvents(input){\n\t\tinput.addEventListener(\"focus\", this._inputFocus.bind(this));\n\t\tinput.addEventListener(\"click\", this._inputClick.bind(this));\n\t\tinput.addEventListener(\"blur\", this._inputBlur.bind(this));\n\t\tinput.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\tinput.addEventListener(\"search\", this._inputSearch.bind(this));\n\t\t\n\t\tif(this.params.autocomplete){\n\t\t\tinput.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\t\t}\n\t}\n\t\n\t\n\t_inputFocus(e){\n\t\tthis.rebuildOptionsList();\n\t}\n\t\n\t_filter(){\n\t\tif(this.params.filterRemote){\n\t\t\tclearTimeout(this.filterTimeout);\n\t\t\t\n\t\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\t\tthis.rebuildOptionsList();\n\t\t\t}, this.params.filterDelay);\n\t\t}else{\n\t\t\tthis._filterList();\n\t\t}\n\t}\n\t\n\t_inputClick(e){\n\t\te.stopPropagation();\n\t}\n\t\n\t_inputBlur(e){\n\t\tif(this.blurable){\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.hide();\n\t\t\t}else{\n\t\t\t\tthis._resolveValue(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_inputSearch(){\n\t\tthis._clearChoices();\n\t}\n\t\n\t_inputKeyDown(e){\n\t\tswitch(e.keyCode){\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\t\tthis._keyUp(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 40: //down arrow\n\t\t\t\tthis._keyDown(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //right arrow\n\t\t\t\tthis._keySide(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 13: //enter\n\t\t\t\tthis._keyEnter();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27: //escape\n\t\t\t\tthis._keyEsc();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 36: //home\n\t\t\tcase 35: //end\n\t\t\t\tthis._keyHomeEnd(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 9: //tab\n\t\t\t\tthis._keyTab(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keySelectLetter(e);\n\t\t}\n\t}\n\t\n\t_inputKeyUp(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 38: //up arrow\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //up arrow\n\t\t\tcase 40: //right arrow\n\t\t\tcase 13: //enter\n\t\t\tcase 27: //escape\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keyAutoCompLetter(e);\n\t\t}\n\t}\n\t\n\t_preventPopupBlur(){\n\t\tif(this.popup){\n\t\t\tthis.popup.blockHide();\n\t\t}\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.restoreHide();\n\t\t\t}\n\t\t}, 10);\n\t}\n\t\n\t_preventBlur(){\n\t\tthis.blurable = false;\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tthis.blurable = true;\n\t\t}, 10);\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Keyboard Navigation /////////\n\t//////////////////////////////////////\n\t\n\t_keyTab(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else{\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyUp(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index > 0){\n\t\t\t\tthis._focusItem(this.displayItems[index - 1]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyDown(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index < this.displayItems.length - 1){\n\t\t\t\tif(index == -1){\n\t\t\t\t\tthis._focusItem(this.displayItems[0]);\n\t\t\t\t}else{\n\t\t\t\t\tthis._focusItem(this.displayItems[index + 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keySide(e){\n\t\tif(!this.params.autocomplete){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\t\n\t_keyEnter(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else{\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyEsc(e){\n\t\tthis._cancel();\n\t}\n\t\n\t_keyHomeEnd(e){\n\t\tif(this.params.autocomplete){\n\t\t\t//prevent table navigation while using input element\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n\t\n\t_keySelectLetter(e){\n\t\tif(!this.params.autocomplete){\n\t\t\t// if(this.edit.currentCell === false){\n\t\t\te.preventDefault();\n\t\t\t// }\n\t\t\t\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\n\t\t\t\tthis._scrollToValue(e.keyCode);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyAutoCompLetter(e){\n\t\tthis._filter();\n\t\tthis.lastAction = \"typing\";\n\t\tthis.typing = true;\n\t}\n\t\n\t\n\t_scrollToValue(char){\n\t\tclearTimeout(this.filterTimeout);\n\t\t\n\t\tvar character = String.fromCharCode(char).toLowerCase();\n\t\tthis.filterTerm += character.toLowerCase();\n\t\t\n\t\tvar match = this.displayItems.find((item) => {\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n\t\t});\n\t\t\n\t\tif(match){\n\t\t\tthis._focusItem(match);\n\t\t}\n\t\t\n\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\tthis.filterTerm = \"\";\n\t\t}, 800);\n\t}\n\t\n\t_focusItem(item){\n\t\tthis.lastAction = \"focus\";\n\t\t\n\t\tif(this.focusedItem && this.focusedItem.element){\n\t\t\tthis.focusedItem.element.classList.remove(\"focused\");\n\t\t}\n\t\t\n\t\tthis.focusedItem = item;\n\t\t\n\t\tif(item && item.element){\n\t\t\titem.element.classList.add(\"focused\");\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\n\t\t}\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t/////// Data List Generation /////////\n\t//////////////////////////////////////\n\theaderFilterInitialListGen(){\n\t\tthis._generateOptions(true);\n\t}\n\t\n\trebuildOptionsList(){\n\t\tthis._generateOptions()\n\t\t\t.then(this._sortOptions.bind(this))\n\t\t\t.then(this._buildList.bind(this))\n\t\t\t.then(this._showList.bind(this))\n\t\t\t.catch((e) => {\n\t\t\t\tif(!Number.isInteger(e)){\n\t\t\t\t\tconsole.error(\"List generation error\", e);\n\t\t\t\t}\n\t\t\t});\n\t}\n\t\n\t_filterList(){\n\t\tthis._buildList(this._filterOptions());\n\t\tthis._showList();\n\t}\n\t\n\t_generateOptions(silent){\n\t\tvar values = [];\n\t\tvar iteration = ++ this.listIteration;\n\t\t\n\t\tthis.filtered = false;\n\t\t\n\t\tif(this.params.values){\n\t\t\tvalues = this.params.values;\n\t\t}else if (this.params.valuesURL){\n\t\t\tvalues = this._ajaxRequest(this.params.valuesURL, this.input.value);\n\t\t}else{\n\t\t\tif(typeof this.params.valuesLookup === \"function\"){\n\t\t\t\tvalues = this.params.valuesLookup(this.cell, this.input.value);\n\t\t\t}else if(this.params.valuesLookup){\n\t\t\t\tvalues = this._uniqueColumnValues(this.params.valuesLookupField);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(values instanceof Promise){\n\t\t\tif(!silent){\n\t\t\t\tthis._addPlaceholder(this.params.placeholderLoading);\n\t\t\t}\n\t\t\t\n\t\t\treturn values.then()\n\t\t\t\t.then((responseValues) => {\n\t\t\t\t\tif(this.listIteration === iteration){\n\t\t\t\t\t\treturn this._parseList(responseValues);\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn Promise.reject(iteration);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.resolve(this._parseList(values));\n\t\t}\n\t}\n\t\n\t_addPlaceholder(contents){\n\t\tvar placeholder = document.createElement(\"div\");\n\t\t\n\t\tif(typeof contents === \"function\"){\n\t\t\tcontents = contents(this.cell.getComponent(), this.listEl);\n\t\t}\n\t\t\n\t\tif(contents){\n\t\t\tthis._clearList();\n\t\t\t\n\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\tplaceholder = contents;\n\t\t\t}else{\n\t\t\t\tplaceholder.classList.add(\"tabulator-edit-list-placeholder\");\n\t\t\t\tplaceholder.innerHTML = contents;\n\t\t\t}\n\t\t\t\n\t\t\tthis.listEl.appendChild(placeholder);\n\t\t\t\n\t\t\tthis._showList();\n\t\t}\n\t}\n\t\n\t_ajaxRequest(url, term){\n\t\tvar params = this.params.filterRemote ? {term:term} : {};\n\t\turl = urlBuilder(url, {}, params);\n\t\t\n\t\treturn fetch(url)\n\t\t\t.then((response)=>{\n\t\t\t\tif(response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.catch((error)=>{\n\t\t\t\t\t\t\tconsole.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\treturn Promise.reject(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error)=>{\n\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \", error);\n\t\t\t\treturn Promise.reject(error);\n\t\t\t});\n\t}\n\t\n\t_uniqueColumnValues(field){\n\t\tvar output = {},\n\t\tdata = this.table.getData(this.params.valuesLookup),\n\t\tcolumn;\n\t\t\n\t\tif(field){\n\t\t\tcolumn = this.table.columnManager.getColumnByField(field);\n\t\t}else{\n\t\t\tcolumn = this.cell.getColumn()._getSelf();\n\t\t}\n\t\t\n\t\tif(column){\n\t\t\tdata.forEach((row) => {\n\t\t\t\tvar val = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\n\t\t\t\t\toutput[val] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\toutput = [];\n\t\t}\n\t\t\n\t\treturn Object.keys(output);\n\t}\n\t\n\t\n\t_parseList(inputValues){\n\t\tvar data = [];\n\t\t\n\t\tif(!Array.isArray(inputValues)){\n\t\t\tinputValues = Object.entries(inputValues).map(([key, value]) => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:key,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\t\n\t\tinputValues.forEach((value) => {\n\t\t\tif(typeof value !== \"object\"){\n\t\t\t\tvalue = {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:value,\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tthis._parseListItem(value, data, 0);\n\t\t});\n\t\t\n\t\tif(!this.currentItems.length && this.params.freetext){\n\t\t\tthis.input.value = this.initialValues;\n\t\t\tthis.typing = true;\n\t\t\tthis.lastAction = \"typing\";\n\t\t}\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\treturn data;    \n\t}\n\t\n\t_parseListItem(option, data, level){\n\t\tvar item = {};\n\t\t\n\t\tif(option.options){\n\t\t\titem = this._parseListGroup(option, level + 1);\n\t\t}else{\n\t\t\titem = {\n\t\t\t\tlabel:option.label,\n\t\t\t\tvalue:option.value,\n\t\t\t\titemParams:option.itemParams,\n\t\t\t\telementAttributes: option.elementAttributes,\n\t\t\t\telement:false,\n\t\t\t\tselected:false,\n\t\t\t\tvisible:true,\n\t\t\t\tlevel:level,\n\t\t\t\toriginal:option,\n\t\t\t};\n\t\t\t\n\t\t\tif(this.initialValues && this.initialValues.indexOf(option.value) > -1){\n\t\t\t\tthis._chooseItem(item, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata.push(item);\n\t}\n\t\n\t_parseListGroup(option, level){\n\t\tvar item = {\n\t\t\tlabel:option.label,\n\t\t\tgroup:true,\n\t\t\titemParams:option.itemParams,\n\t\t\telementAttributes:option.elementAttributes,\n\t\t\telement:false,\n\t\t\tvisible:true,\n\t\t\tlevel:level,\n\t\t\toptions:[],\n\t\t\toriginal:option,\n\t\t};\n\t\t\n\t\toption.options.forEach((child) => {\n\t\t\tthis._parseListItem(child, item.options, level);\n\t\t});\n\t\t\n\t\treturn item;\n\t}\n\t\n\t_sortOptions(options){\n\t\tvar sorter;\n\t\t\n\t\tif(this.params.sort){\n\t\t\tsorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n\t\t\t\n\t\t\tthis._sortGroup(sorter, options);\n\t\t}\n\t\t\n\t\treturn options;\n\t}\n\t\n\t_sortGroup(sorter, options){\n\t\toptions.sort((a,b) => {\n\t\t\treturn sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n\t\t});\n\t\t\n\t\toptions.forEach((option) => {\n\t\t\tif(option.group){\n\t\t\t\tthis._sortGroup(sorter, option.options);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_defaultSortFunction(as, bs){\n\t\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\t\tvar emptyAlign = 0;\n\t\t\n\t\tif(this.params.sort === \"desc\"){\n\t\t\t[as, bs] = [bs, as];\n\t\t}\n\t\t\n\t\t//handle empty values\n\t\tif(!as && as!== 0){\n\t\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t\t}else if(!bs && bs!== 0){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\ta = String(as).toLowerCase();\n\t\t\tb = String(bs).toLowerCase();\n\t\t\tif(a === b) return 0;\n\t\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\ta = a.match(rx);\n\t\t\tb = b.match(rx);\n\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\twhile(i < L){\n\t\t\t\ta1= a[i];\n\t\t\t\tb1= b[i++];\n\t\t\t\tif(a1 !== b1){\n\t\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t}\n\t\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn a.length > b.length;\n\t\t}\n\t\t\n\t\treturn emptyAlign;\n\t}\n\t\n\t_filterOptions(){\n\t\tvar filterFunc = this.params.filterFunc || this._defaultFilterFunc,\n\t\tterm = this.input.value;\n\t\t\n\t\tif(term){\n\t\t\tthis.filtered = true;\n\t\t\t\n\t\t\tthis.data.forEach((item) => {\n\t\t\t\tthis._filterItem(filterFunc, term, item);\n\t\t\t});\n\t\t}else{\n\t\t\tthis.filtered = false;\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\t_filterItem(func, term, item){\n\t\tvar matches = false;\n\t\t\n\t\tif(!item.group){\n\t\t\titem.visible = func(term, item.label, item.value, item.original);\n\t\t}else{\n\t\t\titem.options.forEach((option) => {\n\t\t\t\tif(this._filterItem(func, term, option)){\n\t\t\t\t\tmatches = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\titem.visible = matches;\n\t\t}\n\t\t\n\t\treturn item.visible;\n\t}\n\t\n\t_defaultFilterFunc(term, label, value, item){\n\t\tterm = String(term).toLowerCase();\n\t\t\n\t\tif(label !== null && typeof label !== \"undefined\"){\n\t\t\tif(String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\t//////////////////////////////////////\n\t/////////// Display List /////////////\n\t//////////////////////////////////////\n\t\n\t_clearList(){\n\t\twhile(this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n\t\t\n\t\tthis.displayItems = [];\n\t}\n\t\n\t_buildList(data){\n\t\tthis._clearList();\n\t\t\n\t\tdata.forEach((option) => {\n\t\t\tthis._buildItem(option);\n\t\t});\n\t\t\n\t\tif(!this.displayItems.length){\n\t\t\tthis._addPlaceholder(this.params.placeholderEmpty);\n\t\t}  \n\t}\n\t\n\t_buildItem(item){\n\t\tvar el = item.element,\n\t\tcontents;\n\t\t\n\t\tif(!this.filtered || item.visible){\n\t\t\t\n\t\t\tif(!el){\n\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\n\t\t\t\tcontents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n\t\t\t\t\n\t\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = contents;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-group\");\n\t\t\t\t}else{\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-item\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n\t\t\t\t\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\n\t\t\t\t\tfor (let key in item.elementAttributes){\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\t\tel.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.addEventListener(\"click\", this._groupClick.bind(this, item));\n\t\t\t\t}else{\n\t\t\t\t\tel.addEventListener(\"click\", this._itemClick.bind(this, item));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\t\t\t\n\t\t\t\titem.element = el;\n\t\t\t}\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tthis.listEl.appendChild(el);\n\t\t\t\n\t\t\tif(item.group){\n\t\t\t\titem.options.forEach((option) => {\n\t\t\t\t\tthis._buildItem(option);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.displayItems.push(item);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_showList(){\n\t\tvar startVis = this.popup && this.popup.isVisible();\n\t\t\n\t\tif(this.input.parentNode){\n\t\t\tif(this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty){\n\t\t\t\tif(this.popup){\n\t\t\t\t\tthis.popup.hide(true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._setListWidth();\n\t\t\t\n\t\t\tif(!this.popup){\n\t\t\t\tthis.popup = this.edit.popup(this.listEl);\n\t\t\t}\n\t\t\t\n\t\t\tthis.popup.show(this.cell.getElement(), \"bottom\");\n\t\t\t\n\t\t\tif(!startVis){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.hideOnBlur(this._resolveValue.bind(this, true));\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_styleItem(item){\n\t\tif(item && item.element){\n\t\t\tif(item.selected){\n\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t}else{\n\t\t\t\titem.element.classList.remove(\"active\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// User Interaction ///////////\n\t//////////////////////////////////////\n\t\n\t_itemClick(item, e){\n\t\te.stopPropagation();\n\t\t\n\t\tthis._chooseItem(item);\n\t}\n\t\n\t_groupClick(item, e){\n\t\te.stopPropagation();\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t////// Current Item Management ///////\n\t//////////////////////////////////////\n\t\n\t_cancel(){\n\t\tthis.popup.hide(true);\n\t\tthis.actions.cancel();\n\t}\n\t\n\t_clearChoices(){\n\t\tthis.typing = true;\n\t\t\n\t\tthis.currentItems.forEach((item) => {\n\t\t\titem.selected = false;\n\t\t\tthis._styleItem(item);\n\t\t});\n\t\t\n\t\tthis.currentItems = [];\n\t\t\n\t\tthis.focusedItem = null;\n\t}\n\t\n\t_chooseItem(item, silent){\n\t\tvar index;\n\t\t\n\t\tthis.typing = false;\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\tindex = this.currentItems.indexOf(item);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.currentItems.splice(index, 1);\n\t\t\t\titem.selected = false;\n\t\t\t}else{\n\t\t\t\tthis.currentItems.push(item);\n\t\t\t\titem.selected = true;\n\t\t\t}\n\t\t\t\n\t\t\tthis.input.value = this.currentItems.map(item => item.label).join(\",\");\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t}else{\n\t\t\tthis.currentItems = [item];\n\t\t\titem.selected = true;\n\t\t\t\n\t\t\tthis.input.value = item.label;\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis._resolveValue();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis._focusItem(item);\n\t}\n\t\n\t_resolveValue(blur){\n\t\tvar output, initialValue;\n\t\t\n\t\tif(this.popup){\n\t\t\tthis.popup.hide(true);\n\t\t}\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\toutput = this.currentItems.map(item => item.value);\n\t\t}else{\n\t\t\tif(blur && this.params.autocomplete && this.typing){\n\t\t\t\tif(this.params.freetext || (this.params.allowEmpty && this.input.value === \"\")){\n\t\t\t\t\toutput = this.input.value;\n\t\t\t\t}else{\n\t\t\t\t\tthis.actions.cancel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.currentItems[0]){\n\t\t\t\t\toutput = this.currentItems[0].value;\n\t\t\t\t}else{\n\t\t\t\t\tinitialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues;\n\t\t\t\t\t\n\t\t\t\t\tif(initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\"){\n\t\t\t\t\t\toutput = initialValue;\n\t\t\t\t\t}else{\n\t\t\t\t\t\toutput = this.params.emptyValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(output === \"\"){\n\t\t\toutput = this.params.emptyValue;\n\t\t}\n\t\t\n\t\tthis.actions.success(output);\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.initialValues = output && !Array.isArray(output) ? [output] : output;\n\t\t\tthis.currentItems = [];\n\t\t}\n\t}\n\t\n}\n","import input from './editors/input.js';\nimport textarea from './editors/textarea.js';\nimport number from './editors/number.js';\nimport range from './editors/range.js';\nimport date from './editors/date.js';\nimport time from './editors/time.js';\nimport datetime from './editors/datetime.js';\nimport select from './editors/select.js';\nimport list from './editors/list.js';\nimport autocomplete from './editors/autocomplete.js';\nimport star from './editors/star.js';\nimport progress from './editors/progress.js';\nimport tickCross from './editors/tickCross.js';\n\nexport default {\n\tinput:input,\n\ttextarea:textarea,\n\tnumber:number,\n\trange:range,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tselect:select,\n\tlist:list,\n\tautocomplete:autocomplete,\n\tstar:star,\n\tprogress:progress,\n\ttickCross:tickCross,\n};","import maskInput from '../../inputMask.js';\n\n//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange(e);\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","import maskInput from '../../inputMask.js';\n\n//resizable text area element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"hybrid\",\n\tvalue = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\n\tinput = document.createElement(\"textarea\"),\n\tscrollHeight = 0;\n\n\t//create and style input\n\tinput.style.display = \"block\";\n\tinput.style.padding = \"2px\";\n\tinput.style.height = \"100%\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\tinput.style.whiteSpace = \"pre-wrap\";\n\tinput.style.resize = \"none\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = value;\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tinput.scrollHeight;\n\t\t\tinput.style.height = input.scrollHeight + \"px\";\n\t\t\tcell.getRow().normalizeHeight();\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t},300);\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\tinput.addEventListener(\"keyup\", function(){\n\n\t\tinput.style.height = \"\";\n\n\t\tvar heightNow = input.scrollHeight;\n\n\t\tinput.style.height = heightNow + \"px\";\n\n\t\tif(heightNow != scrollHeight){\n\t\t\tscrollHeight = heightNow;\n\t\t\tcell.getRow().normalizeHeight();\n\t\t}\n\t});\n\n\tinput.addEventListener(\"keydown\", function(e){\n\n\t\tswitch(e.keyCode){\n\n\t\t\tcase 13:\n\t\t\t\tif(e.shiftKey && editorParams.shiftEnterSubmit){\n\t\t\t\t\tonChange(e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","import maskInput from '../../inputMask.js';\n\n//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", \"number\");\n\n\tif(typeof editorParams.max != \"undefined\"){\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\n\tif(typeof editorParams.min != \"undefined\"){\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\n\tif(typeof editorParams.step != \"undefined\"){\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = cellValue;\n\n\tvar blurFunc = function(e){\n\t\tonChange();\n\t};\n\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\t//submit new value on blur\n\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(){\n\t\tvar value = input.value;\n\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif(value !== cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.setAttribute(\"type\", \"range\");\n\t\n\tif (typeof editorParams.max != \"undefined\") {\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\t\n\tif (typeof editorParams.min != \"undefined\") {\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\t\n\tif (typeof editorParams.step != \"undefined\") {\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\t\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value;\n\t\t\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\t\t\n\t\tif(value != cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e){\n\t\tonChange();\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tfunction convertDate(value){\n\t\tvar newDatetime;\n\t\t\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\t\t\n\t\treturn newDatetime.toFormat(\"yyyy-MM-dd\");\n\t}\n\t\n\tinput.type = \"date\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.max){\n\t\tinput.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\n\t}\n\n\tif(editorParams.min){\n\t\tinput.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\n\t}\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\t\t\n\t\t\tcellValue = convertDate(cellValue);\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDate;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDate = DT.fromFormat(String(value), \"yyyy-MM-dd\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDate;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDate.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDate.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"time\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"hh:mm\");\n\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() == \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxTime = DT.fromFormat(String(value), \"hh:mm\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"datetime-local\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"yyyy-MM-dd\")  + \"T\" + newDatetime.toFormat(\"hh:mm\");\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDateTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDateTime = DT.fromISO(String(value));\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDateTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDateTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDateTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\n\tthis.deprecationMsg(\"The select editor has been deprecated, please use the new list editor\");\n\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\n\tthis.deprecationMsg(\"The autocomplete editor has been deprecated, please use the new list editor with the 'autocomplete' editorParam\");\n\n\teditorParams.autocomplete = true;\n\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}","//star rating\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar self = this,\n\telement = cell.getElement(),\n\tvalue = cell.getValue(),\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\tstars = [],\n\tstarsHolder = document.createElement(\"div\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\n\t//change star type\n\tfunction starChange(val){\n\t\tstars.forEach(function(star, i){\n\t\t\tif(i < val){\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}else{\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}\n\t\t});\n\t}\n\n\t//build stars\n\tfunction buildStar(i){\n\n\t\tvar starHolder =  document.createElement(\"span\");\n\t\tvar nextStar = star.cloneNode(true);\n\n\t\tstars.push(nextStar);\n\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tstarChange(i);\n\t\t});\n\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\n\t\tstarHolder.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tsuccess(i);\n\t\t\telement.blur();\n\t\t});\n\n\t\tstarHolder.appendChild(nextStar);\n\t\tstarsHolder.appendChild(starHolder);\n\n\t}\n\n\t//handle keyboard navigation value change\n\tfunction changeValue(val){\n\t\tvalue = val;\n\t\tstarChange(val);\n\t}\n\n\t//style cell\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\t//style holding element\n\tstarsHolder.style.verticalAlign = \"middle\";\n\tstarsHolder.style.display = \"inline-block\";\n\tstarsHolder.style.padding = \"4px\";\n\n\t//style star\n\tstar.setAttribute(\"width\", size);\n\tstar.setAttribute(\"height\", size);\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//create correct number of stars\n\tfor(var i=1;i<= maxStars;i++){\n\t\tbuildStar(i);\n\t}\n\n\t//ensure value does not exceed number of stars\n\tvalue = Math.min(parseInt(value), maxStars);\n\n\t// set initial styling of stars\n\tstarChange(value);\n\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\n\t\tstarChange(0);\n\t});\n\n\tstarsHolder.addEventListener(\"click\", function(e){\n\t\tsuccess(0);\n\t});\n\n\telement.addEventListener(\"blur\", function(e){\n\t\tcancel();\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\tchangeValue(value + 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\tchangeValue(value - 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 13: //enter\n\t\t\t\tsuccess(value);\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\treturn starsHolder;\n}","//draggable progress bar\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar element = cell.getElement(),\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\n\tpercent = (max - min) / 100,\n\tvalue = cell.getValue() || 0,\n\thandle = document.createElement(\"div\"),\n\tbar = document.createElement(\"div\"),\n\tmouseDrag, mouseDragWidth;\n\n\t//set new value\n\tfunction updateValue(){\n\t\tvar style = window.getComputedStyle(element, null);\n\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\n\t\tsuccess(calcVal);\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\telement.setAttribute(\"aria-label\", value);\n\t}\n\n\t//style handle\n\thandle.style.position = \"absolute\";\n\thandle.style.right = \"0\";\n\thandle.style.top = \"0\";\n\thandle.style.bottom = \"0\";\n\thandle.style.width = \"5px\";\n\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t//style bar\n\tbar.style.display = \"inline-block\";\n\tbar.style.position = \"relative\";\n\t// bar.style.top = \"8px\";\n\t// bar.style.bottom = \"8px\";\n\t// bar.style.left = \"4px\";\n\t// bar.style.marginRight = \"4px\";\n\tbar.style.height = \"100%\";\n\tbar.style.backgroundColor = \"#488CE9\";\n\tbar.style.maxWidth = \"100%\";\n\tbar.style.minWidth = \"0%\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//style cell\n\telement.style.padding = \"4px 4px\";\n\n\t//make sure value is in range\n\tvalue = Math.min(parseFloat(value), max);\n\tvalue = Math.max(parseFloat(value), min);\n\n\t//workout percentage\n\tvalue = Math.round((value - min) / percent);\n\t// bar.style.right = value + \"%\";\n\tbar.style.width = value + \"%\";\n\n\telement.setAttribute(\"aria-valuemin\", min);\n\telement.setAttribute(\"aria-valuemax\", max);\n\n\tbar.appendChild(handle);\n\n\thandle.addEventListener(\"mousedown\", function(e){\n\t\tmouseDrag = e.screenX;\n\t\tmouseDragWidth = bar.offsetWidth;\n\t});\n\n\thandle.addEventListener(\"mouseover\", function(){\n\t\thandle.style.cursor = \"ew-resize\";\n\t});\n\n\telement.addEventListener(\"mousemove\", function(e){\n\t\tif(mouseDrag){\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\n\t\t}\n\t});\n\n\telement.addEventListener(\"mouseup\", function(e){\n\t\tif(mouseDrag){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tmouseDrag = false;\n\t\t\tmouseDragWidth = false;\n\n\t\t\tupdateValue();\n\t\t}\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 9: //tab\n\t\t\tcase 13: //enter\n\t\t\t\tupdateValue();\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t}\n\t});\n\n\telement.addEventListener(\"blur\", function(){\n\t\tcancel();\n\t});\n\n\treturn bar;\n}","//checkbox\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar value = cell.getValue(),\n\tinput = document.createElement(\"input\"),\n\ttristate = editorParams.tristate,\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\tindetermState = false,\n\ttrueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n\tfalseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n\t\n\tinput.setAttribute(\"type\", \"checkbox\");\n\tinput.style.marginTop = \"5px\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = value;\n\t\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\n\t\tindetermState = true;\n\t\tinput.indeterminate = true;\n\t}\n\t\n\tif(this.table.browser != \"firefox\" && this.table.browser != \"safari\"){ //prevent blur issue on mac firefox\n\t\tonRendered(function(){\n\t\t\tif(cell.getType() === \"cell\"){\n\t\t\t\tinput.focus({preventScroll: true});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tinput.checked = trueValueSet ? value === editorParams.trueValue : (value === true || value === \"true\" || value === \"True\" || value === 1);\n\t\n\tfunction setValue(blur){\n\t\tvar checkedValue = input.checked;\n\t\t\n\t\tif(trueValueSet && checkedValue){\n\t\t\tcheckedValue = editorParams.trueValue;\n\t\t}else if(falseValueSet && !checkedValue){\n\t\t\tcheckedValue = editorParams.falseValue;\n\t\t}\n\t\t\n\t\tif(tristate){\n\t\t\tif(!blur){\n\t\t\t\tif(input.checked && !indetermState){\n\t\t\t\t\tinput.checked = false;\n\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\tindetermState = true;\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\tindetermState = false;\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(indetermState){\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn checkedValue;\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"change\", function(e){\n\t\tsuccess(setValue());\n\t});\n\n\tinput.addEventListener(\"blur\", function(e){\n\t\tsuccess(setValue(true));\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tif(e.keyCode == 13){\n\t\t\tsuccess(setValue());\n\t\t}\n\t\tif(e.keyCode == 27){\n\t\t\tcancel();\n\t\t}\n\t});\n\t\n\treturn input;\n}","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultEditors from './defaults/editors.js';\n\nclass Edit extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t\tthis.editedCells = [];\n\t\t\n\t\tthis.editors = Edit.editors;\n\t\t\n\t\tthis.registerColumnOption(\"editable\");\n\t\tthis.registerColumnOption(\"editor\");\n\t\tthis.registerColumnOption(\"editorParams\");\n\t\t\n\t\tthis.registerColumnOption(\"cellEditing\");\n\t\tthis.registerColumnOption(\"cellEdited\");\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\n\t\t\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-layout\", this.rowEditableCheck.bind(this));\n\t\tthis.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n\t\tthis.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Keybinding Functions ///////\n\t///////////////////////////////////\n\t\n\tkeybindingNavigateNext(e){\n\t\tvar cell = this.currentCell,\n\t\tnewRow = this.options(\"tabEndNewRow\");\n\t\t\n\t\tif(cell){\n\t\t\tif(!this.navigateNext(cell, e)){\n\t\t\t\tif(newRow){\n\t\t\t\t\tcell.getElement().firstChild.blur();\n\t\t\t\t\t\n\t\t\t\t\tif(newRow === true){\n\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(typeof newRow == \"function\"){\n\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tnewRow.then(() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tcell.getComponent().navigateNext();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Cell Functions //////////\n\t///////////////////////////////////\n\t\n\tcellIsEdited(cell){\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\n\t}\n\t\n\tcellCancelEdit(cell){\n\t\tif(cell === this.currentCell){\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t}else{\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tupdateCellClass(cell){\n\t\tif(this.allowEdit(cell)) {\n\t\t\tcell.getElement().classList.add(\"tabulator-editable\");\n\t\t}\n\t\telse {\n\t\t\tcell.getElement().classList.remove(\"tabulator-editable\");\n\t\t}\n\t}\n\t\n\tclearCellEdited(cells){\n\t\tif(!cells){\n\t\t\tcells = this.table.modules.edit.getEditedCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.table.modules.edit.clearEdited(cell._getSelf());\n\t\t});\n\t}\n\t\n\tnavigatePrev(cell = this.currentCell, e){\n\t\tvar nextCell, prevRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateLeft();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(prevRow){\n\t\t\t\t\tnextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateNext(cell = this.currentCell, e){\n\t\tvar nextCell, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateRight();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(nextRow){\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateLeft(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateRight(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateUp(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateDown(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tfindNextEditableCell(row, index){\n\t\tvar nextCell = false;\n\t\t\n\t\tif(index < row.cells.length-1){\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tnextCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn nextCell;\n\t}\n\t\n\tfindPrevEditableCell(row, index){\n\t\tvar prevCell = false;\n\t\t\n\t\tif(index > 0){\n\t\t\tfor(var i = index-1; i >= 0; i--){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tprevCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn prevCell;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.editor !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\tcolumnDeleteCheck(column){\n\t\tif(this.currentCell && this.currentCell.column === column){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowDeleteCheck(row){\n\t\tif(this.currentCell && this.currentCell.row === row){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\n\trowEditableCheck(row){\n\t\trow.getCells().forEach((cell) => {\n\t\t\tif(cell.column.modules.edit && typeof cell.column.modules.edit.check === \"function\"){\n\t\t\t\tthis.updateCellClass(cell);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//initialize column editor\n\tinitializeColumn(column){\n\t\tvar config = {\n\t\t\teditor:false,\n\t\t\tblocked:false,\n\t\t\tcheck:column.definition.editable,\n\t\t\tparams:column.definition.editorParams || {}\n\t\t};\n\t\t\n\t\t//set column editor\n\t\tswitch(typeof column.definition.editor){\n\t\t\tcase \"string\":\n\t\t\t\tif(this.editors[column.definition.editor]){\n\t\t\t\t\tconfig.editor = this.editors[column.definition.editor];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.editor = column.definition.editor;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tif(column.definition.editor === true){\n\t\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\n\t\t\t\t\t\tif(this.editors[column.definition.formatter]){\n\t\t\t\t\t\t\tconfig.editor = this.editors[column.definition.formatter];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tconfig.editor = this.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\tif(config.editor){\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t}\n\t\n\tgetCurrentCell(){\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t}\n\t\n\tclearEditor(cancel){\n\t\tvar cell = this.currentCell,\n\t\tcellEl;\n\t\t\n\t\tthis.invalidEdit = false;\n\t\t\n\t\tif(cell){\n\t\t\tthis.currentCell = false;\n\t\t\t\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tthis.dispatch(\"edit-editor-clear\", cell, cancel);\n\t\t\t\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n\t\t\t\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\tcell.table.element.classList.remove(\"tabulator-editing\");\n\t\t}\n\t}\n\t\n\tcancelEdit(){\n\t\tif(this.currentCell){\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\t\t\t\n\t\t\tthis.clearEditor(true);\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\t\t\t\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\n\t\t\t\tcell.row.normalizeHeight(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(cell.column.definition.cellEditCancelled){\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\n\t\t}\n\t}\n\t\n\t//return a formatted value for a cell\n\tbindEditor(cell){\n\t\tif(cell.column.modules.edit){\n\t\t\tvar self = this,\n\t\t\telement = cell.getElement(true);\n\t\t\t\n\t\t\tthis.updateCellClass(cell);\n\t\t\telement.setAttribute(\"tabindex\", 0);\n\t\t\t\n\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif (e.button === 2) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}else{\n\t\t\t\t\tself.mouseClick = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\telement.addEventListener(\"focus\", function(e){\n\t\t\t\tif(!self.recursionBlock){\n\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tfocusCellNoEvent(cell, block){\n\t\tthis.recursionBlock = true;\n\t\t\n\t\tif(!(block && this.table.browser === \"ie\")){\n\t\t\tcell.getElement().focus({preventScroll: true});\n\t\t}\n\t\t\n\t\tthis.recursionBlock = false;\n\t}\n\t\n\teditCell(cell, forceEdit){\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t}\n\t\n\tfocusScrollAdjust(cell){\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\trowEl = cell.row.getElement();\n\t\t\t\n\t\t\tif(rowEl.offsetTop < topEdge){\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\n\t\t\t}else{\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin || 0);\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin || 0);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t}\n\t\t\t\n\t\t\tif(cellEl.offsetLeft < leftEdge){\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\n\t\t\t}else{\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tallowEdit(cell) {\n\t\tvar check = cell.column.modules.edit ? true : false;\n\n\t\tif(cell.column.modules.edit){\n\t\t\tswitch(typeof cell.column.modules.edit.check){\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif(cell.row.initialized){\n\t\t\t\t\t\tcheck = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcheck = !!cell.row.data[cell.column.modules.edit.check];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tcheck = cell.column.modules.edit.check;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn check;\n\t}\n\t\n\tedit(cell, e, forceEdit){\n\t\tvar self = this,\n\t\tallowEdit = true,\n\t\trendered = function(){},\n\t\telement = cell.getElement(),\n\t\tcellEditor, component, params;\n\t\t\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\n\t\tif(this.currentCell){\n\t\t\tif(!this.invalidEdit && this.currentCell !== cell){\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//handle successful value change\n\t\tfunction success(value){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tvar valid = self.chain(\"edit-success\", [cell, value], true, true);\n\t\t\t\t\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\n\t\t\t\t\tself.clearEditor();\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif(!cell.modules.edit){\n\t\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.modules.edit.edited = true;\n\t\t\t\t\t\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\n\t\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.setValue(value, true);\n\t\t\t\t\t\n\t\t\t\t\treturn valid === true;\n\t\t\t\t}else{\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//handle aborted edit\n\t\tfunction cancel(){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tself.cancelEdit();\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\trendered = callback;\n\t\t}\n\t\t\n\t\tif(!cell.column.modules.edit.blocked){\n\t\t\tif(e){\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\t\n\t\t\tallowEdit = this.allowEdit(cell);\n\t\t\t\n\t\t\tif(allowEdit || forceEdit){\n\t\t\t\t\n\t\t\t\tself.cancelEdit();\n\t\t\t\t\n\t\t\t\tself.currentCell = cell;\n\t\t\t\t\n\t\t\t\tthis.focusScrollAdjust(cell);\n\t\t\t\t\n\t\t\t\tcomponent = cell.getComponent();\n\t\t\t\t\n\t\t\t\tif(this.mouseClick){\n\t\t\t\t\tthis.mouseClick = false;\n\t\t\t\t\t\n\t\t\t\t\tif(cell.column.definition.cellClick){\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cell.column.definition.cellEditing){\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"cell-editing\", cell);\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\n\t\t\t\t\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\t\t\t\t\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\t\t\t\t\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif(this.currentCell && cellEditor !== false){\n\t\t\t\t\tif(cellEditor instanceof Node){\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.table.element.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\t\t\t\telement.appendChild(cellEditor);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\telement.blur();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\telement.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\telement.blur();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.mouseClick = false;\n\t\t\telement.blur();\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetEditedCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.editedCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearEdited(cell){\n\t\tvar editIndex;\n\t\t\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\n\t\t\tcell.modules.edit.edited = false;\n\t\t\t\n\t\t\tthis.dispatch(\"edit-edited-clear\", cell);\n\t\t}\n\t\t\n\t\teditIndex = this.editedCells.indexOf(cell);\n\t\t\n\t\tif(editIndex > -1){\n\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t}\n\t}\n}\n\nEdit.moduleName = \"edit\";\n\n//load defaults\nEdit.editors = defaultEditors;\n\n\nexport default Edit;\n","class ExportRow{\n\tconstructor(type, columns, component, indent){\n\t\tthis.type = type;\n\t\tthis.columns = columns;\n\t\tthis.component = component || false;\n\t\tthis.indent = indent || 0;\n\t}\n}\n\nexport default ExportRow;","class ExportColumn{\n\tconstructor(value, component, width, height, depth){\n\t\tthis.value = value;\n\t\tthis.component = component || false;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = depth;\n\t}\n}\n\nexport default ExportColumn;","import Module from '../../core/Module.js';\n\nimport ExportRow from './ExportRow.js';\nimport ExportColumn from './ExportColumn.js';\n\nclass Export extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\t\t\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html output config\n\t\t\n\t\tthis.registerColumnOption(\"htmlOutput\");\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tgenerateExportList(config, style, range, colVisProp){\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\t\t\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\n\t\t\n\t\treturn headers.concat(body);\n\t}\n\t\n\tgenerateTable(config, style, range, colVisProp){\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\n\t\t\n\t\treturn this.generateTableElement(list);\n\t}\n\t\n\trowLookup(range){\n\t\tvar rows = [];\n\t\t\n\t\tif(typeof range == \"function\"){\n\t\t\trange.call(this.table).forEach((row) =>{\n\t\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tswitch(range){\n\t\t\t\tcase true:\n\t\t\t\tcase \"visible\":\n\t\t\t\t\trows = this.table.rowManager.getVisibleRows(false, true);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"all\":\n\t\t\t\t\trows = this.table.rowManager.rows;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"selected\":\n\t\t\t\t\trows = this.table.modules.selectRow.selectedRows;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"active\":\n\t\t\t\tdefault:\n\t\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\n\t\t\t\t\t}else{\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Object.assign([], rows);\n\t}\n\t\n\tgenerateColumnGroupHeaders(){\n\t\tvar output = [];\n\t\t\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\tvar colData = this.processColumnGroup(column);\n\t\t\t\n\t\t\tif(colData){\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tprocessColumnGroup(column){\n\t\tvar subGroups = column.columns,\n\t\tmaxDepth = 0,\n\t\ttitle = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n\t\t\n\t\tvar groupData = {\n\t\t\ttitle:title,\n\t\t\tcolumn:column,\n\t\t\tdepth:1,\n\t\t};\n\t\t\n\t\tif(subGroups.length){\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\t\t\t\n\t\t\tsubGroups.forEach((subGroup) => {\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\n\t\t\t\t\n\t\t\t\tif(subGroupData){\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\t\t\t\t\t\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tgroupData.depth += maxDepth;\n\t\t\t\n\t\t\tif(!groupData.width){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.columnVisCheck(column)){\n\t\t\t\tgroupData.width = 1;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn groupData;\n\t}\n\t\n\tcolumnVisCheck(column){\n\t\tvar visProp = column.definition[this.colVisProp];\n\t\t\n\t\tif(typeof visProp === \"function\"){\n\t\t\tvisProp = visProp.call(this.table, column.getComponent());\n\t\t}\n\t\t\n\t\treturn visProp !== false && (column.visible || (!column.visible && visProp));\n\t}\n\t\n\theadersToExportRows(columns){\n\t\tvar headers = [],\n\t\theaderDepth = 0,\n\t\texportRows = [];\n\t\t\n\t\tfunction parseColumnGroup(column, level){\n\t\t\t\n\t\t\tvar depth = headerDepth - level;\n\t\t\t\n\t\t\tif(typeof headers[level] === \"undefined\"){\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\n\t\t\t\n\t\t\theaders[level].push(column);\n\t\t\t\n\t\t\tif(column.height > 1){\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\n\t\t\t\t\t\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\n\t\t\t\t\t\theaders[level + i] = [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\theaders[level + i].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.width > 1){\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\n\t\t\t\t\theaders[level].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.subGroups){\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\t//calculate maximum header depth\n\t\tcolumns.forEach(function(column){\n\t\t\tif(column.depth > headerDepth){\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\t\t\n\t\tcolumns.forEach(function(column){\n\t\t\tparseColumnGroup(column,0);\n\t\t});\n\t\t\n\t\theaders.forEach((header) => {\n\t\t\tvar columns = [];\n\t\t\t\n\t\t\theader.forEach((col) => {\n\t\t\t\tif(col){\n\t\t\t\t\tlet title = typeof col.title === \"undefined\" ? \"\" : col.title;\n\t\t\t\t\tcolumns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t\t}else{\n\t\t\t\t\tcolumns.push(null);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tbodyToExportRows(rows){\n\t\t\n\t\tvar columns = [];\n\t\tvar exportRows = [];\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\tcolumns.push(column.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\t\t\n\t\trows = rows.filter((row) => {\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn this.config.rowGroups !== false;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\treturn this.config.columnCalcs !== false;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t});\n\t\t\n\t\trows.forEach((row, i) => {\n\t\t\tvar rowData = row.getData(this.colVisProp);\n\t\t\tvar exportCols = [];\n\t\t\tvar indent = 0;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\tindent = row.level;\n\t\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\" :\n\t\t\t\tcase \"row\" :\n\t\t\t\t\tcolumns.forEach((col) => {\n\t\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tgenerateTableElement(list){\n\t\tvar table = document.createElement(\"table\"),\n\t\theaderEl = document.createElement(\"thead\"),\n\t\tbodyEl = document.createElement(\"tbody\"),\n\t\tstyles = this.lookupTableStyles(),\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n\t\tsetup = {};\n\t\t\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\t\t\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\t\t\n\t\t//assign group header formatter\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\t\t\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\n\t\t\tsetup.groupHeader = [setup.groupHeader];\n\t\t}\n\t\t\n\t\ttable.classList.add(\"tabulator-print-table\");\n\t\t\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\n\t\t\n\t\tif(list.length > 1000){\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\t\t\n\t\tlist.forEach((row, i) => {\n\t\t\tlet rowEl;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"header\":\n\t\t\t\t\theaderEl.appendChild(this.generateHeaderElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"group\":\n\t\t\t\t\tbodyEl.appendChild(this.generateGroupElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tbodyEl.appendChild(this.generateCalcElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\trowEl = this.generateRowElement(row, setup, styles);\n\t\t\t\t\n\t\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(headerEl.innerHTML){\n\t\t\ttable.appendChild(headerEl);\n\t\t}\n\t\t\n\t\ttable.appendChild(bodyEl);\n\t\t\n\t\t\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\t\treturn table;\n\t}\n\t\n\tlookupTableStyles(){\n\t\tvar styles = {};\n\t\t\n\t\t//lookup row styles\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\t\t\t\n\t\t\tif(styles.firstRow){\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn styles;\n\t}\n\t\n\tgenerateHeaderElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trow.columns.forEach((column) => {\n\t\t\tif(column){\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\t\t\t\t\n\t\t\t\tcellEl.innerHTML = column.value;\n\t\t\t\t\n\t\t\t\tif(this.cloneTableStyle){\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\t\t\n\t\t\t\tif(column.component._column.visible){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t\t}else{\n\t\t\t\t\tif(column.component._column.definition.width){\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.parent){\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateGroupElement(row, setup, styles){\n\t\t\n\t\tvar rowEl = document.createElement(\"tr\"),\n\t\tcellEl = document.createElement(\"td\"),\n\t\tgroup = row.columns[0];\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t}else{\n\t\t\tif(setup.groupHeader !== false){\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\t\t\n\t\tcellEl.colSpan = group.width;\n\t\tcellEl.innerHTML = group.value;\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\t\t\n\t\tif(group.component.isVisible()){\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\trowEl.appendChild(cellEl);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateCalcElement(row, setup, styles){\n\t\tvar rowEl = this.generateRowElement(row, setup, styles);\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateRowElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\trow.columns.forEach((col, i) => {\n\t\t\tif(col){\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t\tcolumn = col.component._column,\n\t\t\t\tindex = this.table.columnManager.findColumnIndex(column),\n\t\t\t\tvalue = col.value,\n\t\t\t\tcellStyle;\n\t\t\t\t\n\t\t\t\tvar cellWrapper = {\n\t\t\t\t\tmodules:{},\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\treturn row.component.getData();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn row.component;\n\t\t\t\t\t},\n\t\t\t\t\tgetComponent:function(){\n\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t},\n\t\t\t\t\tcolumn:column,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n\t\t\t\t}else{\n\t\t\t\t\tswitch(typeof value){\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = value !== null ? JSON.stringify(value) : \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(value instanceof Node){\n\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t}else{\n\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\n\t\t\t\t\n\t\t\t\tif(cellStyle){\n\t\t\t\t\tthis.mapElementStyles(cellStyle, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"]);\n\t\t\t\t\t\n\t\t\t\t\tif(column.definition.align){\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t\t\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(setup.rowFormatter && row.type === \"row\" && this.config.formatCells !== false){\n\t\t\tlet formatComponent = Object.assign(row.component);\n\n\t\t\tformatComponent.getElement = function(){return rowEl;};\n\n\t\t\tsetup.rowFormatter(row.component);\n\t\t}\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateHTMLTable(list){\n\t\tvar holder = document.createElement(\"div\");\n\t\t\n\t\tholder.appendChild(this.generateTableElement(list));\n\t\t\n\t\treturn holder.innerHTML;\n\t}\n\t\n\tgetHtml(visible, style, config, colVisProp){\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\t\t\n\t\treturn this.generateHTMLTable(list);\n\t}\n\t\n\tmapElementStyles(from, to, props){\n\t\tif(this.cloneTableStyle && from && to){\n\t\t\t\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\" : \"backgroundColor\",\n\t\t\t\t\"color\" : \"fontColor\",\n\t\t\t\t\"width\" : \"width\",\n\t\t\t\t\"font-weight\" : \"fontWeight\",\n\t\t\t\t\"font-family\" : \"fontFamily\",\n\t\t\t\t\"font-size\" : \"fontSize\",\n\t\t\t\t\"text-align\" : \"textAlign\",\n\t\t\t\t\"border-top\" : \"borderTop\",\n\t\t\t\t\"border-left\" : \"borderLeft\",\n\t\t\t\t\"border-right\" : \"borderRight\",\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\n\t\t\t\t\"padding-top\" : \"paddingTop\",\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\n\t\t\t\t\"padding-right\" : \"paddingRight\",\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\n\t\t\t};\n\t\t\t\n\t\t\tif(window.getComputedStyle){\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\t\t\t\t\n\t\t\t\tprops.forEach(function(prop){\n\t\t\t\t\tif(!to.style[lookup[prop]]){\n\t\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nExport.moduleName = \"export\";\n\nexport default Export;\n","export default {\n\n\t//equal to\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal == filterVal ? true : false;\n\t},\n\n\t//less than\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal < filterVal ? true : false;\n\t},\n\n\t//less than or equal to\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal <= filterVal ? true : false;\n\t},\n\n\t//greater than\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal > filterVal ? true : false;\n\t},\n\n\t//greater than or equal to\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal >= filterVal ? true : false;\n\t},\n\n\t//not equal to\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal != filterVal ? true : false;\n\t},\n\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\n\n\t\tif(typeof filterVal == \"string\"){\n\t\t\tfilterVal = new RegExp(filterVal);\n\t\t}\n\n\t\treturn filterVal.test(rowVal);\n\t},\n\n\t//contains the string\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//contains the keywords\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\tmatches = [];\n\n\t\tkeywords.forEach((keyword) =>{\n\t\t\tif(value.includes(keyword)){\n\t\t\t\tmatches.push(true);\n\t\t\t}\n\t\t});\n\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t},\n\n\t//starts with the string\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//ends with the string\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//in array\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(Array.isArray(filterVal)){\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\treturn false;\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultFilters from './defaults/filters.js';\n\nclass Filter extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t\tthis.tableInitialized = false;\n\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n\t\tthis.registerTableOption(\"placeholderHeaderFilter\", false); //placeholder when header filter is empty\n\n\t\tthis.registerColumnOption(\"headerFilter\");\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\n\t\tthis.registerColumnOption(\"headerFilterParams\");\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\n\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\n\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.subscribe(\"placeholder\", this.generatePlaceholder.bind(this));\n\n\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n\t\t}\n\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialFilter){\n\t\t\tthis.setFilter(this.table.options.initialFilter);\n\t\t}\n\n\t\tif(this.table.options.initialHeaderFilter){\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\n\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.tableInitialized = true;\n\t}\n\n\tremoteFilterParams(data, config, silent, params){\n\t\tparams.filter = this.getFilters(true, true);\n\t\treturn params;\n\t}\n\n\tgeneratePlaceholder(text){\n\t\tif(this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length){\n\t\t\treturn this.table.options.placeholderHeaderFilter;\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t//set standard filters\n\tuserSetFilter(field, type, value, params){\n\t\tthis.setFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\t//set standard filters\n\tuserRefreshFilter(){\n\t\tthis.refreshFilter();\n\t}\n\n\t//add filter to array\n\tuserAddFilter(field, type, value, params){\n\t\tthis.addFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\tuserSetHeaderFilterFocus(field){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterFocus(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tuserGetHeaderFilterValue(field) {\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\treturn this.getHeaderFilterValue(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t}\n\t}\n\n\tuserSetHeaderFilterValue(field, value){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterValue(column, value);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//remove filter from array\n\tuserRemoveFilter(field, type, value){\n\t\tthis.removeFilter(field, type, value);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear filters\n\tuserClearFilter(all){\n\t\tthis.clearFilter(all);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear header filters\n\tuserClearHeaderFilter(){\n\t\tthis.clearHeaderFilter();\n\t\tthis.refreshFilter();\n\t}\n\n\n\t//search for specific row components\n\tsearchRows(field, type, value){\n\t\treturn this.search(\"rows\", field, type, value);\n\t}\n\n\t//search for specific data\n\tsearchData(field, type, value){\n\t\treturn this.search(\"data\", field, type, value);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumnHeaderFilter(column){\n\t\tvar def = column.definition;\n\n\t\tif(def.headerFilter){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\t//initialize column header filter\n\tinitializeColumn(column, value){\n\t\tvar self = this,\n\t\tfield = column.getField();\n\n\t\t//handle successfully value change\n\t\tfunction success(value){\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\ttype = \"\",\n\t\t\tfilterChangeCheck = \"\",\n\t\t\tfilterFunc;\n\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!filterFunc){\n\t\t\t\t\t\tswitch(filterType){\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type};\n\t\t\t\t}else{\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.trackChanges();\n\t\t\t\t\tself.refreshFilter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess:success,\n\t\t\tattrType:false,\n\t\t\ttagType:false,\n\t\t\temptyFunc:false,\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t}\n\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\n\t\tvar self = this,\n\t\tsuccess = column.modules.filter.success,\n\t\tfield = column.getField(),\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params, onRenderedCallback;\n\n\t\tcolumn.modules.filter.value = initialValue;\n\n\t\t//handle aborted edit\n\t\tfunction cancel(){}\n\n\t\tfunction onRendered(callback){\n\t\t\tonRenderedCallback = callback;\n\t\t}\n\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif(field){\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\n\t\t\t\treturn !value && value !== 0;\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch(typeof column.definition.headerFilter){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\n\t\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(editor){\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:() => {\n\t\t\t\t\t\treturn \"header\";\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight:function(){\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params);\n\n\t\t\t\tif(!editorElement){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(!(editorElement instanceof Node)){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : (column.definition.headerFilterPlaceholder || self.langText(\"headerFilters|default\")));\n\t\t\t\t});\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\n\t\t\t\t\tvar left = this.table.columnManager.contentsElement.scrollLeft;\n\n\t\t\t\t\tvar headerPos = this.table.rowManager.element.scrollLeft;\n\n\t\t\t\t\tif(left !== headerPos){\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function(e){\n\t\t\t\t\tif(typingTimer){\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function(){\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\n\t\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propagating click to column sorters etc\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif(!reinitialize){\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\n\t\t\t\tif(onRenderedCallback){\n\t\t\t\t\tonRenderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t}\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\thideHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t}\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tshowHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t}\n\n\t//programmatically set focus of header filter\n\tsetHeaderFilterFocus(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically get value of header filter\n\tgetHeaderFilterValue(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\treturn column.modules.filter.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically set value of header filter\n\tsetHeaderFilterValue(column, value){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\treloadHeaderFilter(column){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshFilter(){\n\t\tif(this.tableInitialized){\n\t\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\t\tthis.reloadData(null, false, false);\n\t\t\t}else{\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the filters has changed since last use\n\ttrackChanges(){\n\t\tthis.changed = true;\n\t\tthis.dispatch(\"filter-changed\");\n\t}\n\n\t//check if the filters has changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//set standard filters\n\tsetFilter(field, type, value, params){\n\t\tthis.filterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tthis.addFilter(field);\n\t}\n\n\t//add filter to array\n\taddFilter(field, type, value, params){\n\t\tvar changed = false;\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tthis.filterList.push(filter);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\n\t\tif(changed){\n\t\t\tthis.trackChanges();\n\t\t}\n\t}\n\n\tfindFilter(filter){\n\t\tvar column;\n\n\t\tif(Array.isArray(filter)){\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif(typeof filter.field == \"function\"){\n\t\t\tfilterFunc = function(data){\n\t\t\t\treturn filter.field(data, filter.type || {});// pass params to custom filter function\n\t\t\t};\n\t\t}else{\n\n\t\t\tif(Filter.filters[filter.type]){\n\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}\n\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t}\n\n\tfindSubFilters(filters){\n\t\tvar output = [];\n\n\t\tfilters.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t}\n\n\t//get all filters\n\tgetFilters(all, ajax){\n\t\tvar output = [];\n\n\t\tif(all){\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif(ajax){\n\t\t\toutput.forEach(function(item){\n\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t}\n\n\t//filter to Object\n\tfiltersToArray(filterList, ajax){\n\t\tvar output = [];\n\n\t\tfilterList.forEach((filter) => {\n\t\t\tvar item;\n\n\t\t\tif(Array.isArray(filter)){\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\n\t\t\t}else{\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value};\n\n\t\t\t\tif(ajax){\n\t\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//get all filters\n\tgetHeaderFilters(){\n\t\tvar output = [];\n\n\t\tfor(var key in this.headerFilters){\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//remove filter from array\n\tremoveFilter(field, type, value){\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tvar index = -1;\n\n\t\t\tif(typeof filter.field == \"object\"){\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.filterList.splice(index, 1);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear filters\n\tclearFilter(all){\n\t\tthis.filterList = [];\n\n\t\tif(all){\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear header filters\n\tclearHeaderFilter(){\n\t\tthis.headerFilters = {};\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach((column) => {\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\n\t\t\t\tdelete column.modules.filter.value;\n\t\t\t}\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tthis.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//search data and return matching rows\n\tsearch (searchType, field, type, value){\n\t\tvar activeRows = [],\n\t\tfilterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach((filter) => {\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\n\t\t});\n\n\t\treturn activeRows;\n\t}\n\n\t//filter row array\n\tfilter(rowList, filters){\n\t\tvar activeRows = [],\n\t\tactiveRowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n\t\t}\n\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\n\n\t\t\trowList.forEach((row) => {\n\t\t\t\tif(this.filterRow(row)){\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}else{\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\n\n\t\t\tactiveRows.forEach((row) => {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t}\n\n\t//filter individual row\n\tfilterRow(row, filters){\n\t\tvar match = true,\n\t\tdata = row.getData();\n\n\t\tthis.filterList.forEach((filter) => {\n\t\t\tif(!this.filterRecurse(filter, data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\n\t\tfor(var field in this.headerFilters){\n\t\t\tif(!this.headerFilters[field].func(data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tfilterRecurse(filter, data){\n\t\tvar match = false;\n\n\t\tif(Array.isArray(filter)){\n\t\t\tfilter.forEach((subFilter) => {\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t}\n}\n\nFilter.moduleName = \"filter\";\n\n//load defaults\nFilter.filters = defaultFilters;\n\nexport default Filter;","import plaintext from './formatters/plaintext.js';\nimport html from './formatters/html.js';\nimport textarea from './formatters/textarea.js';\nimport money from './formatters/money.js';\nimport link from './formatters/link.js';\nimport image from './formatters/image.js';\nimport tickCross from './formatters/tickCross.js';\nimport datetime from './formatters/datetime.js';\nimport datetimediff from './formatters/datetimediff.js';\nimport lookup from './formatters/lookup.js';\nimport star from './formatters/star.js';\nimport traffic from './formatters/traffic.js';\nimport progress from './formatters/progress.js';\nimport color from './formatters/color.js';\nimport buttonTick from './formatters/buttonTick.js';\nimport buttonCross from './formatters/buttonCross.js';\nimport rownum from './formatters/rownum.js';\nimport handle from './formatters/handle.js';\nimport responsiveCollapse from './formatters/responsiveCollapse.js';\nimport rowSelection from './formatters/rowSelection.js';\n\nexport default {\n\tplaintext:plaintext,\n\thtml:html,\n\ttextarea:textarea,\n\tmoney:money,\n\tlink:link,\n\timage:image,\n\ttickCross:tickCross,\n\tdatetime:datetime,\n\tdatetimediff:datetimediff,\n\tlookup:lookup,\n\tstar:star,\n\ttraffic:traffic,\n\tprogress:progress,\n\tcolor:color,\n\tbuttonTick:buttonTick,\n\tbuttonCross:buttonCross,\n\trownum:rownum,\n\thandle:handle,\n\tresponsiveCollapse:responsiveCollapse,\n\trowSelection:rowSelection,\n};","export default function(cell, formatterParams, onRendered){\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}","export default function(cell, formatterParams, onRendered){\n\treturn cell.getValue();\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}","export default function(cell, formatterParams, onRendered){\n\tvar floatVal = parseFloat(cell.getValue()),\n\tsign = \"\",\n\tnumber, integer, decimal, rgx, value;\n\n\tvar decimalSym = formatterParams.decimal || \".\";\n\tvar thousandSym = formatterParams.thousand || \",\";\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\n\tvar symbol = formatterParams.symbol || \"\";\n\tvar after = !!formatterParams.symbolAfter;\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\tif(isNaN(floatVal)){\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t}\n\n\tif(floatVal < 0){\n\t\tfloatVal = Math.abs(floatVal);\n\t\tsign = negativeSign;\n\t}\n\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\tnumber = String(number).split(\".\");\n\n\tinteger = number[0];\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\tif (formatterParams.thousand !== false) {\n\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\twhile (rgx.test(integer)){\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t}\n\t}\n\n\tvalue = integer + decimal;\n\t\n\tif(sign === true){\n\t\tvalue = \"(\" + value  + \")\";\n\t\treturn after ? value + symbol : symbol + value;\n\t}else{\n\t\treturn after ? sign + value + symbol : sign + symbol + value;\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\turlPrefix = formatterParams.urlPrefix || \"\",\n\tdownload = formatterParams.download,\n\tlabel = value,\n\tel = document.createElement(\"a\"),\n\tdata;\n\n\tfunction labelTraverse(path, data){\n\t\tvar item = path.shift(),\n\t\tvalue = data[item];\n\t\t\n\t\tif(path.length && typeof value === \"object\"){\n\t\t\treturn labelTraverse(path, value);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tif(formatterParams.labelField){\n\t\tdata = cell.getData();\n\t\tlabel = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n\t}\n\n\tif(formatterParams.label){\n\t\tswitch(typeof formatterParams.label){\n\t\t\tcase \"string\":\n\t\t\t\tlabel = formatterParams.label;\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(label){\n\t\tif(formatterParams.urlField){\n\t\t\tdata = cell.getData();\n\t\t\tvalue = data[formatterParams.urlField];\n\t\t}\n\n\t\tif(formatterParams.url){\n\t\t\tswitch(typeof formatterParams.url){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\tif(formatterParams.target){\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t}\n\n\t\tif(formatterParams.download){\n\n\t\t\tif(typeof download == \"function\"){\n\t\t\t\tdownload = download(cell);\n\t\t\t}else{\n\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t}\n\n\t\t\tel.setAttribute(\"download\", download);\n\t\t}\n\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\treturn el;\n\t}else{\n\t\treturn \"&nbsp;\";\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"img\"),\n\tsrc = cell.getValue();\n\n\tif(formatterParams.urlPrefix){\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\n\t}\n\n\tif(formatterParams.urlSuffix){\n\t\tsrc = src + formatterParams.urlSuffix;\n\t}\n\n\tel.setAttribute(\"src\", src);\n\n\tswitch(typeof formatterParams.height){\n\t\tcase \"number\":\n\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.height = formatterParams.height;\n\t\t\tbreak;\n\t}\n\n\tswitch(typeof formatterParams.width){\n\t\tcase \"number\":\n\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.width = formatterParams.width;\n\t\t\tbreak;\n\t}\n\n\tel.addEventListener(\"load\", function(){\n\t\tcell.getRow().normalizeHeight();\n\t});\n\n\treturn el;\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tempty = formatterParams.allowEmpty,\n\ttruthy = formatterParams.allowTruthy,\n\ttrueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\tif((trueValueSet && value === formatterParams.trueValue) || (!trueValueSet && ((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")))){\n\t\telement.setAttribute(\"aria-checked\", true);\n\t\treturn tick || \"\";\n\t}else{\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\treturn \"\";\n\t\t}else{\n\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\treturn cross || \"\";\n\t\t}\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif(newDatetime.isValid){\n\t\t\tif(formatterParams.timezone){\n\t\t\t\tnewDatetime = newDatetime.setZone(formatterParams.timezone);\n\t\t\t}\n\n\t\t\treturn newDatetime.toFormat(outputFormat);\n\t\t}else{\n\t\t\tif(invalid === true || !value){\n\t\t\t\treturn value;\n\t\t\t}else if(typeof invalid === \"function\"){\n\t\t\t\treturn invalid(value);\n\t\t\t}else{\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n\t}\n}","export default function (cell, formatterParams, onRendered) {\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif (newDatetime.isValid){\n\t\t\tif(humanize){\n\t\t\t\treturn newDatetime.diff(date, unit).toHuman()  + (suffix ? \" \" + suffix : \"\");\n\t\t\t}else{\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n\t}\n}","export default function (cell, formatterParams, onRendered) {\n\tvar value = cell.getValue();\n\n\tif (typeof formatterParams[value] === \"undefined\") {\n\t\tconsole.warn('Missing display value for ' + value);\n\t\treturn value;\n\t}\n\n\treturn formatterParams[value];\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\tstars = document.createElement(\"span\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t//style stars holder\n\tstars.style.verticalAlign = \"middle\";\n\n\t//style star\n\tstar.setAttribute(\"width\", \"14\");\n\tstar.setAttribute(\"height\", \"14\");\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\tfor(var i=1;i<= maxStars;i++){\n\t\tvar nextStar = star.cloneNode(true);\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\tstars.appendChild(nextStar);\n\t}\n\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\telement.setAttribute(\"aria-label\", value);\n\n\treturn stars;\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\tel = document.createElement(\"span\"),\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\tcolor = \"#666666\",\n\tpercent, percentValue;\n\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\n\t\treturn;\n\t}\n\n\tel.classList.add(\"tabulator-traffic-light\");\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set color\n\tswitch(typeof colors){\n\t\tcase \"string\":\n\t\t\tcolor = colors;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = colors(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(colors)){\n\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = colors[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t}\n\n\tel.style.backgroundColor = color;\n\n\treturn el;\n}","import CellComponent from '../../../../core/cell/CellComponent.js';\n\nexport default function(cell, formatterParams = {}, onRendered){ //progress bar\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\telement = cell.getElement(),\n\tmax = formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams.min ? formatterParams.min : 0,\n\tlegendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\tpercent, percentValue, color, legend, legendColor;\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set bar color\n\tswitch(typeof formatterParams.color){\n\t\tcase \"string\":\n\t\t\tcolor = formatterParams.color;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = formatterParams.color(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.color)){\n\t\t\t\tlet unit = 100 / formatterParams.color.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\tdefault:\n\t\t\tcolor = \"#2DC214\";\n\t}\n\n\t//generate legend\n\tswitch(typeof formatterParams.legend){\n\t\tcase \"string\":\n\t\t\tlegend = formatterParams.legend;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegend = formatterParams.legend(value);\n\t\t\tbreak;\n\t\tcase \"boolean\":\n\t\t\tlegend = value;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegend = false;\n\t}\n\n\t//set legend color\n\tswitch(typeof formatterParams.legendColor){\n\t\tcase \"string\":\n\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.legendColor)){\n\t\t\t\tlet unit = 100 / formatterParams.legendColor.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegendColor = \"#000\";\n\t}\n\n\telement.style.minWidth = \"30px\";\n\telement.style.position = \"relative\";\n\n\telement.setAttribute(\"aria-label\", percentValue);\n\n\tvar barEl = document.createElement(\"div\");\n\tbarEl.style.display = \"inline-block\";\n\tbarEl.style.width = percentValue + \"%\";\n\tbarEl.style.backgroundColor = color;\n\tbarEl.style.height = \"100%\";\n\n\tbarEl.setAttribute('data-max', max);\n\tbarEl.setAttribute('data-min', min);\n\n\tvar barContainer = document.createElement(\"div\");\n\tbarContainer.style.position = \"relative\";\n\tbarContainer.style.width = \"100%\";\n\tbarContainer.style.height = \"100%\";\n\n\tif(legend){\n\t\tvar legendEl = document.createElement(\"div\");\n\t\tlegendEl.style.position = \"absolute\";\n\t\tlegendEl.style.top = 0;\n\t\tlegendEl.style.left = 0;\n\t\tlegendEl.style.textAlign = legendAlign;\n\t\tlegendEl.style.width = \"100%\";\n\t\tlegendEl.style.color = legendColor;\n\t\tlegendEl.innerHTML = legend;\n\t}\n\n\tonRendered(function(){\n\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\tif(!(cell instanceof CellComponent)){\n\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\tholderEl.style.position = \"absolute\";\n\t\t\tholderEl.style.top = \"4px\";\n\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\tholderEl.style.left = \"4px\";\n\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\telement.appendChild(holderEl);\n\n\t\t\telement = holderEl;\n\t\t}\n\n\t\telement.appendChild(barContainer);\n\t\tbarContainer.appendChild(barEl);\n\n\t\tif(legend){\n\t\t\tbarContainer.appendChild(legendEl);\n\t\t}\n\t});\n\n\treturn \"\";\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\treturn \"\";\n}","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n}","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n}","export default function(cell, formatterParams, onRendered){\n\tvar content = document.createElement(\"span\");\n\tvar row = cell.getRow();\n\n\trow.watchPosition((position) => {\n\t\tcontent.innerText = position;\n\t});\n\t\n\treturn content;\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n}","export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"div\"),\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\n\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\n\tel.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>\n\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>`;\n\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\tfunction toggleList(isOpen){\n\t\tvar collapseEl = config.element;\n\n\t\tconfig.open = isOpen;\n\n\t\tif(collapseEl){\n\n\t\t\tif(config.open){\n\t\t\t\tel.classList.add(\"open\");\n\t\t\t\tcollapseEl.style.display = '';\n\t\t\t}else{\n\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tel.addEventListener(\"click\", function(e){\n\t\te.stopImmediatePropagation();\n\t\ttoggleList(!config.open);\n\t\tcell.getTable().rowManager.adjustTableSize();\n\t});\n\n\ttoggleList(config.open);\n\n\treturn el;\n}","import RowComponent from '../../../../core/row/RowComponent.js';\n\nexport default function(cell, formatterParams, onRendered){\n\tvar checkbox = document.createElement(\"input\");\n\tvar blocked = false;\n\n\tcheckbox.type = 'checkbox';\n\n\tcheckbox.setAttribute(\"aria-label\", \"Select Row\");\n\t\n\tif(this.table.modExists(\"selectRow\", true)){\n\n\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(typeof cell.getRow == 'function'){\n\t\t\tvar row = cell.getRow();\n\n\t\t\tif(row instanceof RowComponent){\n\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\t\tif(!blocked){\n\t\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tblocked = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\tblocked = true;\n\t\t\t\t\t\tthis.table.modules.selectRow.handleComplexRowClick(row._row, e);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t}else{\n\t\t\t\tcheckbox = \"\";\n\t\t\t}\n\t\t}else {\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\n\t\t\t\t\tthis.table.deselectRow();\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t}\n\t}\n\n\treturn checkbox;\n}","import Module from '../../core/Module.js';\n\nimport defaultFormatters from './defaults/formatters.js';\n\nclass Format extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.registerColumnOption(\"formatter\");\n\t\tthis.registerColumnOption(\"formatterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"formatterPrint\");\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\n\t\tthis.registerColumnOption(\"formatterClipboard\");\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\n\t\tthis.registerColumnOption(\"titleFormatter\");\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\n\t}\n\t\n\t//initialize column formatter\n\tinitializeColumn(column){\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\n\t\t\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n\t\t}\n\t}\n\t\n\tlookupFormatter(column, type){\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\n\t\tformatter = column.definition[\"formatter\" + type];\n\t\t\n\t\t//set column formatter\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tconfig.formatter = Format.formatters[formatter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.formatter = formatter;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn config;\n\t}\n\t\n\tcellRendered(cell){\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\n\t\t\tcell.modules.format.renderedCallback();\n\t\t\tcell.modules.format.rendered = true;\n\t\t}\n\t}\n\t\n\t//return a formatted value for a column header\n\tformatHeader(column, title, el){\n\t\tvar formatter, params, onRendered, mockCell;\n\t\t\n\t\tif(column.definition.titleFormatter){\n\t\t\tformatter = this.getFormatter(column.definition.titleFormatter);\n\t\t\t\n\t\t\tonRendered = (callback) => {\n\t\t\t\tcolumn.titleFormatterRendered = callback;\n\t\t\t};\n\t\t\t\n\t\t\tmockCell = {\n\t\t\t\tgetValue:function(){\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tgetElement:function(){\n\t\t\t\t\treturn el;\n\t\t\t\t},\n\t\t\t\tgetType:function(){\n\t\t\t\t\treturn \"header\";\n\t\t\t\t},\n\t\t\t\tgetColumn:function(){\n\t\t\t\t\treturn column.getComponent();\n\t\t\t\t},\n\t\t\t\tgetTable:() => {\n\t\t\t\t\treturn this.table;\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tparams = column.definition.titleFormatterParams || {};\n\t\t\t\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\t\t\t\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\n\t\t}else{\n\t\t\treturn title;\n\t\t}\n\t}\n\t\n\t\n\t//return a formatted value for a cell\n\tformatValue(cell){\n\t\tvar component = cell.getComponent(),\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\tif(!cell.modules.format){\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\t\t\t\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\tcell.modules.format.rendered = false;\n\t\t}\n\t\t\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t}\n\t\n\tformatExportValue(cell, type){\n\t\tvar formatter = cell.column.modules.format[type],\n\t\tparams;\n\t\t\n\t\tif(formatter){\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\n\t\t\t\n\t\t\tfunction onRendered(callback){\n\t\t\t\tif(!cell.modules.format){\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t\tcell.modules.format.rendered = false;\n\t\t\t}\n\t\t\t\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t\t\t\n\t\t}else{\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t}\n\t\n\tsanitizeHTML(value){\n\t\tif(value){\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\t\t\t\n\t\t\treturn String(value).replace(/[&<>\"'`=/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t}else{\n\t\t\treturn value;\n\t\t}\n\t}\n\t\n\temptyToSpace(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t}\n\t\n\t//get formatter for cell\n\tgetFormatter(formatter){\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tformatter = Format.formatters[formatter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t//Custom formatter Function, do nothing\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn formatter;\n\t}\n}\n\nFormat.moduleName = \"format\";\n\n//load defaults\nFormat.formatters = defaultFormatters;\n\nexport default Format;","import Module from '../../core/Module.js';\n\nclass FrozenColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.blocked = true;\n\t\t\n\t\tthis.registerColumnOption(\"frozen\");\n\t}\n\t\n\t//reset initial state\n\treset(){\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.active = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\n\t\t\n\t\tthis.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.reinitializeColumns.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\n\t\tthis.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n\t\tthis.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t}\n\t\n\tblockLayout(){\n\t\tthis.blocked = true;\n\t}\n\t\n\tunblockLayout(){\n\t\tthis.blocked = false;\n\t}\n\t\n\tlayoutCell(cell){\n\t\tthis.layoutElement(cell.element, cell.column);\n\t}\n\t\n\treinitializeColumns(){\n\t\tthis.reset();\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tthis.initializeColumn(column);\n\t\t});\n\t}\n\t\n\t//initialize specific column\n\tinitializeColumn(column){\n\t\tvar config = {margin:0, edge:false};\n\t\t\n\t\tif(!column.isGroup){\n\t\t\t\n\t\t\tif(this.frozenCheck(column)){\n\t\t\t\t\n\t\t\t\tconfig.position = this.initializationMode;\n\t\t\t\t\n\t\t\t\tif(this.initializationMode == \"left\"){\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t}else{\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.active = true;\n\t\t\t\t\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t}else{\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfrozenCheck(column){\n\t\tif(column.parent.isGroup && column.definition.frozen){\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\t\t\n\t\tif(column.parent.isGroup){\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t}else{\n\t\t\treturn column.definition.frozen;\n\t\t}\n\t}\n\t\n\t//layout calculation rows\n\tlayoutCalcRows(){\n\t\tif(this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modExists(\"groupRows\")){\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlayoutGroupCalcs(groups){\n\t\tgroups.forEach((group) => {\n\t\t\tif(group.calcs.top){\n\t\t\t\tthis.layoutRow(group.calcs.top);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.calcs.bottom){\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.groupList && group.groupList.length){\n\t\t\t\tthis.layoutGroupCalcs(group.groupList);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//calculate column positions and layout headers\n\tlayoutColumnPosition(allCells){\n\t\tvar leftParents = [];\n\t\t\n\t\tvar leftMargin = 0;\n\t\tvar rightMargin = 0;\n\t\t\n\t\tthis.leftColumns.forEach((column, i) => {\t\n\t\t\tcolumn.modules.frozen.marginValue = leftMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tleftMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.leftColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\n\t\t\t\tif(!leftParents.includes(parentEl)){\n\t\t\t\t\tthis.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.modules.frozen.edge){\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column, i) => {\n\t\t\t\n\t\t\tcolumn.modules.frozen.marginValue = rightMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\trightMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.rightColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tgetColGroupParentElement(column){\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t}\n\t\n\t//layout columns appropriately\n\tlayout(){\t\n\t\tif(this.active && !this.blocked){\n\t\t\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition();\n\t\t\t\n\t\t\tthis.reinitializeRows();\n\t\t\t\n\t\t\tthis.layoutCalcRows();\n\t\t}\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.table.rowManager.getVisibleRows(true);\n\t\tvar otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\t\t\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t\t\n\t\tvisibleRows.forEach((row) =>{\n\t\t\tif(row.type === \"row\"){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutRow(row){\n\t\tif(this.table.options.layout === \"fitDataFill\" && this.rightColumns.length){\n\t\t\tthis.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n\t\t}\n\t\t\n\t\tthis.leftColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutElement(element, column){\n\t\tvar position;\n\t\t\n\t\tif(column.modules.frozen && element){\n\t\t\telement.style.position = \"sticky\";\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tposition = column.modules.frozen.position === \"left\" ? \"right\" : \"left\";\n\t\t\t}else{\n\t\t\t\tposition = column.modules.frozen.position;\n\t\t\t}\n\t\t\n\t\t\telement.style[position] = column.modules.frozen.margin;\n\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\t\t\t\n\t\t\tif(column.modules.frozen.edge){\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustForScrollbar(width){\n\t\tif(this.rightColumns.length){\n\t\t\tthis.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + width + \"px)\";\n\t\t}\n\t}\n\t\n\t_calcSpace(columns, index){\n\t\tvar width = 0;\n\t\t\n\t\tfor (let i = 0; i < index; i++){\n\t\t\tif(columns[i].visible){\n\t\t\t\twidth += columns[i].getWidth();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n}\n\nFrozenColumns.moduleName = \"frozenColumns\";\n\nexport default FrozenColumns;","import Module from '../../core/Module.js';\n\nclass FrozenRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\n\t\t//register table options\n\t\tthis.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\n\t\tthis.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\n\t}\n\n\tinitialize(){\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\n\n\t\tif(this.table.options.frozenRows){\n\t\t\tthis.subscribe(\"data-processed\", this.initializeRows.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t}\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\tinitializeRows(){\n\t\tthis.table.rowManager.getRows().forEach((row) => {\n\t\t\tthis.initializeRow(row);\n\t\t});\n\t}\n\n\tinitializeRow(row){\n\t\tvar frozenRows = this.table.options.frozenRows,\n\t\trowType = typeof frozenRows;\n\n\t\tif(rowType === \"number\"){\n\t\t\tif(row.getPosition() && (row.getPosition() + this.rows.length) <= frozenRows){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(rowType === \"function\"){\n\t\t\tif(frozenRows.call(this.table, row.getComponent())){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(Array.isArray(frozenRows)){\n\t\t\tif(frozenRows.includes(row.data[this.options(\"frozenRowsField\")])){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowFrozen(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\treturn index > -1;\n\t}\n\n\tisFrozen(){\n\t\treturn !!this.rows.length;\n\t}\n\n\tvisibleRows(viewable, rows){\n\t\tthis.rows.forEach((row) => {\n\t\t\trows.push(row);\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\t//filter frozen rows out of display data\n\tgetRows(rows){\n\t\tvar output = rows.slice(0);\n\n\t\tthis.rows.forEach(function(row){\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif(index > -1){\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tfreezeRow(row){\n\t\tif(!row.modules.frozen){\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.styleRows();\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t}\n\n\tunfreezeRow(row){\n\t\tif(row.modules.frozen){\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tthis.detachRow(row);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tif(this.rows.length){\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t}\n\n\tdetachRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t}\n\n\tstyleRows(row){\n\t\tthis.rows.forEach((row, i) => {\n\t\t\tthis.table.rowManager.styleRow(row, i);\n\t\t});\n\t}\n}\n\nFrozenRows.moduleName = \"frozenRows\";\n\nexport default FrozenRows;","//public group object\nclass GroupComponent {\n\tconstructor (group){\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._group.groupManager.table.componentFunctionBinder.handle(\"group\", target._group, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetKey(){\n\t\treturn this._group.key;\n\t}\n\n\tgetField(){\n\t\treturn this._group.field;\n\t}\n\n\tgetElement(){\n\t\treturn this._group.element;\n\t}\n\n\tgetRows(){\n\t\treturn this._group.getRows(true);\n\t}\n\n\tgetSubGroups(){\n\t\treturn this._group.getSubGroups(true);\n\t}\n\n\tgetParentGroup(){\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t}\n\n\tisVisible(){\n\t\treturn this._group.visible;\n\t}\n\n\tshow(){\n\t\tthis._group.show();\n\t}\n\n\thide(){\n\t\tthis._group.hide();\n\t}\n\n\ttoggle(){\n\t\tthis._group.toggleVisibility();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._group.groupManager.table.rowManager.scrollToRow(this._group, position, ifVisible);\n\t}\n\n\t_getSelf(){\n\t\treturn this._group;\n\t}\n\n\tgetTable(){\n\t\treturn this._group.groupManager.table;\n\t}\n}\n\nexport default GroupComponent;","import Helpers from '../../core/tools/Helpers.js';\nimport GroupComponent from './GroupComponent.js';\n\n//Group functions\nclass Group{\n\t\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.element = false;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\t\t\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\t\t\n\t\tthis.createValueGroups();\n\t}\n\t\n\twipe(elementsOnly){\n\t\tif(!elementsOnly){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\tgroup.wipe();\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tif(row.modules){\n\t\t\t\t\t\tdelete row.modules.group;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.arrowElement = false;\n\t\tthis.elementContents = false;\n\t}\n\t\n\tcreateElements(){\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\t\t\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\t\t\n\t\t//setup movable rows\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t}\n\t\n\tcreateValueGroups(){\n\t\tvar level = this.level + 1;\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\n\t\t\t\tthis._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t}\n\t\n\taddBindings(){\n\t\tvar toggleElement;\n\t\t\n\t\tif(this.groupManager.table.options.groupToggleElement){\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n\t\t\t\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\n\t\t\t\tif(this.groupManager.table.options.groupToggleElement === \"arrow\"){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t}\n\n\t\t\t\t//allow click event to propagate before toggling visibility\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.toggleVisibility();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\t\n\t_createGroup(groupID, level){\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\t_addRowToGroup(row){\n\t\t\n\t\tvar level = this.level + 1;\n\t\t\n\t\tif(this.hasSubGroups){\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\tgroupKey = level + \"_\" + groupID;\n\t\t\t\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\t\tif(this.groups[groupKey]){\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(!this.groups[groupKey]){\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_addRow(row){\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t}\n\t\n\tinsertRow(row, to, after){\n\t\tvar data = this.conformRowData({});\n\t\t\n\t\trow.updateData(data);\n\t\t\n\t\tvar toIndex = this.rows.indexOf(to);\n\t\t\n\t\tif(toIndex > -1){\n\t\t\tif(after){\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\n\t\t\t}else{\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t}else{\n\t\t\tif(after){\n\t\t\t\tthis.rows.push(row);\n\t\t\t}else{\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\trow.modules.group = this;\n\t\t\n\t\t// this.generateGroupHeaderContents();\n\t\t\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\t\t\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\t\n\tscrollHeader(left){\n\t\tif(this.arrowElement){\n\t\t\tthis.arrowElement.style.marginLeft = left;\n\t\t\t\n\t\t\tthis.groupList.forEach(function(child){\n\t\t\t\tchild.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tgetRowIndex(row){}\n\t\n\t//update row data to match grouping constraints\n\tconformRowData(data){\n\t\tif(this.field){\n\t\t\tdata[this.field] = this.key;\n\t\t}else{\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\t\t\n\t\tif(this.parent){\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\tremoveRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t}else{\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\t\t\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(el.parentNode){\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupManager.blockRedraw){\n\t\t\t\tthis.generateGroupHeaderContents();\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupList.length){\n\t\t\t\tif(this.parent){\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t}else{\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetHeadersAndRows(){\n\t\tvar output = [];\n\t\t\n\t\toutput.push(this);\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\t\n\t\tif(this.calcs.top){\n\t\t\tthis.calcs.top.detachElement();\n\t\t\tthis.calcs.top.deleteCells();\n\t\t}\n\t\t\n\t\tif(this.calcs.bottom){\n\t\t\tthis.calcs.bottom.detachElement();\n\t\t\tthis.calcs.bottom.deleteCells();\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tif(this.visible){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\toutput = output.concat(this.rows);\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetData(visible, transform){\n\t\tvar output = [];\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(!visible || (visible && this.visible)){\n\t\t\tthis.rows.forEach((row) => {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRowCount(){\n\t\tvar count = 0;\n\t\t\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t}else{\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t}\n\n\t\n\ttoggleVisibility(){\n\t\tif(this.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\t\n\thide(){\n\t\tthis.visible = false;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\t\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n\t}\n\t\n\tshow(){\n\t\tthis.visible = true;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tvar prev = this.generateElement();\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n\t}\n\t\n\t_visSet(){\n\t\tvar data = [];\n\t\t\n\t\tif(typeof this.visible == \"function\"){\n\t\t\t\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\t\t\t\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\t\n\t\t\t\tif(result){\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tif(this.rows.find(function(item){\n\t\t\t\treturn item === row;\n\t\t\t})){\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetSubGroups(component){\n\t\tvar output = [];\n\t\t\n\t\tthis.groupList.forEach(function(child){\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRows(component, includeChildren){\n\t\tvar output = [];\n\t\t\n\t\tif(includeChildren && this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getRows(component, includeChildren));\n\t\t\t});\n\t\t}else{\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\toutput.push(component ? row.getComponent() : row);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgenerateGroupHeaderContents(){\n\t\tvar data = [];\n\t\t\n\t\tvar rows = this.getRows(false, true);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(typeof this.elementContents === \"string\"){\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t}else{\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\t\t\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t}\n\t\n\tgetPath(path = []) {\n\t\tpath.unshift(this.key);\n\t\tif(this.parent) {\n\t\t\tthis.parent.getPath(path);\n\t\t}\n\t\treturn path;\n\t}\n\t\n\t////////////// Standard Row Functions //////////////\n\t\n\tgetElement(){\n\t\treturn this.elementContents ? this.element : this.generateElement();\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.addBindings = false;\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(this.visible){\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t}else{\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\t\t\n\t\tthis.generateGroupHeaderContents();\n\t\t\n\t\t// this.addBindings();\n\t\t\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(){\n\t\tthis.setHeight(this.element.clientHeight);\n\t}\n\t\n\tinitialize(force){\n\t\tif(!this.initialized || force){\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\treinitialize(){\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\t\t\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.initialize(true);\n\t\t}\n\t}\n\t\n\tsetHeight(height){\n\t\tif(this.height != height){\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\tgetGroup(){\n\t\treturn this;\n\t}\n\t\n\treinitializeHeight(){}\n\t\n\tcalcHeight(){}\n\t\n\tsetCellHeight(){}\n\t\n\tclearCellHeight(){}\n\t\n\tdeinitializeHeight(){}\n\n\trendered(){}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new GroupComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n\nexport default Group;","import Module from '../../core/Module.js';\n\nimport Group from './Group.js';\n\nclass GroupRows extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\t\n\t\tthis.displayHandler = this.getRows.bind(this);\n\n\t\tthis.blockRedraw = false;\n\t\t\n\t\t//register table options\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\n\t\tthis.registerTableOption(\"groupValues\", false);\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\n\t\t\n\t\t//register table functions\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n\t}\n\t\n\t//initialize group configuration\n\tinitialize(){\n\t\tthis.subscribe(\"table-destroy\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this));\n\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t_blockRedrawing(){\n\t\tthis.blockRedraw = true;\n\t}\n\n\t_restore_redrawing(){\n\t\tthis.blockRedraw = false;\n\t}\n\n\tconfigureGroupSetup(){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar groupBy = this.table.options.groupBy,\n\t\t\tstartOpen = this.table.options.groupStartOpen,\n\t\t\tgroupHeader = this.table.options.groupHeader;\n\t\t\t\n\t\t\tthis.allowedValues = this.table.options.groupValues;\n\t\t\t\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\t\t\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t\t};\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupIDLookups = [];\n\t\t\t\n\t\t\tif(groupBy){\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\t\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\t\t\t\t\t\n\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\tif(col.definition.topCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(col.definition.bottomCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(!Array.isArray(groupBy)){\n\t\t\t\tgroupBy = [groupBy];\n\t\t\t}\n\t\t\t\n\t\t\tgroupBy.forEach((group, i) => {\n\t\t\t\tvar lookupFunc, column;\n\t\t\t\t\n\t\t\t\tif(typeof group == \"function\"){\n\t\t\t\t\tlookupFunc = group;\n\t\t\t\t}else{\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groupIDLookups.push({\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\t\tfunc:lookupFunc,\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(startOpen){\n\t\t\t\tif(!Array.isArray(startOpen)){\n\t\t\t\t\tstartOpen = [startOpen];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tstartOpen.forEach((level) => {\n\t\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.startOpen = startOpen;\n\t\t\t}\n\t\t\t\n\t\t\tif(groupHeader){\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t\t}\n\t\t}else{\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\trowSample(rows, prevValue){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar group = this.getGroups(false)[0];\n\t\t\t\n\t\t\tprevValue.push(group.getRows(false)[0]);\n\t\t}\n\t\t\n\t\treturn prevValue;\n\t}\n\t\n\tvirtualRenderFill(){\n\t\tvar el = this.table.rowManager.tableElement;\n\t\tvar rows = this.table.rowManager.getVisibleRows();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\trows = rows.filter((row) => {\n\t\t\t\treturn row.type !== \"group\";\n\t\t\t});\n\t\t\t\n\t\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n\t\t}else{\n\t\t\treturn rows;\n\t\t}\n\t}\n\t\n\trowAddingIndex(row, index, top){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.assignRowToGroup(row);\n\t\t\t\n\t\t\tvar groupRows = row.modules.group.rows;\n\t\t\t\n\t\t\tif(groupRows.length > 1){\n\t\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\n\t\t\t\t\tif(top){\n\t\t\t\t\t\tif(groupRows[0] !== row){\n\t\t\t\t\t\t\tindex = groupRows[0];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn index;\n\t\t}\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"group-changed\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tsetGroupBy(groups){\n\t\tthis.table.options.groupBy = groups;\n\t\t\n\t\tif(!this.initialized){\n\t\t\tthis.initialize();\n\t\t}\n\t\t\n\t\tthis.configureGroupSetup();\n\n\t\tif(!groups && this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs === true){\n\t\t\tthis.table.modules.columnCalcs.reinitializeCalcs();\n\t\t}\n\t\t\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupValues(groupValues){\n\t\tthis.table.options.groupValues = groupValues;\n\t\tthis.configureGroupSetup();\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupStartOpen(values){\n\t\tthis.table.options.groupStartOpen = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tsetGroupHeader(values){\n\t\tthis.table.options.groupHeader = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tuserGetGroups(values){\n\t\treturn this.getGroups(true);\n\t}\n\t\n\t// get grouped table data in the same format as getData()\n\tuserGetGroupedData(){\n\t\treturn this.table.options.groupBy ? this.getGroupedData() : this.getData();\n\t}\n\t\n\t\n\t///////////////////////////////////////\n\t///////// Component Functions /////////\n\t///////////////////////////////////////\n\t\n\trowGetGroup(row){\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\trowMoving(from, to, after){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(!after && to instanceof Group){\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t\t}\n\t\t\t\n\t\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\n\t\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\n\t\t\t\n\t\t\tif(toGroup === fromGroup){\n\t\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n\t\t\t}else{\n\t\t\t\tif(fromGroup){\n\t\t\t\t\tfromGroup.removeRow(from);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttoGroup.insertRow(from, to, after);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\trowDeleting(row){\n\t\t//remove from group\n\t\tif(this.table.options.groupBy && row.modules.group){\n\t\t\trow.modules.group.removeRow(row);\n\t\t}\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.updateGroupRows(true);\n\t\t}\t\n\t}\n\t\n\tcellUpdated(cell){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.reassignRowToGroup(cell.row);\n\t\t}\n\t}\n\t\n\t//return appropriate rows with group headers\n\tgetRows(rows){\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\n\t\t\t\n\t\t\tthis.generateGroups(rows);\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n\t\t\t}\n\t\t\t\n\t\t\treturn this.updateGroupRows();\n\t\t\t\n\t\t}else{\n\t\t\treturn rows.slice(0);\n\t\t}\n\t}\n\t\n\tgetGroups(component){\n\t\tvar groupComponents = [];\n\t\t\n\t\tthis.groupList.forEach(function(group){\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\tgetChildGroups(group){\n\t\tvar groupComponents = [];\n\t\t\n\t\tif(!group){\n\t\t\tgroup = this;\n\t\t}\n\t\t\n\t\tgroup.groupList.forEach((child) => {\n\t\t\tif(child.groupList.length){\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\n\t\t\t}else{\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\twipe(){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\tpullGroupListData(groupList) {\n\t\tvar groupListData = [];\n\t\t\n\t\tgroupList.forEach((group) => {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\t\t\t\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\n\t\t\t\t\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t}\n\t\t\t\n\t\t\telse {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\t\n\t\t\t\tgroup.getRows().forEach((row) => {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupListData;\n\t}\n\t\n\tgetGroupedData(){\n\t\t\n\t\treturn this.pullGroupListData(this.groupList);\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\t\n\t\tif(this.options(\"dataTree\")){\n\t\t\trow = this.table.modules.dataTree.getTreeParentRoot(row);\n\t\t}\n\t\t\n\t\tthis.groupList.forEach((group) => {\n\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\n\t\t\tif(result){\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tcountGroups(){\n\t\treturn this.groupList.length;\n\t}\n\t\n\tgenerateGroups(rows){\n\t\tvar oldGroups = this.groups;\n\t\t\n\t\tthis.groups = {};\n\t\tthis.groupList = [];\n\t\t\n\t\tif(this.allowedValues && this.allowedValues[0]){\n\t\t\tthis.allowedValues[0].forEach((value) => {\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\n\t\t\t});\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t}else{\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t\t\n\t\tObject.values(oldGroups).forEach((group) => {\n\t\t\tgroup.wipe(true);\n\t\t});\t\n\t}\n\t\n\t\n\tcreateGroup(groupID, level, oldGroups){\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\tgroup;\n\t\t\n\t\toldGroups = oldGroups || [];\n\t\t\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\tassignRowToExistingGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tgroupKey = \"0_\" + groupID;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t}\n\t\n\tassignRowToGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\n\t\t\n\t\tif(newGroupNeeded){\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\t\t\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\t\t\n\t\treturn !newGroupNeeded;\n\t}\n\t\n\treassignRowToGroup(row){\n\t\tif(row.type === \"row\"){\n\t\t\tvar oldRowGroup = row.modules.group,\n\t\t\toldGroupPath = oldRowGroup.getPath(),\n\t\t\tnewGroupPath = this.getExpectedPath(row),\n\t\t\tsamePath;\n\t\t\t\n\t\t\t// figure out if new group path is the same as old group path\n\t\t\tsamePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\n\t\t\t\treturn element === newGroupPath[index];\n\t\t\t});\n\t\t\t\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\t\t\tif(!samePath) {\n\t\t\t\toldRowGroup.removeRow(row);\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetExpectedPath(row) {\n\t\tvar groupPath = [], rowData = row.getData();\n\t\t\n\t\tthis.groupIDLookups.forEach((groupId) => {\n\t\t\tgroupPath.push(groupId.func(rowData));\n\t\t});\n\t\t\n\t\treturn groupPath;\n\t}\n\t\n\tupdateGroupRows(force){\n\t\tvar output = [];\n\n\t\tif(!this.blockRedraw){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tscrollHeaders(left){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\n\t\t\t}\n\t\t\t\n\t\t\tleft = left + \"px\";\n\t\t\t\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tgroup.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcheckBasicModeGroupHeaderWidth(){\n\t\tvar element = this.table.rowManager.tableElement,\n\t\tonlyGroupHeaders = true;\n\t\t\n\t\tthis.table.rowManager.getDisplayRows().forEach((row, index) =>{\n\t\t\tthis.table.rowManager.styleRow(row, index);\n\t\t\telement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\t\t\t\n\t\t\tif(row.type !== \"group\"){\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n}\n\nGroupRows.moduleName = \"groupRows\";\n\nexport default GroupRows;","import Module from '../../core/Module.js';\nimport Row from '../../core/row/Row.js';\nimport Cell from '../../core/cell/Cell.js';\n\nimport defaultUndoers from './defaults/undoers.js';\nimport defaultRedoers from './defaults/redoers.js';\n\nclass History extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.history){\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n\t}\n\n\trowMoved(from, to, after){\n\t\tthis.action(\"rowMove\", from, {posFrom:from.getPosition(), posTo:to.getPosition(), to:to, after:after});\n\t}\n\n\trowAdded(row, data, pos, index){\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\n\t}\n\n\trowDeleted(row){\n\t\tvar index, rows;\n\n\t\tif(this.table.options.groupBy){\n\n\t\t\trows = row.getComponent().getGroup()._getSelf().rows;\n\t\t\tindex = rows.indexOf(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = rows[index-1];\n\t\t\t}\n\t\t}else{\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\n\t\t\t}\n\t\t}\n\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\n\t}\n\n\tcellUpdated(cell){\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\n\t}\n\n\tclear(){\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t}\n\n\taction(type, component, data){\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype:type,\n\t\t\tcomponent:component,\n\t\t\tdata:data,\n\t\t});\n\n\t\tthis.index ++;\n\t}\n\n\tgetHistoryUndoSize(){\n\t\treturn this.index + 1;\n\t}\n\n\tgetHistoryRedoSize(){\n\t\treturn this.history.length - (this.index + 1);\n\t}\n\n\tclearComponentHistory(component){\n\t\tvar index = this.history.findIndex(function(item){\n\t\t\treturn item.component === component;\n\t\t});\n\n\t\tif(index > -1){\n\t\t\tthis.history.splice(index, 1);\n\t\t\tif(index <= this.index){\n\t\t\t\tthis.index--;\n\t\t\t}\n\n\t\t\tthis.clearComponentHistory(component);\n\t\t}\n\t}\n\n\tundo(){\n\t\tif(this.index > -1){\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tredo(){\n\t\tif(this.history.length-1 > this.index){\n\n\t\t\tthis.index++;\n\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.redoers[action.type].call(this, action);\n\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//rebind rows to new element after deletion\n\t_rebindRow(oldRow, newRow){\n\t\tthis.history.forEach(function(action){\n\t\t\tif(action.component instanceof Row){\n\t\t\t\tif(action.component === oldRow){\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t}else if(action.component instanceof Cell){\n\t\t\t\tif(action.component.row === oldRow){\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif(field){\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nHistory.moduleName = \"history\";\n\n//load defaults\nHistory.undoers = defaultUndoers;\nHistory.redoers = defaultRedoers;\n\nexport default History;","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowDelete: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowMove: function(action){\n\t\tvar after = (action.data.posFrom  - action.data.posTo) > 0;\n\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posFrom), after);\n\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.newValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowDelete:function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posTo), action.data.after);\n\t\t\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};","import Module from '../../core/Module.js';\n\nclass HtmlTableImport extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t}\n\n\tinitialize(){\n\t\tthis.tableElementCheck();\n\t}\n\n\ttableElementCheck(){\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\n\t\t\tif(this.table.originalElement.childNodes.length){\n\t\t\t\tthis.parseTable();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n\t\t\t}\n\t\t}\n\t}\n\n\tparseTable(){\n\t\tvar element = this.table.originalElement,\n\t\toptions = this.table.options,\n\t\theaders = element.getElementsByTagName(\"th\"),\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\n\t\tdata = [];\n\n\t\tthis.hasIndex = false;\n\n\t\tthis.dispatchExternal(\"htmlImporting\");\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for Tabulator inline options\n\t\tthis._extractOptions(element, options);\n\n\t\tif(headers.length){\n\t\t\tthis._extractHeaders(headers, rows);\n\t\t}else{\n\t\t\tthis._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor(var index = 0; index < rows.length; index++){\n\t\t\tvar row = rows[index],\n\t\t\tcells = row.getElementsByTagName(\"td\"),\n\t\t\titem = {};\n\n\t\t\t//create index if the don't exist in table\n\t\t\tif(!this.hasIndex){\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\toptions.data = data;\n\n\t\tthis.dispatchExternal(\"htmlImported\");\n\t}\n\n\t//extract tabulator attribute options\n\t_extractOptions(element, options, defaultOptions){\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach((item) => {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor(var index in attributes){\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//get value of attribute\n\t_attribValue(value){\n\t\tif(value === \"true\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(value === \"false\"){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t//find column if it has already been defined\n\t_findCol(title){\n\t\tvar match = this.table.options.columns.find((column) => {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t}\n\n\t//extract column from headers\n\t_extractHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\texists = false,\n\t\t\tcol = this._findCol(header.textContent),\n\t\t\twidth;\n\n\t\t\tif(col){\n\t\t\t\texists = true;\n\t\t\t}else{\n\t\t\t\tcol = {title:header.textContent.trim()};\n\t\t\t}\n\n\t\t\tif(!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replaceAll(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif(width && !col.width)\t{\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for Tabulator inline options\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif(col.field == this.table.options.index){\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif(!exists){\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\n\t\t}\n\t}\n\n\t//generate blank headers\n\t_generateBlankHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\tcol = {title:\"\", field:\"col\" + index};\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif(width){\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t}\n}\n\nHtmlTableImport.moduleName = \"htmlTableImport\";\n\nexport default HtmlTableImport;\n","import csv from './importers/csv.js';\nimport json from './importers/json.js';\nimport array from './importers/array.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tarray:array,\n};","function csvImporter(input){\n\tvar data = [],\n\trow = 0, \n\tcol = 0,\n\tinQuote = false;\n    \n\t//Iterate over each character\n\tfor (let index = 0; index < input.length; index++) {\n\t\tlet char = input[index], \n\t\tnextChar = input[index+1];      \n        \n\t\t//Initialize empty row\n\t\tif(!data[row]){\n\t\t\tdata[row] = [];\n\t\t}\n\n\t\t//Initialize empty column\n\t\tif(!data[row][col]){\n\t\t\tdata[row][col] = \"\";\n\t\t}\n        \n\t\t//Handle quotation mark inside string\n\t\tif (char == '\"' && inQuote && nextChar == '\"') { \n\t\t\tdata[row][col] += char; \n\t\t\tindex++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//Begin / End Quote\n\t\tif (char == '\"') { \n\t\t\tinQuote = !inQuote;\n\t\t\tcontinue;\n\t\t}\n        \n\t\t//Next column (if not in quote)\n\t\tif (char == ',' && !inQuote) { \n\t\t\tcol++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CRLF) \n\t\tif (char == '\\r' && nextChar == '\\n' && !inQuote) { \n\t\t\tcol = 0; \n\t\t\trow++; \n\t\t\tindex++; \n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CR or LF) \n\t\tif ((char == '\\r' || char == '\\n') && !inQuote) { \n\t\t\tcol = 0;\n\t\t\trow++;\n\t\t\tcontinue; \n\t\t}\n\n\t\t//Normal Character, append to column\n\t\tdata[row][col] += char;\n\t}\n\n\treturn data;\n}\n\nexport default csvImporter;","export default function(input){\n\ttry {\n\t\treturn JSON.parse(input);\n\t} catch(e) {\n\t\tconsole.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n\t\treturn Promise.reject();\n\t}\n}","function arrayImporter(input){\n\treturn input;\n}\n\nexport default arrayImporter;","import Module from '../../core/Module.js';\n\nimport defaultImporters from './defaults/importers.js';\n\nclass Import extends Module{\n    \n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.registerTableOption(\"importFormat\");\n\t\tthis.registerTableOption(\"importReader\", \"text\");\n\t}\n    \n\tinitialize(){\n\t\tthis.registerTableFunction(\"import\", this.importFromFile.bind(this));\n\n\t\tif(this.table.options.importFormat){\n\t\t\tthis.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n\t\t\tthis.subscribe(\"data-load\", this.loadData.bind(this), 10);\n\t\t}\n\t}\n\n\tloadDataCheck(data){\n\t\treturn this.table.options.importFormat && (typeof data === \"string\" || (Array.isArray(data) && data.length && Array.isArray(data)));\n\t}\n\n\tloadData(data, params, config, silent, previousData){\n\t\treturn this.importData(this.lookupImporter(), data)\n\t\t\t.then(this.structureData.bind(this))\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import data\");\n\t\t\t\treturn Promise.reject(err);\n\t\t\t});\n\t}\n\n\tlookupImporter(importFormat){\n\t\tvar importer;\n        \n\t\tif(!importFormat){\n\t\t\timportFormat = this.table.options.importFormat;\n\t\t}\n        \n\t\tif(typeof importFormat === \"string\"){\n\t\t\timporter = Import.importers[importFormat];\n\t\t}else{\n\t\t\timporter = importFormat;\n\t\t}\n\n\t\tif(!importer){\n\t\t\tconsole.error(\"Import Error - Importer not found:\", importFormat);\n\t\t}\n        \n\t\treturn importer;\n\t}\n    \n\timportFromFile(importFormat, extension){\n\t\tvar importer = this.lookupImporter(importFormat);\n        \n\t\tif(importer){\n\t\t\treturn this.pickFile(extension)\n\t\t\t\t.then(this.importData.bind(this, importer))\n\t\t\t\t.then(this.structureData.bind(this))\n\t\t\t\t.then(this.setData.bind(this))\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import file\");\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t});\n\t\t}\n\t}\n    \n\tpickFile(extensions){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.type = \"file\";\n\t\t\tinput.accept = extensions;\n            \n\t\t\tinput.addEventListener(\"change\", (e) => {\n\t\t\t\tvar file = input.files[0],\n\t\t\t\treader = new FileReader();\n                \n\t\t\t\tswitch(this.table.options.importReader){\n\t\t\t\t\tcase \"buffer\":\n\t\t\t\t\t\treader.readAsArrayBuffer(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"binary\":\n\t\t\t\t\t\treader.readAsBinaryString(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treader.readAsText(file);\n\t\t\t\t}\n                  \n\t\t\t\treader.onload = (e) => {\n\t\t\t\t\tresolve(reader.result);\n\t\t\t\t};\n                \n\t\t\t\treader.onerror = (e) => {\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t});\n            \n\t\t\tinput.click();\n\t\t});\n\t}\n    \n\timportData(importer, fileContents){\n\t\tvar data = importer.call(this.table, fileContents);\n        \n\t\tif(data instanceof Promise){\n\t\t\treturn data;\n\t\t}else{\n\t\t\treturn data ? Promise.resolve(data) : Promise.reject();\n\t\t}\n\t}\n\n\tstructureData(parsedData){\n\t\tvar data = [];\n        \n\t\tif(Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])){\n\t\t\tif(this.table.options.autoColumns){\n\t\t\t\tdata = this.structureArrayToObject(parsedData);\n\t\t\t}else{\n\t\t\t\tdata = this.structureArrayToColumns(parsedData);\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}else{\n\t\t\treturn parsedData;\n\t\t}\n\t}\n\n\tstructureArrayToObject(parsedData){\n\t\tvar columns = parsedData.shift();\n\n\t\tvar data = parsedData.map((values) => {\n\t\t\tvar row = {};\n\n\t\t\tcolumns.forEach((key, i) => {\n\t\t\t\trow[key] = values[i];\n\t\t\t});\n\n\t\t\treturn row;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tstructureArrayToColumns(parsedData){\n\t\tvar data = [],\n\t\tcolumns = this.table.getColumns();\n\n\t\t//remove first row if it is the column names\n\t\tif(columns[0] && parsedData[0][0]){\n\t\t\tif(columns[0].getDefinition().title === parsedData[0][0]){\n\t\t\t\tparsedData.shift();\n\t\t\t}\n\t\t}\n        \n\t\t//convert row arrays to objects\n\t\tparsedData.forEach((rowData) => {\n\t\t\tvar row = {};\n\n\t\t\trowData.forEach((value, index) => {\n\t\t\t\tvar column = columns[index];\n\n\t\t\t\tif(column){\n\t\t\t\t\trow[column.getField()] = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdata.push(row);\n\t\t});\n\n\t\treturn data;\n\t}\n    \n\tsetData(data){\n\t\treturn this.table.setData(data);\n\t}\n}\n\nImport.moduleName = \"import\";\n\n//load defaults\nImport.importers = defaultImporters;\n\nexport default Import;","import Module from '../../core/Module.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\n\nclass Interaction extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.eventMap = {\n\t\t\t//row events\n\t\t\trowClick:\"row-click\",\n\t\t\trowDblClick:\"row-dblclick\",\n\t\t\trowContext:\"row-contextmenu\",\n\t\t\trowMouseEnter:\"row-mouseenter\",\n\t\t\trowMouseLeave:\"row-mouseleave\",\n\t\t\trowMouseOver:\"row-mouseover\",\n\t\t\trowMouseOut:\"row-mouseout\",\n\t\t\trowMouseMove:\"row-mousemove\",\n\t\t\trowMouseDown:\"row-mousedown\",\n\t\t\trowMouseUp:\"row-mouseup\",\n\t\t\trowTap:\"row\",\n\t\t\trowDblTap:\"row\",\n\t\t\trowTapHold:\"row\",\n\n\t\t\t//cell events\n\t\t\tcellClick:\"cell-click\",\n\t\t\tcellDblClick:\"cell-dblclick\",\n\t\t\tcellContext:\"cell-contextmenu\",\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\n\t\t\tcellMouseOver:\"cell-mouseover\",\n\t\t\tcellMouseOut:\"cell-mouseout\",\n\t\t\tcellMouseMove:\"cell-mousemove\",\n\t\t\tcellMouseDown:\"cell-mousedown\",\n\t\t\tcellMouseUp:\"cell-mouseup\",\n\t\t\tcellTap:\"cell\",\n\t\t\tcellDblTap:\"cell\",\n\t\t\tcellTapHold:\"cell\",\n\n\t\t\t//column header events\n\t\t\theaderClick:\"column-click\",\n\t\t\theaderDblClick:\"column-dblclick\",\n\t\t\theaderContext:\"column-contextmenu\",\n\t\t\theaderMouseEnter:\"column-mouseenter\",\n\t\t\theaderMouseLeave:\"column-mouseleave\",\n\t\t\theaderMouseOver:\"column-mouseover\",\n\t\t\theaderMouseOut:\"column-mouseout\",\n\t\t\theaderMouseMove:\"column-mousemove\",\n\t\t\theaderMouseDown:\"column-mousedown\",\n\t\t\theaderMouseUp:\"column-mouseup\",\n\t\t\theaderTap:\"column\",\n\t\t\theaderDblTap:\"column\",\n\t\t\theaderTapHold:\"column\",\n\n\t\t\t//group header\n\t\t\tgroupClick:\"group-click\",\n\t\t\tgroupDblClick:\"group-dblclick\",\n\t\t\tgroupContext:\"group-contextmenu\",\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\n\t\t\tgroupMouseOver:\"group-mouseover\",\n\t\t\tgroupMouseOut:\"group-mouseout\",\n\t\t\tgroupMouseMove:\"group-mousemove\",\n\t\t\tgroupMouseDown:\"group-mousedown\",\n\t\t\tgroupMouseUp:\"group-mouseup\",\n\t\t\tgroupTap:\"group\",\n\t\t\tgroupDblTap:\"group\",\n\t\t\tgroupTapHold:\"group\",\n\t\t};\n\n\t\tthis.subscribers = {};\n\n\t\tthis.touchSubscribers = {};\n\n\t\tthis.columnSubscribers = {};\n\n\t\tthis.touchWatchers = {\n\t\t\trow:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcell:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcolumn:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tgroup:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t}\n\t\t};\n\n\t\tthis.registerColumnOption(\"headerClick\");\n\t\tthis.registerColumnOption(\"headerDblClick\");\n\t\tthis.registerColumnOption(\"headerContext\");\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\n\t\tthis.registerColumnOption(\"headerMouseOver\");\n\t\tthis.registerColumnOption(\"headerMouseOut\");\n\t\tthis.registerColumnOption(\"headerMouseMove\");\n\t\tthis.registerColumnOption(\"headerMouseDown\");\n\t\tthis.registerColumnOption(\"headerMouseUp\");\n\t\tthis.registerColumnOption(\"headerTap\");\n\t\tthis.registerColumnOption(\"headerDblTap\");\n\t\tthis.registerColumnOption(\"headerTapHold\");\n\n\t\tthis.registerColumnOption(\"cellClick\");\n\t\tthis.registerColumnOption(\"cellDblClick\");\n\t\tthis.registerColumnOption(\"cellContext\");\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\n\t\tthis.registerColumnOption(\"cellMouseOver\");\n\t\tthis.registerColumnOption(\"cellMouseOut\");\n\t\tthis.registerColumnOption(\"cellMouseMove\");\n\t\tthis.registerColumnOption(\"cellMouseDown\");\n\t\tthis.registerColumnOption(\"cellMouseUp\");\n\t\tthis.registerColumnOption(\"cellTap\");\n\t\tthis.registerColumnOption(\"cellDblTap\");\n\t\tthis.registerColumnOption(\"cellTapHold\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.initializeExternalEvents();\n\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.clearTouchWatchers.bind(this));\n\t\tthis.subscribe(\"scroll-vertical\", this.clearTouchWatchers.bind(this));\n\t}\n\n\tclearTouchWatchers(){\n\t\tvar types = Object.values(this.touchWatchers);\n\n\t\ttypes.forEach((type) => {\n\t\t\tfor(let key in type){\n\t\t\t\ttype[key] = null;\n\t\t\t}\n\t\t});\n\t}\n\t\t\n\tcellContentsSelectionFixer(e, cell){\n\t\tvar range;\n\n\t\tif(this.table.modExists(\"edit\")){\n\t\t\tif (this.table.modules.edit.currentCell === cell){\n\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\n\tinitializeExternalEvents(){\n\t\tfor(let key in this.eventMap){\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\n\t\t}\n\t}\n\n\tsubscriptionChanged(key, added){\n\t\tif(added){\n\t\t\tif(!this.subscribers[key]){\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.subscribeTouchEvents(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t\tdelete this.subscribers[key];\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.unsubscribeTouchEvents(key);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsubscribeTouchEvents(key){\n\t\tvar type = this.eventMap[key];\n\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\t\t}\n\n\t\tthis.subscribers[key] = true;\n\t}\n\n\tunsubscribeTouchEvents(key){\n\t\tvar noTouch = true,\n\t\ttype = this.eventMap[key];\n\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\n\t\t\tdelete this.subscribers[key];\n\n\t\t\tfor(let i in this.eventMap){\n\t\t\t\tif(this.eventMap[i] === type){\n\t\t\t\t\tif(this.subscribers[i]){\n\t\t\t\t\t\tnoTouch = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(noTouch){\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\n\t\tfor(let key in this.eventMap){\n\t\t\tif(def[key]){\n\t\t\t\tthis.subscriptionChanged(key, true);\n\n\t\t\t\tif(!this.columnSubscribers[key]){\n\t\t\t\t\tthis.columnSubscribers[key] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.columnSubscribers[key].push(column);\n\t\t\t}\n\t\t}\n\t}\n\n\thandle(action, e, component){\n\t\tthis.dispatchEvent(action, e, component);\n\t}\n\n\thandleTouch(type, action, e, component){\n\t\tvar watchers = this.touchWatchers[type];\n\n\t\tif(type === \"column\"){\n\t\t\ttype = \"header\";\n\t\t}\n\n\t\tswitch(action){\n\t\t\tcase \"start\":\n\t\t\t\twatchers.tap = true;\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\n\t\t\t\twatchers.tapHold = setTimeout(() => {\n\t\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\t\twatchers.tapHold = null;\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\n\t\t\t\t}, 1000);\n\t\t\t\tbreak;\n\n\t\t\tcase \"end\":\n\t\t\t\tif(watchers.tap){\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\n\t\t\t\t}\n\n\t\t\t\tif(watchers.tapDbl){\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\n\t\t\t\t}else{\n\t\t\t\t\twatchers.tapDbl = setTimeout(() => {\n\t\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\t\twatchers.tapDbl = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\twatchers.tapHold = null;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tdispatchEvent(action, e, component){\n\t\tvar componentObj = component.getComponent(),\n\t\tcallback;\n\n\t\tif(this.columnSubscribers[action]){\n\n\t\t\tif(component instanceof Cell){\n\t\t\t\tcallback = component.column.definition[action];\n\t\t\t}else if(component instanceof Column){\n\t\t\t\tcallback = component.definition[action];\n\t\t\t}\n\n\t\t\tif(callback){\n\t\t\t\tcallback(e, componentObj);\n\t\t\t}\n\t\t}\n\n\t\tthis.dispatchExternal(action, e, componentObj);\n\t}\n}\n\nInteraction.moduleName = \"interaction\";\n\nexport default Interaction;\n","import Module from '../../core/Module.js';\n\nimport defaultBindings from './defaults/bindings.js';\nimport defaultActions from './defaults/actions.js';\n\nclass Keybindings extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\n\t\tthis.registerTableOption(\"keybindings\", {}); //array for keybindings\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n\t}\n\n\tinitialize(){\n\t\tvar bindings = this.table.options.keybindings,\n\t\tmergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif(bindings !== false){\n\t\t\tObject.assign(mergedBindings, Keybindings.bindings);\n\t\t\tObject.assign(mergedBindings, bindings);\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t}\n\n\tmapBindings(bindings){\n\t\tfor(let key in bindings){\n\t\t\tif(Keybindings.actions[key]){\n\t\t\t\tif(bindings[key]){\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach((binding) => {\n\t\t\t\t\t\tvar bindingList = Array.isArray(binding) ?  binding : [binding];\n\t\t\t\t\t\t\n\t\t\t\t\t\tbindingList.forEach((item) => {\n\t\t\t\t\t\t\tthis.mapBinding(key, item);\n\t\t\t\t\t\t});\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t}\n\t}\n\n\tmapBinding(action, symbolsList){\n\t\tvar binding = {\n\t\t\taction: Keybindings.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false,\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach((symbol) => {\n\t\t\tswitch(symbol){\n\t\t\t\tcase \"ctrl\":\n\t\t\t\t\tbinding.ctrl = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\t\tbinding.shift = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\t\tbinding.meta = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsymbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n\t\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\t\tif(!this.watchKeys[symbol]){\n\t\t\t\t\t\tthis.watchKeys[symbol] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t}\n\n\tbindEvents(){\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function(binding){\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t}\n\n\tclearBindings(){\n\t\tif(this.keyupBinding){\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif(this.keydownBinding){\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t}\n\n\tcheckBinding(e, binding){\n\t\tvar match = true;\n\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\n\t\t\tbinding.keys.forEach((key) => {\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\n\n\t\t\t\tif(index == -1){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tbinding.action.call(this, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nKeybindings.moduleName = \"keybindings\";\n\n//load defaults\nKeybindings.bindings = defaultBindings;\nKeybindings.actions = defaultActions;\n\nexport default Keybindings;","export default {\n\tnavPrev:\"shift + 9\",\n\tnavNext:9,\n\tnavUp:38,\n\tnavDown:40,\n\tscrollPageUp:33,\n\tscrollPageDown:34,\n\tscrollToStart:36,\n\tscrollToEnd:35,\n\tundo:[\"ctrl + 90\", \"meta + 90\"],\n\tredo:[\"ctrl + 89\", \"meta + 89\"],\n\tcopyToClipboard:[\"ctrl + 67\", \"meta + 67\"],\n};","export default {\n\tkeyBlock:function(e){\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t},\n\tscrollPageUp:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos >= 0){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollPageDown:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\n\t\tscrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos <= scrollMax){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\n\t},\n\tscrollToStart:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollToEnd:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tnavPrev:function(e){\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\n\t},\n\n\tnavNext:function(e){\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\n\t},\n\n\tnavLeft:function(e){\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\n\t},\n\n\tnavRight:function(e){\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\n\t},\n\n\tnavUp:function(e){\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\n\t},\n\n\tnavDown:function(e){\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\n\t},\n\n\tundo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.undo();\n\t\t\t}\n\t\t}\n\t},\n\n\tredo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.redo();\n\t\t\t}\n\t\t}\n\t},\n\n\tcopyToClipboard:function(e){\n\t\tif(!this.table.modules.edit.currentCell){\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\n\t\t\t}\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nclass Menu extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.menuContainer = null;\n\t\tthis.nestedMenuBlock = false;\n\t\t\n\t\tthis.currentComponent = null;\n\t\tthis.rootPopup = null;\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"menuContainer\", undefined); //deprecated\n\t\t\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\n\t\tthis.registerTableOption(\"rowDblClickMenu\", false);\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\n\t\tthis.registerTableOption(\"groupDblClickMenu\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextMenu\");\n\t\tthis.registerColumnOption(\"headerClickMenu\");\n\t\tthis.registerColumnOption(\"headerDblClickMenu\");\n\t\tthis.registerColumnOption(\"headerMenu\");\n\t\tthis.registerColumnOption(\"headerMenuIcon\");\n\t\tthis.registerColumnOption(\"contextMenu\");\n\t\tthis.registerColumnOption(\"clickMenu\");\n\t\tthis.registerColumnOption(\"dblClickMenu\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\tif(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\n\t\t\tthis.table.options.popupContainer = this.table.options.menuContainer;\n\t\t}\n\t}\t\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextMenu){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickMenu){\n\t\t\tthis.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowDblClickMenu){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextMenu){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickMenu){\n\t\t\tthis.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupDblClickMenu){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar\tdef = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextMenu && !this.columnSubscribers.headerContextMenu){\n\t\t\tthis.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickMenu && !this.columnSubscribers.headerClickMenu){\n\t\t\tthis.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu){\n\t\t\tthis.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerMenu){\n\t\t\tthis.initializeColumnHeaderMenu(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextMenu && !this.columnSubscribers.contextMenu){\n\t\t\tthis.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.clickMenu && !this.columnSubscribers.clickMenu){\n\t\t\tthis.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n\t\t}\n\t\t\n\t\tif(def.dblClickMenu && !this.columnSubscribers.dblClickMenu){\n\t\t\tthis.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\");\n\t\t\tthis.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderMenu(column){\n\t\tvar icon = column.definition.headerMenuIcon,\n\t\theaderMenuEl;\n\t\t\n\t\theaderMenuEl = document.createElement(\"span\");\n\t\theaderMenuEl.classList.add(\"tabulator-header-popup-button\");\n\t\t\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderMenuEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderMenuEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderMenuEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadMenuEvent(column.definition.headerMenu, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadMenuTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadMenuEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadMenuTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadMenuEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadMenuEvent(menu, e, component){\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n\t\t\n\t\tthis.loadMenu(e, component, menu);\n\t}\n\t\n\tloadMenu(e, component, menu, parentEl, parentPopup){\n\t\tvar touch = !(e instanceof MouseEvent),\t\t\n\t\tmenuEl = document.createElement(\"div\"),\n\t\tpopup;\n\t\t\n\t\tmenuEl.classList.add(\"tabulator-menu\");\n\t\t\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\t//abort if no menu set\n\t\tif(!menu || !menu.length){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!parentEl){\n\t\t\tif(this.nestedMenuBlock){\n\t\t\t\t//abort if child menu already open\n\t\t\t\tif(this.rootPopup){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\n\t\t\t\t\tthis.nestedMenuBlock = false;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.rootPopup = popup = this.popup(menuEl);\n\t\t\t\n\t\t}else{\n\t\t\tpopup = parentPopup.child(menuEl);\n\t\t}\n\t\t\n\t\tmenu.forEach((item) => {\n\t\t\tvar itemEl = document.createElement(\"div\"),\n\t\t\tlabel = item.label,\n\t\t\tdisabled = item.disabled;\n\t\t\t\n\t\t\tif(item.separator){\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t}else{\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\t\t\t\t\n\t\t\t\tif(typeof label == \"function\"){\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(label instanceof Node){\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(typeof disabled == \"function\"){\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(disabled){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl, popup);\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(item.action){\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tmenuEl.appendChild(itemEl);\n\t\t});\n\t\t\n\t\tmenuEl.addEventListener(\"click\", (e) => {\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\n\t\t\t}\n\t\t});\n\t\t\n\t\tpopup.show(parentEl || e);\n\t\t\n\t\tif(popup === this.rootPopup){\n\t\t\tthis.rootPopup.hideOnBlur(() => {\n\t\t\t\tthis.rootPopup = null;\n\t\t\t\t\n\t\t\t\tif(this.currentComponent){\n\t\t\t\t\tthis.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n\t\t\t\t\tthis.currentComponent = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.currentComponent = component;\n\t\t\t\n\t\t\tthis.dispatchExternal(\"menuOpened\", component.getComponent());\n\t\t}\n\t}\n}\n\nMenu.moduleName = \"menu\";\n\nexport default Menu;\n","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nclass MoveColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the destination column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\t\t\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\n\t}\n\t\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.movableColumns){\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\tcolEl;\n\t\t\n\t\tif(!column.modules.frozen && !column.isGroup){\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tconfig.mousemove = function(e){\n\t\t\t\tif(column.parent === self.moving.parent){\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.contentsElement.scrollLeft) > (column.getWidth() / 2)){\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\t\t\n\t\tcolumn.modules.moveColumn = config;\n\t}\n\t\n\tbindTouchEvents(column){\n\t\tvar colEl = column.getElement(),\n\t\tstartXMove = false, //shifting center position of the cell\n\t\tnextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\n\t\t\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\t\t\t\t\n\t\t\t\tthis.startMove(e, column);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\n\t\t\tvar diff, moveToCol;\n\t\t\t\n\t\t\tif(this.moving){\n\t\t\t\tthis.moveHover(e);\n\t\t\t\t\n\t\t\t\tif(!startXMove){\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\t\t\t\t\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\n\t\t\t\t\t\tmoveToCol = nextCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\n\t\t\t\t\t\tmoveToCol = prevCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(moveToCol){\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartMove(e, column){\n\t\tvar element = column.getElement(),\n\t\theaderElement = this.table.columnManager.getContentsElement(),\n\t\theadersElement = this.table.columnManager.getHeadersElement();\n\t\t\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n\t\t\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\t\t\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\t\t\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\t\t\n\t\theaderElement.appendChild(this.hoverElement);\n\t\t\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\n\t\t\n\t\tif(!this.touchMove){\n\t\t\tthis._bindMouseMove();\n\t\t\t\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\t\t\n\t\tthis.moveHover(e);\n\t}\n\t\n\t_bindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_unbindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tmoveColumn(column, after){\n\t\tvar movingCells = this.moving.getCells();\n\t\t\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\t\t\n\t\tif(after){\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tendMove(e){\n\t\tif(e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\t\t\t\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\t\t\t\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(this.toCol){\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\t\t\t\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\t\t\t\n\t\t\tif(!this.touchMove){\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmoveHover(e){\n\t\tvar columnHolder = this.table.columnManager.getContentsElement(),\n\t\tscrollLeft = columnHolder.scrollLeft,\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\n\t\tscrollPos;\n\t\t\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\n\t\t\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nMoveColumns.moduleName = \"moveColumn\";\n\nexport default MoveColumns;\n","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nclass MoveRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the destination row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connectionSelectorsTables = false;\n\t\tthis.connectionSelectorsElements = false;\n\t\tthis.connectionElements = [];\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\n\n\t\tthis.registerColumnOption(\"rowHandle\");\n\t}\n\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.movableRows){\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeGroupHeader(group){\n\t\tvar self = this,\n\t\tconfig = {};\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, group);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl;\n\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\tif(rowEl.previousSibling){\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\trowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\n\t\tif(!this.hasHandle){\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tthis.hasHandle = true;\n\t\t}\n\t}\n\n\tinitializeCell(cell){\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tvar self = this,\n\t\t\tcellEl = cell.getElement(true);\n\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\n\t\t}\n\t}\n\n\tbindTouchEvents(row, element){\n\t\tvar startYMove = false, //shifting center position of the cell\n\t\tnextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tthis.startMove(e, row);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\tthis.moving, this.toRow, this.toRowAfter;\n\t\telement.addEventListener(\"touchmove\", (e) => {\n\n\t\t\tvar diff, moveToRow;\n\n\t\t\tif(this.moving){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.moveHover(e);\n\n\t\t\t\tif(!startYMove){\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(moveToRow){\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t\tthis.touchMove = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t_bindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\t_unbindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\tstartMove(e, row){\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif(!this.connection){\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t}else{\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif(this.connection){\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t}else{\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.dispatchExternal(\"rowMoving\", row.getComponent());\n\n\t\tthis.moveHover(e);\n\t}\n\n\tsetStartPosition(e, row){\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\telement, position;\n\n\t\telement = row.getElement();\n\t\tif(this.connection){\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t}else{\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\n\t\t}\n\t}\n\n\tendMove(e){\n\t\tif(!e || e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif(!this.connection){\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif(this.toRow){\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif(this.connection){\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t}\n\n\tmoveRow(row, after){\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t}\n\n\tmoveHover(e){\n\t\tif(this.connection){\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t}else{\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t}\n\n\tmoveHoverTable(e){\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\tscrollTop = rowHolder.scrollTop,\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop;\n\t\t\n\t\tthis.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n\t}\n\n\tmoveHoverConnections(e){\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\n\t}\n\n\telementRowDrop(e, element, row){\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n\t}\n\n\t//establish connection with other tables\n\tconnectToTables(row){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\t\trow:row,\n\t\t\t});\n\t\t}\n\n\t\tif(this.connectionSelectorsElements){\n\n\t\t\tthis.connectionElements = [];\n\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t\t}\n\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\n\t\t\t\tif(typeof query === \"string\"){\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t\t}else{\n\t\t\t\t\tthis.connectionElements.push(query);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.connectionElements.forEach((element) => {\n\t\t\t\tvar dropEvent = (e) => {\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t\t});\n\t\t}\n\t}\n\n\t//disconnect from other tables\n\tdisconnectFromTables(){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t\t}\n\n\t\tthis.connectionElements.forEach((element) => {\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\t\tdelete element.tabulatorElementDropEvent;\n\t\t});\n\t}\n\n\t//accept incomming connection\n\tconnect(table, row){\n\t\tif(!this.connectedTable){\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\n\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//close incoming connection\n\tdisconnect(table){\n\t\tif(table === this.connectedTable){\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t\t}\n\t}\n\n\tdropComplete(table, row, success){\n\t\tvar sender = false;\n\n\t\tif(success){\n\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(sender){\n\t\t\t\tsender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\n\t\t\t}else{\n\t\t\t\tif(this.table.options.movableRowsSender){\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t}\n\n\ttableRowDrop(e, row){\n\t\tvar receiver = false,\n\t\tsuccess = false;\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\n\t\t\tcase \"string\":\n\t\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(receiver){\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t\t}\n\n\t\tif(success){\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow:row,\n\t\t\tsuccess:success,\n\t\t});\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"connect\":\n\t\t\t\treturn this.connect(table, data.row);\n\n\t\t\tcase \"disconnect\":\n\t\t\t\treturn this.disconnect(table);\n\n\t\t\tcase \"dropcomplete\":\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t}\n\t}\n}\n\nMoveRows.prototype.receivers = {\n\tinsert:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\treturn true;\n\t},\n\n\tadd:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData());\n\t\treturn true;\n\t},\n\n\tupdate:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\ttoRow.update(fromRow.getData());\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\treplace:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\ttoRow.delete();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n};\n\nMoveRows.prototype.senders = {\n\tdelete:function(fromRow, toRow, toTable){\n\t\tfromRow.delete();\n\t}\n};\n\nMoveRows.moduleName = \"moveRow\";\n\nexport default MoveRows;","import Module from '../../core/Module.js';\n\nimport defaultMutators from './defaults/mutators.js';\n\nclass Mutator extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of mutation types\n\t\tthis.enabled = true;\n\n\t\tthis.registerColumnOption(\"mutator\");\n\t\tthis.registerColumnOption(\"mutatorParams\");\n\t\tthis.registerColumnOption(\"mutatorData\");\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\n\t\tthis.registerColumnOption(\"mutatorEdit\");\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\n\t\tthis.registerColumnOption(\"mutateLink\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n\t}\n\n\trowDataChanged(row, tempData, updatedData){\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\n\t}\n\n\t//initialize column mutator\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\tmutator;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\n\n\t\t\t\tif(mutator){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator:mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t}\n\n\tlookupMutator(value){\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Mutator.mutators[value]){\n\t\t\t\t\tmutator = Mutator.mutators[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tmutator = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t}\n\n\t//apply mutator to row\n\ttransformRow(data, type, updatedData){\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\tvalue;\n\n\t\tif(this.enabled){\n\n\t\t\tthis.table.columnManager.traverse((column) => {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif(column.modules.mutate){\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif(mutator){\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif((type == \"data\" && !updatedData)|| typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//apply mutator to new cell value\n\ttransformCell(cell, value){\n\t\tif(cell.column.modules.mutate){\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t\ttempData = {};\n\n\t\t\tif(mutator){\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tmutateLink(cell){\n\t\tvar links = cell.column.definition.mutateLink;\n\n\t\tif(links){\n\t\t\tif(!Array.isArray(links)){\n\t\t\t\tlinks = [links];\n\t\t\t}\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\tvar linkCell = cell.row.getCell(link);\n\n\t\t\t\tif(linkCell){\n\t\t\t\t\tlinkCell.setValue(linkCell.getValue(), true, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tenable(){\n\t\tthis.enabled = true;\n\t}\n\n\tdisable(){\n\t\tthis.enabled = false;\n\t}\n}\n\nMutator.moduleName = \"mutator\";\n\n//load defaults\nMutator.mutators = defaultMutators;\n\nexport default Mutator;","export default {};","import rows from './pageCounters/rows.js';\nimport pages from './pageCounters/pages.js';\n\n\nexport default {\n\trows:rows,\n\tpages:pages,\n};","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|rows\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\n\tif(totalRows){\n\t\tvalueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min((currentRow + pageSize - 1), totalRows) + \" \";\n\t\t\n\t\ttotalEl.innerHTML = \" \" + totalRows + \" \";\n\t\t\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(ofEl);\n\t\tel.appendChild(totalEl);\n\t\tel.appendChild(rowsEl);\n\t}else{\n\t\tvalueEl.innerHTML = \" 0 \";\n\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(rowsEl);\n\t}\n\t\n\treturn el;\n}","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\t\n\tvalueEl.innerHTML = \" \" + currentPage + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\t\n\ttotalEl.innerHTML = \" \" + totalPages + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|pages\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\t\n\tel.appendChild(showingEl);\n\tel.appendChild(valueEl);\n\tel.appendChild(ofEl);\n\tel.appendChild(totalEl);\n\tel.appendChild(rowsEl);\n\t\n\treturn el;\n}","import Module from '../../core/Module.js';\n\nimport defaultPageCounters from './defaults/pageCounters.js';\n\nclass Page extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\t\t\n\t\tthis.element = null;\n\t\tthis.pageCounterElement = null;\n\t\tthis.pageCounter = null;\n\t\t\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.remoteRowCountEstimate = null;\n\t\t\n\t\tthis.initialLoad = true;\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\n\t\t\n\t\tthis.pageSizes = [];\n\t\t\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n\t\tthis.registerTableOption(\"paginationCounter\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationCounterElement\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\t\t\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\t\t\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n\n\t\t\tif(this.table.options.paginationAddRow == \"page\"){\n\t\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad){\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\n\t\t\t\n\t\t\tthis.createElements();\n\t\t\tthis.initializePageCounter();\n\t\t\tthis.initializePaginator();\n\t\t}else if(this.table.options.progressiveLoad){\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\t\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad);\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowAddingPosition(row, top){\n\t\tvar rowManager = this.table.rowManager,\n\t\tdisplayRows = rowManager.getDisplayRows(),\n\t\tindex;\n\t\t\n\t\tif(top){\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[0];\n\t\t\t}else{\n\t\t\t\tif(rowManager.activeRows.length){\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\n\t\t\t\t\ttop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[displayRows.length - 1];\n\t\t\t\ttop = displayRows.length < this.size ? false : true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn {index, top};\n\t}\n\t\n\tcalculatePageSizes(){\n\t\tvar testElRow, testElCell;\n\t\t\n\t\tif(this.table.options.paginationSize){\n\t\t\tthis.size = this.table.options.paginationSize;\n\t\t}else{\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = \"hidden\";\n\t\t\t\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\t\t\t\n\t\t\ttestElRow.appendChild(testElCell);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\n\t\t\t\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\tthis.dispatchExternal(\"pageSizeChanged\", this.size);\n\t\t\n\t\tthis.generatePageSizeSelectList();\n\t}\n\t\n\tinitialLoadComplete(){\n\t\tthis.initialLoad = false;\n\t}\n\t\n\tremotePageParams(data, config, silent, params){\n\t\tif(!this.initialLoad){\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\n\t\t\t\tthis.reset(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//configure request params\n\t\tparams.page = this.page;\n\t\t\n\t\t//set page size if defined\n\t\tif(this.size){\n\t\t\tparams.size = this.size;\n\t\t}\n\t\t\n\t\treturn params;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetPageToRow(row){\n\t\tif(this.table.options.pagination){\n\t\t\trow = this.rowManager.findRow(row);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\treturn this.setPageToRow(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Promise.reject();\n\t}\n\t\n\tuserSetPageSize(size){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.setPageSize(size);\n\t\t\treturn this.setPage(1);\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tscrollVertical(top, dir){\n\t\tvar element, diff, margin;\n\t\tif(!dir && !this.table.dataLoader.loading){\n\t\t\telement = this.table.rowManager.getElement();\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\n\t\t\t\n\t\t\tif(diff < margin){\n\t\t\t\tthis.nextPage()\n\t\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\n\t\t\t}\n\t\t}\n\t}\n\t\n\trestOnRenderBefore(rows, renderInPosition){\n\t\tif(!renderInPosition){\n\t\t\tif(this.mode === \"local\"){\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(){\n\t\tthis.refreshData(true, \"all\");\n\t}\n\t\n\tcreateElements(){\n\t\tvar button;\n\t\t\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\t\t\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\t\t\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\t\t\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\t\t\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\t\t\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\t\t\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\t\t\n\t\tif(this.table.options.paginationSizeSelector){\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t}\n\t\n\tgeneratePageSizeSelectList(){\n\t\tvar pageSizes = [];\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\n\t\t\t\t\t\tpageSizes.push(this.size * i);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t}else{\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t\n\t\t\tpageSizes.forEach((item) => {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\t\t\t\t\n\t\t\t\tif(item === true){\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\n\t\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = item;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\t\t\t\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t}\n\t\n\tinitializePageCounter(){\n\t\tvar counter = this.table.options.paginationCounter,\n\t\tpageCounter = null;\n\t\t\n\t\tif(counter){\n\t\t\tif(typeof counter === \"function\"){\n\t\t\t\tpageCounter = counter;\n\t\t\t}else{\n\t\t\t\tpageCounter = Page.pageCounters[counter];\n\t\t\t}\n\t\t\t\n\t\t\tif(pageCounter){\n\t\t\t\tthis.pageCounter = pageCounter;\n\t\t\t\t\n\t\t\t\tthis.pageCounterElement = document.createElement(\"span\");\n\t\t\t\tthis.pageCounterElement.classList.add(\"tabulator-page-counter\");\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Pagination Error - No such page counter found: \", counter);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup pagination\n\tinitializePaginator(hidden){\n\t\tvar pageSelectLabel, paginationCounterHolder;\n\t\t\n\t\tif(!hidden){\n\t\t\t//build pagination element\n\t\t\t\n\t\t\t//bind localizations\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\n\t\t\t\tthis.firstBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\n\t\t\t\tthis.prevBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\n\t\t\t\tthis.nextBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\n\t\t\t\tthis.lastBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\t//click bindings\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(1);\n\t\t\t});\n\t\t\t\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.previousPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.nextPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(this.max);\n\t\t\t});\n\t\t\t\n\t\t\tif(this.table.options.paginationElement){\n\t\t\t\tthis.element = this.table.options.paginationElement;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.pageSizeSelect){\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\n\t\t\t\t\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n\t\t\t\t\tthis.setPage(1);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//append to DOM\n\t\t\tthis.element.appendChild(this.firstBut);\n\t\t\tthis.element.appendChild(this.prevBut);\n\t\t\tthis.element.appendChild(this.pagesElement);\n\t\t\tthis.element.appendChild(this.nextBut);\n\t\t\tthis.element.appendChild(this.lastBut);\n\t\t\t\n\t\t\tif(!this.table.options.paginationElement){\n\t\t\t\tif(this.table.options.paginationCounter){\n\n\t\t\t\t\tpaginationCounterHolder; \n\n\t\t\t\t\tif(this.table.options.paginationCounterElement){\n\t\t\t\t\t\tif(this.table.options.paginationCounterElement instanceof HTMLElement){\n\t\t\t\t\t\t\tthis.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t}else if(typeof this.table.options.paginationCounterElement === \"string\"){\n\t\t\t\t\t\t\tpaginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(paginationCounterHolder){\n\t\t\t\t\t\t\t\tpaginationCounterHolder.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.footerAppend(this.pageCounterElement);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.footerAppend(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.page = this.table.options.paginationInitialPage;\n\t\t\tthis.count = this.table.options.paginationButtonCount;\n\t\t}\n\t\t\n\t\t//set default values\n\t\tthis.mode = this.table.options.paginationMode;\n\t}\n\t\n\tinitializeProgressive(mode){\n\t\tthis.initializePaginator(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"page-changed\");\n\t}\n\t\n\t//calculate maximum page from number of rows\n\tsetMaxRows(rowCount){\n\t\tif(!rowCount){\n\t\t\tthis.max = 1;\n\t\t}else{\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\n\t\t}\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t}\n\t}\n\t\n\t//reset to first page without triggering action\n\treset(force){\n\t\tif(!this.initialLoad){\n\t\t\tif(this.mode == \"local\" || force){\n\t\t\t\tthis.page = 1;\n\t\t\t\tthis.trackChanges();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//set the maximum page\n\tsetMaxPage(max){\n\t\t\n\t\tmax = parseInt(max);\n\t\t\n\t\tthis.max = max || 1;\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t}\n\t\n\t//set current page number\n\tsetPage(page){\n\t\tswitch(page){\n\t\t\tcase \"first\":\n\t\t\t\treturn this.setPage(1);\n\t\n\t\t\tcase \"prev\":\n\t\t\t\treturn this.previousPage();\n\t\t\t\n\t\t\tcase \"next\":\n\t\t\t\treturn this.nextPage();\n\t\t\t\n\t\t\tcase \"last\":\n\t\t\t\treturn this.setPage(this.max);\n\t\t}\n\t\t\n\t\tpage = parseInt(page);\n\t\t\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\n\t\t\tthis.page = page;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageToRow(row){\n\t\tvar rows = this.displayRows(-1);\n\t\tvar index = rows.indexOf(row);\n\t\n\t\tif(index > -1){\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n\t\t\t\n\t\t\treturn this.setPage(page);\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageSize(size){\n\t\tif(size !== true){\n\t\t\tsize = parseInt(size);\n\t\t}\n\n\t\tif(size > 0){\n\t\t\tthis.size = size;\n\t\t\tthis.dispatchExternal(\"pageSizeChanged\", size);\n\t\t}\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\t_setPageCounter(totalRows, size, currentRow){\n\t\tvar content;\n\t\t\n\t\tif(this.pageCounter){\n\n\t\t\tif(this.mode === \"remote\"){\n\t\t\t\tsize = this.size;\n\t\t\t\tcurrentRow = ((this.page - 1) * this.size) + 1;\n\t\t\t\ttotalRows = this.remoteRowCountEstimate;\n\t\t\t}\n\n\t\t\tcontent = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n\t\t\t\n\t\t\tswitch(typeof content){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif(content instanceof Node){\n\t\t\t\t\t\n\t\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\t\twhile(this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.pageCounterElement.appendChild(content);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\t\n\t\t\t\t\t\tif(content != null){\n\t\t\t\t\t\t\tconsole.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.pageCounterElement.innerHTML = content;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup the pagination buttons\n\t_setPageButtons(){\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\n\t\t\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n\t\t\n\t\tif(this.page == 1){\n\t\t\tthis.firstBut.disabled = true;\n\t\t\tthis.prevBut.disabled = true;\n\t\t}else{\n\t\t\tthis.firstBut.disabled = false;\n\t\t\tthis.prevBut.disabled = false;\n\t\t}\n\t\t\n\t\tif(this.page == this.max){\n\t\t\tthis.lastBut.disabled = true;\n\t\t\tthis.nextBut.disabled = true;\n\t\t}else{\n\t\t\tthis.lastBut.disabled = false;\n\t\t\tthis.nextBut.disabled = false;\n\t\t}\n\t\t\n\t\tfor(let i = min; i <= max; i++){\n\t\t\tif(i>0 && i <= this.max){\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.footerRedraw();\n\t}\n\t\n\t_generatePageButton(page){\n\t\tvar button = document.createElement(\"button\");\n\t\t\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif(page == this.page){\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\t\t\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\t\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t\t});\n\t\t\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\t\t\n\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\tthis.setPage(page);\n\t\t});\n\t\t\n\t\treturn button;\n\t}\n\t\n\t//previous page\n\tpreviousPage(){\n\t\tif(this.page > 1){\n\t\t\tthis.page--;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//next page\n\tnextPage(){\n\t\tif(this.page < this.max){\n\t\t\tthis.page++;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tif(!this.progressiveLoad){\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n\t\t\t}\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//return current page number\n\tgetPage(){\n\t\treturn this.page;\n\t}\n\t\n\t//return max page number\n\tgetPageMax(){\n\t\treturn this.max;\n\t}\n\t\n\tgetPageSize(size){\n\t\treturn this.size;\n\t}\n\t\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\t\n\t//return appropriate rows for current page\n\tgetRows(data){\n\t\tvar actualRowPageSize = 0,\n\t\toutput, start, end, actualStartRow;\n\n\t\tvar actualRows = data.filter((row) => {\n\t\t\treturn row.type === \"row\";\n\t\t});\n\t\t\n\t\tif(this.mode == \"local\"){\n\t\t\toutput = [];\n\t\t\t\n\t\t\tthis.setMaxRows(data.length);\n\t\t\t\n\t\t\tif(this.size === true){\n\t\t\t\tstart = 0;\n\t\t\t\tend = data.length;\n\t\t\t}else{\n\t\t\t\tstart = this.size * (this.page - 1);\n\t\t\t\tend = start + parseInt(this.size);\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageButtons();\n\t\t\t\n\t\t\tfor(let i = start; i < end; i++){\n\t\t\t\tlet row = data[i];\n\n\t\t\t\tif(row){\n\t\t\t\t\toutput.push(row);\n\n\t\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\t\tif(!actualStartRow){\n\t\t\t\t\t\t\tactualStartRow = row;\n\t\t\t\t\t\t}\t\n\n\t\t\t\t\t\tactualRowPageSize++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? (actualRows.indexOf(actualStartRow) + 1) : 0);\n\t\t\t\n\t\t\treturn output;\n\t\t}else{\n\t\t\tthis._setPageButtons();\n\t\t\tthis._setPageCounter(actualRows.length);\n\t\t\t\n\t\t\treturn data.slice(0);\n\t\t}\n\t}\n\t\n\ttrigger(){\n\t\tvar left;\n\t\t\n\t\tswitch(this.mode){\n\t\t\tcase \"local\":\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\n\t\t\t\n\t\t\t\tthis.refreshData();\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\n\t\t\t\n\t\t\t\treturn Promise.resolve();\n\t\t\t\n\t\t\tcase \"remote\":\n\t\t\t\tthis.dataChanging = true;\n\t\t\t\treturn this.reloadData(null)\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.dataChanging = false;\n\t\t\t\t\t});\n\t\t\t\n\t\t\tcase \"progressive_load\":\n\t\t\tcase \"progressive_scroll\":\n\t\t\t\treturn this.reloadData(null, true);\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n\t\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t_parseRemoteData(data){\n\t\tvar margin;\n\t\t\n\t\tif(typeof data.last_page === \"undefined\"){\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n\t\t}\n\t\t\n\t\tif(data.data){\n\t\t\tthis.max = parseInt(data.last_page) || 1;\n\n\t\t\tthis.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : (data.last_page * this.size - (this.page == data.last_page ? (this.size - data.data.length) : 0));\n\t\t\t\n\t\t\tif(this.progressiveLoad){\n\t\t\t\tswitch(this.mode){\n\t\t\t\t\tcase \"progressive_load\":\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page == 1){\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n\t\t\t\t\t\n\t\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\n\t\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n\t\t}\n\t\t\n\t\treturn data.data;\n\t}\n\t\n\t//handle the footer element being redrawn\n\tfooterRedraw(){\n\t\tvar footer = this.table.footerManager.containerElement;\n\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t}else{\n\t\t\tthis.pagesElement.style.display = '';\n\t\t\t\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}\n\nPage.moduleName = \"page\";\n\n//load defaults\nPage.pageCounters = defaultPageCounters;\n\nexport default Page;\n","// read persistance information from storage\nexport default {\n\tlocal:function(id, type){\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\treturn data ? JSON.parse(data) : false;\n\t},\n\tcookie:function(id, type){\n\t\tvar cookie = document.cookie,\n\t\tkey = id + \"-\" + type,\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\n\t\tend, data;\n\n\t\t//if cookie exists, decode and load column data into tabulator\n\t\tif(cookiePos > -1){\n\t\t\tcookie = cookie.slice(cookiePos);\n\n\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\tif(end > -1){\n\t\t\t\tcookie = cookie.slice(0, end);\n\t\t\t}\n\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t}\n\n\t\treturn data ? JSON.parse(data) : false;\n\t}\n};\n","//write persistence information to storage\nexport default {\n\tlocal:function(id, type, data){\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t},\n\tcookie:function(id, type, data){\n\t\tvar expireDate = new Date();\n\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t}\n};","import Module from '../../core/Module.js';\n\nimport defaultReaders from './defaults/readers.js';\nimport defaultWriters from './defaults/writers.js';\n\nclass Persistence extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\n\t\tthis.registerTableOption(\"persistence\", false);\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n\t}\n\n\t// Test for whether localStorage is available for use.\n\tlocalStorageTest() {\n\t\tvar  testKey =  \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem( testKey, testKey);\n\t\t\twindow.localStorage.removeItem( testKey );\n\t\t\treturn true;\n\t\t} catch(e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//setup parameters\n\tinitialize(){\n\t\tif(this.table.options.persistence){\n\t\t\t//determine persistent layout storage type\n\t\t\tvar mode = this.table.options.persistenceMode,\n\t\t\tid = this.table.options.persistenceID,\n\t\t\tretrievedData;\n\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\n\n\t\t\tif(this.table.options.persistenceReaderFunc){\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.readers[this.mode]){\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.table.options.persistenceWriterFunc){\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.writers[this.mode]){\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set storage tag\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\n\n\t\t\tthis.config = {\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\t\theaderFilter:this.table.options.persistence === true || this.table.options.persistence.headerFilter,\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\n\t\t\t};\n\n\t\t\t//load pagination data if needed\n\t\t\tif(this.config.page){\n\t\t\t\tretrievedData = this.retrieveData(\"page\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\n\t\t\t\t\t\tthis.table.options.paginationSize = retrievedData.paginationSize;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//load group data if needed\n\t\t\tif(this.config.group){\n\t\t\t\tretrievedData = this.retrieveData(\"group\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\n\t\t\t\t\t\tthis.table.options.groupBy = retrievedData.groupBy;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retrievedData.groupStartOpen;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\n\t\t\t\t\t\tthis.table.options.groupHeader = retrievedData.groupHeader;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.config.columns){\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"headerFilter\"));\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n\t\t}\n\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n\t}\n\n\teventSave(type){\n\t\tif(this.config[type]){\n\t\t\tthis.save(type);\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tvar sorters, filters, headerFilters;\n\n\t\tif(this.config.sort){\n\t\t\tsorters = this.load(\"sort\");\n\n\t\t\tif(!sorters === false){\n\t\t\t\tthis.table.options.initialSort = sorters;\n\t\t\t}\n\t\t}\n\n\t\tif(this.config.filter){\n\t\t\tfilters = this.load(\"filter\");\n\n\t\t\tif(!filters === false){\n\t\t\t\tthis.table.options.initialFilter = filters;\n\t\t\t}\n\t\t}\n\t\tif(this.config.headerFilter){\n\t\t\theaderFilters = this.load(\"headerFilter\");\n\n\t\t\tif(!headerFilters === false){\n\t\t\t\tthis.table.options.initialHeaderFilter = headerFilters;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\ttableRedraw(force){\n\t\tif(force && this.config.columns){\n\t\t\tthis.save(\"columns\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tgetColumnLayout(){\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\n\t}\n\n\tsetColumnLayout(layout){\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout));\n\t\treturn true;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumn(column){\n\t\tvar def, keys;\n\n\t\tif(this.config.columns){\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach((key)=>{\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\n\t\t\t\tif(props){\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: (newValue) => {\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(props.set){\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget:() => {\n\t\t\t\t\t\t\tif(props.get){\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t}\n\n\t//load saved definitions\n\tload(type, current){\n\t\tvar data = this.retrieveData(type);\n\n\t\tif(current){\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//retrieve data from memory\n\tretrieveData(type){\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t}\n\n\t//merge old and new column definitions\n\tmergeDefinition(oldCols, newCols){\n\t\tvar output = [];\n\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach((column, to) => {\n\t\t\tvar from = this._findColumn(oldCols, column),\n\t\t\tkeys;\n\n\t\t\tif(from){\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(from.columns){\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach((column, i) => {\n\t\t\tvar from = this._findColumn(newCols, column);\n\n\t\t\tif (!from) {\n\t\t\t\tif(output.length>i){\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t}else{\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//find matching columns\n\t_findColumn(columns, subject){\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\n\n\t\treturn columns.find(function(col){\n\t\t\tswitch(type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\n\t\t\t\tcase \"field\":\n\t\t\t\t\treturn col.field === subject.field;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\treturn col === subject;\n\t\t\t}\n\t\t});\n\t}\n\n\t//save data\n\tsave(type){\n\t\tvar data = {};\n\n\t\tswitch(type){\n\t\t\tcase \"columns\":\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"headerFilter\":\n\t\t\t\tdata = this.table.modules.filter.getHeaderFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tdata = this.getGroupConfig();\n\t\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\t\tdata = this.getPageConfig();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(this.writeFunc){\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\n\t}\n\n\t//ensure sorters contain no function data\n\tvalidateSorters(data){\n\t\tdata.forEach(function(item){\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tgetGroupConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.group){\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetPageConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.page){\n\t\t\tif(this.config.page === true || this.config.page.size){\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif(this.config.page === true || this.config.page.page){\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\n\t//parse columns for data to store\n\tparseColumns(columns){\n\t\tvar definitions = [],\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n\n\t\tcolumns.forEach((column) => {\n\t\t\tvar defStore = {},\n\t\t\tcolDef = column.getDefinition(),\n\t\t\tkeys;\n\n\t\t\tif(column.isGroup){\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\n\t\t\t}else{\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t\tkeys.push(\"visible\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tswitch(key){\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\n\t\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t}\n}\n\nPersistence.moduleName = \"persistence\";\n\nPersistence.moduleInitOrder = -10;\n\n//load defaults\nPersistence.readers = defaultReaders;\nPersistence.writers = defaultWriters;\n\nexport default Persistence;","import Module from '../../core/Module.js';\n\nclass Popup extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"rowContextPopup\", false);\n\t\tthis.registerTableOption(\"rowClickPopup\", false);\n\t\tthis.registerTableOption(\"rowDblClickPopup\", false);\n\t\tthis.registerTableOption(\"groupContextPopup\", false);\n\t\tthis.registerTableOption(\"groupClickPopup\", false);\n\t\tthis.registerTableOption(\"groupDblClickPopup\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextPopup\");\n\t\tthis.registerColumnOption(\"headerClickPopup\");\n\t\tthis.registerColumnOption(\"headerDblClickPopup\");\n\t\tthis.registerColumnOption(\"headerPopup\");\n\t\tthis.registerColumnOption(\"headerPopupIcon\");\n\t\tthis.registerColumnOption(\"contextPopup\");\n\t\tthis.registerColumnOption(\"clickPopup\");\n\t\tthis.registerColumnOption(\"dblClickPopup\");\n\n\t\tthis.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\t_componentPopupCall(component, contents, position){\n\t\tthis.loadPopupEvent(contents, null, component, position);\n\t}\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextPopup){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickPopup){\n\t\t\tthis.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n\t\t}\n\n\t\tif(this.table.options.rowDblClickPopup){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextPopup){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickPopup){\n\t\t\tthis.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n\t\t}\n\n\t\tif(this.table.options.groupDblClickPopup){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextPopup && !this.columnSubscribers.headerContextPopup){\n\t\t\tthis.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickPopup && !this.columnSubscribers.headerClickPopup){\n\t\t\tthis.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n\t\t\n\t\t\n\t\t}if(def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup){\n\t\t\tthis.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup);\n\t\t}\n\t\t\n\t\tif(def.headerPopup){\n\t\t\tthis.initializeColumnHeaderPopup(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextPopup && !this.columnSubscribers.contextPopup){\n\t\t\tthis.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.clickPopup && !this.columnSubscribers.clickPopup){\n\t\t\tthis.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n\t\t}\n\n\t\tif(def.dblClickPopup && !this.columnSubscribers.dblClickPopup){\n\t\t\tthis.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderPopup(column){\n\t\tvar icon = column.definition.headerPopupIcon,\n\t\theaderPopupEl;\n\t\t\n\t\theaderPopupEl = document.createElement(\"span\");\n\t\theaderPopupEl.classList.add(\"tabulator-header-popup-button\");\n\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderPopupEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderPopupEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderPopupEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderPopupEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadPopupEvent(column.definition.headerPopup, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadPopupTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadPopupEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadPopupTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadPopupEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadPopupEvent(contents, e, component, position){\n\t\tvar renderedCallback;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tcontents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(),  onRendered) : contents;\n\t\t\n\t\tthis.loadPopup(e, component, contents, renderedCallback, position);\n\t}\n\t\n\tloadPopup(e, component, contents, renderedCallback, position){\n\t\tvar touch = !(e instanceof MouseEvent),\n\t\tcontentsEl, popup;\n\t\t\n\t\tif(contents instanceof HTMLElement){\n\t\t\tcontentsEl = contents;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\tcontentsEl.innerHTML = contents;\n\t\t}\n\t\t\n\t\tcontentsEl.classList.add(\"tabulator-popup\");\n\n\t\tcontentsEl.addEventListener(\"click\", (e) =>{\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\tpopup = this.popup(contentsEl);\n\n\t\tif(typeof renderedCallback === \"function\"){\n\t\t\tpopup.renderCallback(renderedCallback);\n\t\t}\n\n\t\tif(e){\n\t\t\tpopup.show(e);\n\t\t}else{\n\t\t\tpopup.show(component.getElement(), position || \"center\");\n\t\t}\n\n\t\t\n\t\tpopup.hideOnBlur(() => {\n\t\t\tthis.dispatchExternal(\"popupClosed\", component.getComponent());\n\t\t});\n\n\n\n\t\tthis.dispatchExternal(\"popupOpened\", component.getComponent());\n\t}\n}\n\nPopup.moduleName = \"popup\";\n\nexport default Popup;\n","import Module from '../../core/Module.js';\n\nclass Print extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\t\tthis.beforeprintEventHandler = null;\n\t\tthis.afterprintEventHandler = null;\n\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\n\n\t\tthis.registerColumnOption(\"print\");\n\t\tthis.registerColumnOption(\"titlePrint\");\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\tthis.beforeprintEventHandler = this.replaceTable.bind(this);\n\t\t\tthis.afterprintEventHandler = this.cleanup.bind(this);\n\n\t\t\twindow.addEventListener(\"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.addEventListener(\"afterprint\", this.afterprintEventHandler);\n\t\t\tthis.subscribe(\"table-destroy\", this.destroy.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n\t}\n\n\tdestroy(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\twindow.removeEventListener( \"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.removeEventListener( \"afterprint\", this.afterprintEventHandler );\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\treplaceTable(){\n\t\tif(!this.manualBlock){\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t}\n\n\tcleanup(){\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif(this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t}\n\n\tprintFullscreen(visible, style, config){\n\t\tvar scrollX = window.scrollX,\n\t\tscrollY = window.scrollY,\n\t\theaderEl = document.createElement(\"div\"),\n\t\tfooterEl = document.createElement(\"div\"),\n\t\ttableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n\t\theaderContent, footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif(this.table.options.printHeader){\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif(typeof headerContent == \"string\"){\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t}else{\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif(this.table.options.printFooter){\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\n\t\t\tif(typeof footerContent == \"string\"){\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t}else{\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif(this.table.options.printFormatter){\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t}\n}\n\nPrint.moduleName = \"print\";\n\nexport default Print;","import Module from '../../core/Module.js';\n\nclass ReactiveData extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\t\t\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.reactiveData){\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n\t\t}\n\t}\n\t\n\twatchData(data){\n\t\tvar self = this,\n\t\tversion;\n\t\t\n\t\tthis.currentVersion ++;\n\t\t\n\t\tversion = this.currentVersion;\n\t\t\n\t\tthis.unwatchData();\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\t//override array push function\n\t\tthis.origFuncs.push = data.push;\n\t\t\n\t\tObject.defineProperty(this.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\t\n\t\t\t\t\tself.block(\"data-push\");\n\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.push.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-push\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array unshift function\n\t\tthis.origFuncs.unshift = data.unshift;\n\t\t\n\t\tObject.defineProperty(this.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-unshift\");\n\t\t\t\t\t\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.unshift.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-unshift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array shift function\n\t\tthis.origFuncs.shift = data.shift;\n\t\t\n\t\tObject.defineProperty(this.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-shift\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.shift.call(data);\n\n\t\t\t\t\tself.unblock(\"data-shift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array pop function\n\t\tthis.origFuncs.pop = data.pop;\n\t\t\n\t\tObject.defineProperty(this.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-pop\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.pop.call(data);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-pop\");\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array splice function\n\t\tthis.origFuncs.splice = data.splice;\n\t\t\n\t\tObject.defineProperty(this.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\tend = args[1],\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\n\t\t\t\tstartRow, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-splice\");\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif(newRows){\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(startRow){\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif(end !== 0){\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\t\t\t\t\t\t\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(newRows || end !== 0){\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.splice.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-splice\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result ;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchData(){\n\t\tif(this.data !== false){\n\t\t\tfor(var key in this.origFuncs){\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable:true,\n\t\t\t\t\twritable:true,\n\t\t\t\t\tvalue: this.origFuncs.key,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\twatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\t\t\n\t\tif(this.table.options.dataTree){\n\t\t\tthis.watchTreeChildren(row);\n\t\t}\n\t}\n\t\n\twatchTreeChildren (row){\n\t\tvar self = this,\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\n\t\torigFuncs = {};\n\t\t\n\t\tif(childField){\n\t\t\t\n\t\t\torigFuncs.push = childField.push;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"push\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-push\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-push\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.unshift = childField.unshift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"unshift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-unshift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-unshift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.shift = childField.shift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"shift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-shift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-shift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.pop = childField.pop;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"pop\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-pop\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-pop\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.splice = childField.splice;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"splice\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-splice\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-splice\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trebuildTree(row){\n\t\tthis.table.modules.dataTree.initializeRow(row);\n\t\tthis.table.modules.dataTree.layoutRow(row);\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t}\n\t\n\twatchKey(row, data, key){\n\t\tvar self = this,\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\n\t\tvalue = data[key],\n\t\tversion = this.currentVersion;\n\t\t\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: (newValue) => {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"key\");\n\t\t\t\t\t\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"key\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(props.set){\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget:() => {\n\t\t\t\t\n\t\t\t\tif(props.get){\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue:data[key],\n\t\t\t});\n\t\t}\n\t}\n\t\n\tblock(key){\n\t\tif(!this.blocked){\n\t\t\tthis.blocked = key;\n\t\t}\n\t}\n\t\n\tunblock(key){\n\t\tif(this.blocked === key){\n\t\t\tthis.blocked = false;\n\t\t}\n\t}\n}\n\nReactiveData.moduleName = \"reactiveData\";\n\nexport default ReactiveData;\n\n\n\n","import Module from '../../core/Module.js';\n\nclass ResizeColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.latestX = false;\n\t\tthis.handle = null;\n\t\tthis.initialNextColumn = null;\n\t\tthis.nextColumn = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.registerColumnOption(\"resizable\", true);\n\t\tthis.registerTableOption(\"resizableColumnFit\", false);\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n\t}\n\t\n\tinitializeEventWatchers(){\n\t\tif(!this.initialized){\n\t\t\t\n\t\t\tthis.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n\t\t\tthis.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n\t\t\tthis.subscribe(\"column-height\", this.resizeHandle.bind(this));\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t\n\tlayoutCellHandles(cell){\n\t\tif(cell.row.type === \"row\"){\n\t\t\tthis.deInitializeComponent(cell);\n\t\t\tthis.initializeColumn(\"cell\", cell, cell.column, cell.element);\n\t\t}\n\t}\n\t\n\tlayoutColumnHeader(column){\n\t\tif(column.definition.resizable){\n\t\t\tthis.initializeEventWatchers();\n\t\t\tthis.deInitializeComponent(column);\n\t\t\tthis.initializeColumn(\"header\", column, column, column.element);\n\t\t}\n\t}\n\t\n\tcolumnLayoutUpdated(column){\n\t\tvar prev = column.prevColumn();\n\t\t\n\t\tthis.reinitializeColumn(column);\n\t\t\n\t\tif(prev){\n\t\t\tthis.reinitializeColumn(prev);\n\t\t}\n\t}\n\t\n\tcolumnWidthUpdated(column){\n\t\tif(column.modules.frozen){\n\t\t\tif(this.table.modules.frozenColumns.leftColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}else if(this.table.modules.frozenColumns.rightColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfrozenColumnOffset(column){\n\t\tvar offset = false;\n\n\t\tif(column.modules.frozen){\n\t\t\toffset = column.modules.frozen.marginValue; \n\n\t\t\tif(column.modules.frozen.position === \"left\"){\n\t\t\t\toffset += column.getWidth() - 3;\n\t\t\t}else{\n\t\t\t\tif(offset){\n\t\t\t\t\toffset -= 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn offset !== false ? offset + \"px\" : false;\n\t}\n\t\n\treinitializeColumn(column){\n\t\tvar frozenOffset = this.frozenColumnOffset(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(cell.modules.resize && cell.modules.resize.handleEl){\n\t\t\t\tif(frozenOffset){\n\t\t\t\t\tcell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t\t\tcell.modules.resize.handleEl.style[\"z-index\"] = 11;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.element.after(cell.modules.resize.handleEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(column.modules.resize && column.modules.resize.handleEl){\n\t\t\tif(frozenOffset){\n\t\t\t\tcolumn.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.element.after(column.modules.resize.handleEl);\n\t\t}\n\t}\n\t\n\tinitializeColumn(type, component, column, element){\n\t\tvar self = this,\n\t\tvariableHeight = false,\n\t\tmode = column.definition.resizable,\n\t\tconfig = {},\n\t\tnearestColumn = column.getLastColumn();\n\t\t\n\t\t//set column resize mode\n\t\tif(type === \"header\"){\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tconfig = {variableHeight:variableHeight};\n\t\t}\n\t\t\n\t\tif((mode === true || mode == type) && this._checkResizability(nearestColumn)){\n\t\t\t\n\t\t\tvar handle = document.createElement('span');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\t\t\t\n\t\t\thandle.addEventListener(\"click\", function(e){\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\tvar handleDown = function(e){\n\t\t\t\tself.startColumn = column;\n\t\t\t\tself.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t};\n\t\t\t\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\t\t\t\n\t\t\t//resize column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", (e) => {\n\t\t\t\tvar oldWidth = nearestColumn.getWidth();\n\t\t\t\t\n\t\t\t\te.stopPropagation();\n\t\t\t\tnearestColumn.reinitializeWidth(true);\n\t\t\t\t\n\t\t\t\tif(oldWidth !== nearestColumn.getWidth()){\n\t\t\t\t\tself.dispatch(\"column-resized\", nearestColumn);\n\t\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", nearestColumn.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(column.modules.frozen){\n\t\t\t\thandle.style.position = \"sticky\";\n\t\t\t\thandle.style[column.modules.frozen.position] = this.frozenColumnOffset(column);\n\t\t\t}\n\t\t\t\n\t\t\tconfig.handleEl = handle;\n\t\t\t\n\t\t\tif(element.parentNode && column.visible){\n\t\t\t\telement.after(handle);\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tcomponent.modules.resize = config;\n\t}\n\t\n\tdeInitializeColumn(column){\n\t\tthis.deInitializeComponent(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tthis.deInitializeComponent(cell);\n\t\t});\n\t}\n\t\n\tdeInitializeComponent(component){\n\t\tvar handleEl;\n\t\t\n\t\tif(component.modules.resize){\n\t\t\thandleEl = component.modules.resize.handleEl;\n\t\t\t\n\t\t\tif(handleEl && handleEl.parentElement){\n\t\t\t\thandleEl.parentElement.removeChild(handleEl);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tresizeHandle(component, height){\n\t\tif(component.modules.resize && component.modules.resize.handleEl){\n\t\t\tcomponent.modules.resize.handleEl.style.height = height;\n\t\t}\n\t}\n\t\n\t_checkResizability(column){\n\t\treturn column.definition.resizable;\n\t}\n\t\n\t_mouseDown(e, column, handle){\n\t\tvar self = this;\n\t\t\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tfunction mouseMove(e){\n\t\t\tvar x = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX,\n\t\t\tstartDiff = x - self.startX,\n\t\t\tmoveDiff = x - self.latestX,\n\t\t\tblockedBefore, blockedAfter;\n\t\t\t\n\t\t\tself.latestX = x;\n\t\t\t\n\t\t\tif(self.table.rtl){\n\t\t\t\tstartDiff = -startDiff;\n\t\t\t\tmoveDiff = -moveDiff;\n\t\t\t}\n\t\t\t\n\t\t\tblockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n\t\t\t\n\t\t\tcolumn.setWidth(self.startWidth + startDiff);\n\t\t\t\n\t\t\tblockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n\t\t\t\n\t\t\tif(moveDiff < 0){\n\t\t\t\tself.nextColumn = self.initialNextColumn;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.options.resizableColumnFit && self.nextColumn && !(blockedBefore && blockedAfter)){\n\t\t\t\tlet colWidth = self.nextColumn.getWidth();\n\t\t\t\t\n\t\t\t\tif(moveDiff > 0){\n\t\t\t\t\tif(colWidth <= self.nextColumn.minWidth){\n\t\t\t\t\t\tself.nextColumn = self.nextColumn.nextColumn();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(self.nextColumn){\n\t\t\t\t\tself.nextColumn.setWidth(self.nextColumn.getWidth() - moveDiff);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself.table.columnManager.rerenderColumns(true);\n\t\t\t\n\t\t\tif(!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction mouseUp(e){\n\t\t\t\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif(self.startColumn.modules.edit){\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\t\t\t\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(self.startWidth !== column.getWidth()){\n\t\t\t\tself.table.columnManager.verticalAlignHeaders();\n\n\t\t\t\tself.dispatch(\"column-resized\", column);\n\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", column.getComponent());\n\t\t\t}\n\t\t}\n\t\t\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\t\t\n\t\t//block editor from taking action while resizing is taking place\n\t\tif(self.startColumn.modules.edit){\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\t\t\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n\t\tself.latestX = self.startX;\n\t\tself.startWidth = column.getWidth();\n\t\t\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeColumns.moduleName = \"resizeColumns\";\n\nexport default ResizeColumns;","import Module from '../../core/Module.js';\n\nclass ResizeRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.resizableRows){\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\trowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function(e){\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\n\t\tprevHandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown =  function(e){\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif(prevRow){\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t}\n\n\t_mouseDown(e, row, handle){\n\t\tvar self = this;\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n\t\t}\n\n\t\tfunction mouseUp(e){\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.dispatchExternal(\"rowResized\", row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeRows.moduleName = \"resizeRows\";\n\nexport default ResizeRows;","import Module from '../../core/Module.js';\n\nclass ResizeTable extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.binding = false;\n\t\tthis.visibilityObserver = false;\n\t\tthis.resizeObserver = false;\n\t\tthis.containerObserver = false;\n\t\t\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\t\t\n\t\tthis.autoResize = false;\n\t\t\n\t\tthis.visible = false;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.initialRedraw = false;\n\t\t\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.autoResize){\n\t\t\tvar table = this.table,\n\t\t\ttableStyle;\n\t\t\t\n\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\n\t\t\tif(table.element.parentNode){\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\n\t\t\t\t\n\t\t\t\tthis.initializeVisibilityObserver();\n\t\t\t\t\n\t\t\t\tthis.autoResize = true;\n\t\t\t\t\n\t\t\t\tthis.resizeObserver = new ResizeObserver((entry) => {\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(table.element.parentNode){\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.resizeObserver.observe(table.element);\n\t\t\t\t\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\n\t\t\t\t\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.binding = function(){\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && !table.modules.edit.currentCell)){\n\t\t\t\t\t\ttable.columnManager.rerenderColumns(true);\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeVisibilityObserver(){\n\t\tthis.visibilityObserver = new IntersectionObserver((entries) => {\n\t\t\tthis.visible = entries[0].isIntersecting;\n\t\t\t\n\t\t\tif(!this.initialized){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.initialRedraw = !this.visible;\n\t\t\t}else{\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.redrawTable(this.initialRedraw);\n\t\t\t\t\tthis.initialRedraw = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.visibilityObserver.observe(this.table.element);\n\t}\n\t\n\tredrawTable(force){\n\t\tif(this.initialized && this.visible){\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\tthis.table.redraw(force);\n\t\t}\n\t}\n\t\n\ttableResized(){\n\t\tthis.table.rowManager.redraw();\n\t}\n\t\n\tclearBindings(){\n\t\tif(this.binding){\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\t\t\n\t\tif(this.resizeObserver){\n\t\t\tthis.resizeObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.visibilityObserver){\n\t\t\tthis.visibilityObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.containerObserver){\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t}\n}\n\nResizeTable.moduleName = \"resizeTable\";\n\nexport default ResizeTable;","import Module from '../../core/Module.js';\n\nclass ResponsiveLayout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n\t\tthis.registerColumnOption(\"responsive\");\n\t}\n\n\t//generate responsive columns list\n\tinitialize(){\n\t\tif(this.table.options.responsiveLayout){\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\n\t\t\tif(!force){\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeResponsivity(){\n\t\tvar columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\t//determine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach((column, i) => {\n\t\t\tif(column.modules.responsive){\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif(!column.visible && this.mode === \"collapse\"){\n\t\t\t\t\t\tthis.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort((a, b) => {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.collapseHandleColumn){\n\t\t\tif(this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}else{\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//define layout information\n\tinitializeColumn(column){\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\n\t}\n\n\tinitializeRow(row){\n\t\tvar el;\n\n\t\tif(row.type !== \"calc\"){\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement:el,\n\t\t\t\topen:this.collapseStartOpen,\n\t\t\t};\n\n\t\t\tif(!this.collapseStartOpen){\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tlayoutRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t}\n\n\t//update column visibility\n\tupdateColumnVisibility(column, responsiveToggle){\n\t\tif(!responsiveToggle && column.modules.responsive){\n\t\t\tcolumn.modules.responsive.visible = column.visible;\n\t\t\tthis.initializeResponsivity();\n\t\t}\n\t}\n\n\thideColumn(column){\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !colCount){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tshowColumn(column){\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//redraw columns to fit space\n\tupdate(){\n\t\tvar working = true;\n\n\t\twhile(working){\n\n\t\t\tlet width = this.table.modules.layout.getMode() == \"fitColumns\" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth();\n\n\t\t\tlet diff = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - width;\n\n\t\t\tif(diff < 0){\n\t\t\t\t//table is too wide\n\t\t\t\tlet column = this.columns[this.index];\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.hideColumn(column);\n\t\t\t\t\tthis.index ++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\n\t\t\t\t//table has spare space\n\t\t\t\tlet column = this.columns[this.index -1];\n\n\t\t\t\tif(column){\n\t\t\t\t\tif(diff > 0){\n\t\t\t\t\t\tif(diff >= column.getWidth()){\n\t\t\t\t\t\t\tthis.showColumn(column);\n\t\t\t\t\t\t\tthis.index --;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!this.table.rowManager.activeRowsCount){\n\t\t\t\tthis.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedContent(){\n\t\tvar rows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach((row) => {\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t});\n\t}\n\n\tgenerateCollapsedRowContent(row){\n\t\tvar el, contents;\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\n\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif(contents){\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedRowData(row){\n\t\tvar data = row.getData(),\n\t\toutput = [],\n\t\tmockCellComponent;\n\n\t\tthis.hiddenColumns.forEach((column) => {\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif(column.definition.title && column.field){\n\t\t\t\tif(column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters){\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue:false,\n\t\t\t\t\t\tdata:{},\n\t\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction onRendered(callback){\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(this.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tformatCollapsedData(data){\n\t\tvar list = document.createElement(\"table\");\n\n\t\tdata.forEach(function(item){\n\t\t\tvar row = document.createElement(\"tr\");\n\t\t\tvar titleData = document.createElement(\"td\");\n\t\t\tvar valueData = document.createElement(\"td\");\n\t\t\tvar node_content;\n\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\n\t\t\ttitleData.appendChild(titleHighlight);\n\t\t\tthis.langBind(\"columns|\" + item.field, function(text){\n\t\t\t\ttitleHighlight.innerHTML = text || item.title;\n\t\t\t});\n\n\t\t\tif(item.value instanceof Node){\n\t\t\t\tnode_content = document.createElement(\"div\");\n\t\t\t\tnode_content.appendChild(item.value);\n\t\t\t\tvalueData.appendChild(node_content);\n\t\t\t}else{\n\t\t\t\tvalueData.innerHTML = item.value;\n\t\t\t}\n\n\t\t\trow.appendChild(titleData);\n\t\t\trow.appendChild(valueData);\n\t\t\tlist.appendChild(row);\n\t\t}, this);\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t}\n}\n\nResponsiveLayout.moduleName = \"responsiveLayout\";\n\nexport default ResponsiveLayout;\n","import Module from '../../core/Module.js';\n\nclass SelectRow extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t\t\n\t\tthis.registerTableOption(\"selectable\", \"highlight\"); //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRangeMode\", \"drag\");  //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n\t\tthis.registerTableOption(\"selectablePersistence\", true); // maintain selection when table view is updated\n\t\tthis.registerTableOption(\"selectableCheck\", function(data, row){return true;}); //check whether row is selectable\n\t\t\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.selectable !== false){\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.selectable && !this.table.options.selectablePersistence){\n\t\t\t\tthis.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowRetrieve(type, prevValue){\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\n\t}\n\t\n\trowDeleted(row){\n\t\tthis._deselectRow(row, true);\n\t}\n\t\n\tclearSelectionData(silent){\n\t\tvar prevSelected = this.selectedRows.length;\n\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\t\t\n\t\tif(prevSelected && silent !== true){\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t}\n\t\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\telement = row.getElement();\n\t\t\n\t\t// trigger end of row selection\n\t\tvar endSelect = function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\t\t\n\t\trow.modules.select = {selected:false};\n\t\t\n\t\t//set row selection class\n\t\tif(self.checkRowSelectability(row)){\n\t\t\telement.classList.add(\"tabulator-selectable\");\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\n\t\t\t\n\t\t\tif(self.table.options.selectable && self.table.options.selectable != \"highlight\"){\n\t\t\t\tif(self.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\telement.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n\t\t\t\t}else{\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!self.selecting){\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\t\t\tif(e.shiftKey){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selecting = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selectPrev = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\telement.classList.add(\"tabulator-unselectable\");\n\t\t\telement.classList.remove(\"tabulator-selectable\");\n\t\t}\n\t}\n\t\n\thandleComplexRowClick(row, e){\n\t\tif(e.shiftKey){\n\t\t\tthis.table._clearSelection();\n\t\t\tthis.lastClickedRow = this.lastClickedRow || row;\n\t\t\t\n\t\t\tvar lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n\t\t\tvar rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n\t\t\t\n\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\n\t\t\tvar rows = this.table.rowManager.getDisplayRows().slice(0);\n\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\t\t\t\n\t\t\tif(e.ctrlKey || e.metaKey){\n\t\t\t\ttoggledRows.forEach((toggledRow)=>{\n\t\t\t\t\tif(toggledRow !== this.lastClickedRow){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.options.selectable !== true && !this.isRowSelected(row)){\n\t\t\t\t\t\t\tif(this.selectedRows.length < this.table.options.selectable){\n\t\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.lastClickedRow = row;\n\t\t\t}else{\n\t\t\t\tthis.deselectRows(undefined, true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.selectable !== true){\n\t\t\t\t\tif(toggledRows.length > this.table.options.selectable){\n\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, this.table.options.selectable);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectRows(toggledRows);\n\t\t\t}\n\t\t\tthis.table._clearSelection();\n\t\t}\n\t\telse if(e.ctrlKey || e.metaKey){\n\t\t\tthis.toggleRow(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}else{\n\t\t\tthis.deselectRows(undefined, true);\n\t\t\tthis.selectRows(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}\n\t}\n\n\tcheckRowSelectability(row){\n\t\tif(row && row.type === \"row\"){\n\t\t\treturn this.table.options.selectableCheck.call(this.table, row.getComponent());\n\t\t}\n\n\t\treturn false;\n\t}\n\t\n\t//toggle row selection\n\ttoggleRow(row){\n\t\tif(this.checkRowSelectability(row)){\n\t\t\tif (row.modules.select && row.modules.select.selected && !this.table.options.clickNoDeselectRow) {\n\t\t\t\tthis._deselectRow(row);\n\t\t\t}else{\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//select a number of rows\n\tselectRows(rows){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = this.table.rowManager.rows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._selectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(false, changes);\n\t\t\t}\n\t\t}else{\n\t\t\tif(rowMatch){\n\t\t\t\tthis._selectRow(rowMatch, false, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//select an individual row\n\t_selectRow(rowInfo, silent, force){\n\t\t//handle max row count\n\t\tif(!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force){\n\t\t\tif(this.selectedRows.length >= this.table.options.selectable){\n\t\t\t\tif(this.table.options.selectableRollingSelection){\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\t\t\n\t\tif(row){\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectedRows.push(row);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tthis._rowSelectionChanged(silent, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisRowSelected(row){\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t}\n\t\n\t//deselect a number of rows\n\tdeselectRows(rows, silent){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = Object.assign([], this.selectedRows);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._deselectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(silent, [], changes);\n\t\t\t}\n\t\t}else{\n\t\t\tif(rowMatch){\n\t\t\t\tthis._deselectRow(rowMatch, silent, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//deselect an individual row\n\t_deselectRow(rowInfo, silent){\n\t\tvar self = this,\n\t\trow = self.table.rowManager.findRow(rowInfo),\n\t\tindex, element;\n\t\t\n\t\tif(row){\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\t\t\t\n\t\t\tif(index > -1){\n\n\t\t\t\telement = row.getElement();\n\t\t\t\t\n\t\t\t\tif(element){\n\t\t\t\t\telement.classList.remove(\"tabulator-selected\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\tself.selectedRows.splice(index, 1);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent, undefined, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetSelectedData(){\n\t\tvar data = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetSelectedRows(){\n\t\tvar rows = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\trows.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t_rowSelectionChanged(silent, selected = [], deselected = []){\n\t\tif(this.headerCheckboxElement){\n\t\t\tif(this.selectedRows.length === 0){\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(!silent){\n\t\t\tif(!Array.isArray(selected)){\n\t\t\t\tselected = [selected];\n\t\t\t}\n\n\t\t\tselected = selected.map(row => row.getComponent());\n\n\t\t\tif(!Array.isArray(deselected)){\n\t\t\t\tdeselected = [deselected];\n\t\t\t}\n\n\t\t\tdeselected = deselected.map(row => row.getComponent());\n\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows(), selected, deselected);\n\t\t}\n\t}\n\t\n\tregisterRowSelectCheckbox (row, element) {\n\t\tif(!row._row.modules.select){\n\t\t\trow._row.modules.select = {};\n\t\t}\n\t\t\n\t\trow._row.modules.select.checkboxEl = element;\n\t}\n\t\n\tregisterHeaderSelectCheckbox (element) {\n\t\tthis.headerCheckboxElement = element;\n\t}\n\t\n\tchildRowSelection(row, select){\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true);\n\t\t\n\t\tif(select){\n\t\t\tfor(let child of children){\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t}else{\n\t\t\tfor(let child of children){\n\t\t\t\tthis._deselectRow(child, true);\n\t\t\t}\n\t\t}\n\t}\n}\n\nSelectRow.moduleName = \"selectRow\";\n\nexport default SelectRow;","//sort datetime\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tif(typeof DT != \"undefined\"){\n\t\tif(!DT.isDateTime(a)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\ta = DT.fromISO(String(a));\n\t\t\t}else{\n\t\t\t\ta = DT.fromFormat(String(a), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!DT.isDateTime(b)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\tb = DT.fromISO(String(b));\n\t\t\t}else{\n\t\t\t\tb = DT.fromFormat(String(b), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!a.isValid){\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\n\t\t}else if(!b.isValid){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\t//compare valid values\n\t\t\treturn a - b;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\n\t}else{\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n\t}\n}","import number from './sorters/number.js';\nimport string from './sorters/string.js';\nimport date from './sorters/date.js';\nimport time from './sorters/time.js';\nimport datetime from './sorters/datetime.js';\nimport boolean from './sorters/boolean.js';\nimport array from './sorters/array.js';\nimport exists from './sorters/exists.js';\nimport alphanum from './sorters/alphanum.js';\n\nexport default {\n\tnumber:number,\n\tstring:string,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tboolean:boolean,\n\tarray:array,\n\texists:exists,\n\talphanum:alphanum\n};","//sort numbers\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar decimal = params.decimalSeparator;\n\tvar thousand = params.thousandSeparator;\n\tvar emptyAlign = 0;\n\n\ta = String(a);\n\tb = String(b);\n\n\tif(thousand){\n\t\ta = a.split(thousand).join(\"\");\n\t\tb = b.split(thousand).join(\"\");\n\t}\n\n\tif(decimal){\n\t\ta = a.split(decimal).join(\".\");\n\t\tb = b.split(decimal).join(\".\");\n\t}\n\n\ta = parseFloat(a);\n\tb = parseFloat(b);\n\n\t//handle non numeric values\n\tif(isNaN(a)){\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\n\t}else if(isNaN(b)){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\treturn a - b;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort strings\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\tvar locale;\n\n\t//handle empty values\n\tif(!a){\n\t\temptyAlign =  !b ? 0 : -1;\n\t}else if(!b){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\tswitch(typeof params.locale){\n\t\t\tcase \"boolean\":\n\t\t\t\tif(params.locale){\n\t\t\t\t\tlocale = this.langLocale();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"string\":\n\t\t\t\tlocale = params.locale;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","import datetime from './datetime.js';\n\n//sort date\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"dd/MM/yyyy\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}","import datetime from './datetime.js';\n\n//sort times\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"HH:mm\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}","//sort booleans\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\treturn el1 - el2;\n}","//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar type = params.type || \"length\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tfunction calc(value){\n\t\tvar result;\n\n\t\tswitch(type){\n\t\t\tcase \"length\":\n\t\t\t\tresult = value.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"sum\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"max\":\n\t\t\t\tresult = Math.max.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"min\":\n\t\t\t\tresult = Math.min.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"avg\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t}) / value.length;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t//handle non array values\n\tif(!Array.isArray(a)){\n\t\temptyAlign = !Array.isArray(b) ? 0 : -1;\n\t}else if(!Array.isArray(b)){\n\t\temptyAlign = 1;\n\t}else{\n\t\treturn calc(b) - calc(a);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\treturn el1 - el2;\n}","//sort alpha numeric strings\nexport default function(as, bs, aRow, bRow, column, dir, params){\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\n\t//handle empty values\n\tif(!as && as!== 0){\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t}else if(!bs && bs!== 0){\n\t\temptyAlign =  1;\n\t}else{\n\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\ta = String(as).toLowerCase();\n\t\tb = String(bs).toLowerCase();\n\t\tif(a === b) return 0;\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\ta = a.match(rx);\n\t\tb = b.match(rx);\n\t\tL = a.length > b.length ? b.length : a.length;\n\t\twhile(i < L){\n\t\t\ta1= a[i];\n\t\t\tb1= b[i++];\n\t\t\tif(a1 !== b1){\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\treturn a1 - b1;\n\t\t\t\t}\n\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn a.length > b.length;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","import Module from '../../core/Module.js';\n\nimport defaultSorters from './defaults/sorters.js';\n\nclass Sort extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.sortList = []; //holder current sort\n\t\tthis.changed = false; //has the sort changed since last render\n\n\t\tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\n\t\tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\n\t\tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n\t\tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n\t\tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n\t\tthis.registerTableOption(\"headerSortClickElement\", \"header\"); //element which triggers sort when clicked\n\n\t\tthis.registerColumnOption(\"sorter\");\n\t\tthis.registerColumnOption(\"sorterParams\");\n\n\t\tthis.registerColumnOption(\"headerSort\", true);\n\t\tthis.registerColumnOption(\"headerSortStartingDir\");\n\t\tthis.registerColumnOption(\"headerSortTristate\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.registerDataHandler(this.sort.bind(this), 20);\n\n\t\tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n\t\tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n\t\tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialSort){\n\t\t\tthis.setSort(this.table.options.initialSort);\n\t\t}\n\t}\n\n\tremoteSortParams(data, config, silent, params){\n\t\tvar sorters = this.getSort();\n\n\t\tsorters.forEach((item) => {\n\t\t\tdelete item.column;\n\t\t});\n\n\t\tparams.sort = sorters;\n\n\t\treturn params;\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tuserSetSort(sortList, dir){\n\t\tthis.setSort(sortList, dir);\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\tclearSort(){\n\t\tthis.clear();\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//initialize column header for sorting\n\tinitializeColumn(column){\n\t\tvar sorter = false,\n\t\tcolEl,\n\t\tarrowEl;\n\n\t\tswitch(typeof column.definition.sorter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Sort.sorters[column.definition.sorter]){\n\t\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tsorter = column.definition.sorter;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tcolumn.modules.sort = {\n\t\t\tsorter:sorter, dir:\"none\",\n\t\t\tparams:column.definition.sorterParams || {},\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: column.definition.headerSortTristate,\n\t\t};\n\n\t\tif(column.definition.headerSort !== false){\n\n\t\t\tcolEl = column.getElement();\n\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\n\n\t\t\tswitch(this.table.options.headerSortClickElement){\n\t\t\t\tcase \"icon\":\n\t\t\t\t\tarrowEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"header\":\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch(this.table.options.headerSortElement){\n\t\t\t\tcase \"function\":\n\t\t\t\t\t//do nothing\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\n\t\t\t}\n\n\t\t\t//create sorter arrow\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\n\n\t\t\tcolumn.modules.sort.element = arrowEl;\n\n\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\n\t\t\t//sort on click\n\t\t\t(this.table.options.headerSortClickElement === \"icon\" ? arrowEl : colEl).addEventListener(\"click\", (e) => {\n\t\t\t\tvar dir = \"\",\n\t\t\t\tsorters=[],\n\t\t\t\tmatch = false;\n\n\t\t\t\tif(column.modules.sort){\n\t\t\t\t\tif(column.modules.sort.tristate){\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = this.getSort();\n\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(match > -1){\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\n\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tthis.setSort(sorters);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(dir == \"none\"){\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tthis.setSort(column, dir);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\n\t\t\t\t\tthis.refreshSort();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trefreshSort(){\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.reloadData(null, false, false);\n\t\t}else{\n\t\t\tthis.refreshData(true);\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the sorters have changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//return current sorters\n\tgetSort(){\n\t\tvar self = this,\n\t\tsorters = [];\n\n\t\tself.sortList.forEach(function(item){\n\t\t\tif(item.column){\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\n\t\t\t}\n\t\t});\n\n\t\treturn sorters;\n\t}\n\n\t//change sort list and trigger sort\n\tsetSort(sortList, dir){\n\t\tvar self = this,\n\t\tnewSortList = [];\n\n\t\tif(!Array.isArray(sortList)){\n\t\t\tsortList = [{column: sortList, dir:dir}];\n\t\t}\n\n\t\tsortList.forEach(function(item){\n\t\t\tvar column;\n\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\n\t\t\tif(column){\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\n\t\t});\n\n\t\tself.sortList = newSortList;\n\n\t\tthis.dispatch(\"sort-changed\");\n\t}\n\n\t//clear sorters\n\tclear(){\n\t\tthis.setSort([]);\n\t}\n\n\t//find appropriate sorter for column\n\tfindSorter(column){\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\tsorter = \"string\",\n\t\tfield, value;\n\n\t\tif(row){\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\n\t\t\tif(field){\n\n\t\t\t\tvalue = column.getFieldValue(row);\n\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Sort.sorters[sorter];\n\t}\n\n\t//work through sort list sorting data\n\tsort(data){\n\t\tvar self = this,\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\tsortListActual = [],\n\t\trowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataSorting\")){\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\n\t\t}\n\n\t\tself.clearColumnHeaders();\n\n\t\tif(this.table.options.sortMode !== \"remote\"){\n\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tvar sortObj;\n\n\t\t\t\tif(item.column){\n\t\t\t\t\tsortObj = item.column.modules.sort;\n\n\t\t\t\t\tif(sortObj){\n\n\t\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\t\tif(!sortObj.sorter){\n\t\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\n\t\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\n\t\t}else{\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataSorted\")){\n\t\t\tdata.forEach((row) => {\n\t\t\t\trowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//clear sort arrows on columns\n\tclearColumnHeaders(){\n\t\tthis.table.columnManager.getRealColumns().forEach((column) => {\n\t\t\tif(column.modules.sort){\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t}\n\t\t});\n\t}\n\n\t//set the column header sort direction\n\tsetColumnHeader(column, dir){\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\n\t\tthis.setColumnHeaderSortIcon(column, dir);\n\t}\n\n\tsetColumnHeaderSortIcon(column, dir){\n\t\tvar sortEl = column.modules.sort.element,\n\t\tarrowEl;\n\n\t\tif(column.definition.headerSort && typeof this.table.options.headerSortElement === \"function\"){\n\t\t\twhile(sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\n\n\t\t\tarrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\n\t\t\t\n\t\t\tif(typeof arrowEl === \"object\"){\n\t\t\t\tsortEl.appendChild(arrowEl);\n\t\t\t}else{\n\t\t\t\tsortEl.innerHTML = arrowEl;\n\t\t\t}\n\t\t}\n\t}\n\n\t//sort each item in sort list\n\t_sortItems(data, sortList){\n\t\tvar sorterCount = sortList.length - 1;\n\n\t\tdata.sort((a, b) => {\n\t\t\tvar result;\n\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\n\t\t\t\tlet sortItem = sortList[i];\n\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n\t\t\t\tif(result !== 0){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t//process individual rows for a sort function on active data\n\t_sortRow(a, b, column, dir, params){\n\t\tvar el1Comp, el2Comp;\n\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t}\n}\n\nSort.moduleName = \"sort\";\n\n//load defaults\nSort.sorters = defaultSorters;\n\nexport default Sort;","import Module from '../../core/Module.js';\nimport Cell from '../../core/cell/Cell.js';\n\nclass Tooltip extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.tooltipSubscriber = null,\n\t\tthis.headerSubscriber = null,\n\t\t\n\t\tthis.timeout = null;\n\t\tthis.popupInstance = null;\n\t\t\n\t\tthis.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\n\t\tthis.registerTableOption(\"tooltipDelay\", 300); \n\t\t\n\t\tthis.registerColumnOption(\"tooltip\");\n\t\tthis.registerColumnOption(\"headerTooltip\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\tthis.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\n\t}\t\n\t\n\tinitializeColumn(column){\n\t\tif(column.definition.headerTooltip && !this.headerSubscriber){\n\t\t\tthis.headerSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n\t\t\tthis.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n\t\t}\n\t\t\n\t\tif(column.definition.tooltip && !this.tooltipSubscriber){\n\t\t\tthis.tooltipSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n\t\t\tthis.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n\t\t}\n\t}\n\t\n\tmousemoveCheck(action, e, component){\n\t\tvar tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n\t\t\n\t\tif(tooltip){\n\t\t\tthis.clearPopup();\n\t\t\tthis.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n\t\t}\n\t}\n\n\tmouseoutCheck(action, e, component){\n\t\tif(!this.popupInstance){\n\t\t\tthis.clearPopup();\n\t\t}\n\t}\n\t\n\tclearPopup(action, e, component){\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = null;\n\t\t\n\t\tif(this.popupInstance){\n\t\t\tthis.popupInstance.hide();\n\t\t}\n\t}\n\t\n\tloadTooltip(e, component, tooltip){\n\t\tvar contentsEl, renderedCallback, coords;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(typeof tooltip === \"function\"){\n\t\t\ttooltip = tooltip(e, component.getComponent(), onRendered);\n\t\t}\n\t\t\n\t\tif(tooltip instanceof HTMLElement){\n\t\t\tcontentsEl = tooltip;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\t\n\t\t\tif(tooltip === true){\n\t\t\t\tif(component instanceof Cell){\n\t\t\t\t\ttooltip = component.value;\n\t\t\t\t}else{\n\t\t\t\t\tif(component.definition.field){\n\t\t\t\t\t\tthis.langBind(\"columns|\" + component.definition.field, (value) => {\n\t\t\t\t\t\t\tcontentsEl.innerHTML = tooltip = value || component.definition.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttooltip = component.definition.title;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcontentsEl.innerHTML = tooltip;\n\t\t}\n\t\t\n\t\tif(tooltip || tooltip === 0 || tooltip === false){\n\t\t\tcontentsEl.classList.add(\"tabulator-tooltip\");\n\n\t\t\tcontentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\n\t\t\t\n\t\t\tthis.popupInstance = this.popup(contentsEl);\n\t\t\t\n\t\t\tif(typeof renderedCallback === \"function\"){\n\t\t\t\tthis.popupInstance.renderCallback(renderedCallback);\n\t\t\t}\n\n\t\t\tcoords = this.popupInstance.containerEventCoords(e);\n\t\t\t\n\t\t\tthis.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n\t\t\t\tthis.dispatchExternal(\"TooltipClosed\", component.getComponent());\n\t\t\t\tthis.popupInstance = null;\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"TooltipOpened\", component.getComponent());\n\t\t}\n\t}\n}\n\nTooltip.moduleName = \"tooltip\";\n\nexport default Tooltip;\n","export default {\n\t//is integer\n\tinteger: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && Math.floor(value) === value;\n\t},\n\n\t//is float\n\tfloat: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && value % 1 !== 0;\n\t},\n\n\t//must be a number\n\tnumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn !isNaN(value);\n\t},\n\n\t//must be a string\n\tstring: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn isNaN(value);\n\t},\n\n\t//maximum value\n\tmax: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) <= parameters;\n\t},\n\n\t//minimum value\n\tmin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) >= parameters;\n\t},\n\n\t//starts with  value\n\tstarts: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t},\n\n\t//ends with  value\n\tends: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t},\n\n\n\t//minimum string length\n\tminLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length >= parameters;\n\t},\n\n\t//maximum string length\n\tmaxLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length <= parameters;\n\t},\n\n\t//in provided value list\n\tin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(typeof parameters == \"string\"){\n\t\t\tparameters = parameters.split(\"|\");\n\t\t}\n\n\t\treturn parameters.indexOf(value) > -1;\n\t},\n\n\t//must match provided regex\n\tregex: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar reg = new RegExp(parameters);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//value must be unique in this column\n\tunique: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar unique = true;\n\n\t\tvar cellData = cell.getData();\n\t\tvar column = cell.getColumn()._getSelf();\n\n\t\tthis.table.rowManager.rows.forEach(function(row){\n\t\t\tvar data = row.getData();\n\n\t\t\tif(data !== cellData){\n\t\t\t\tif(value == column.getFieldValue(data)){\n\t\t\t\t\tunique = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn unique;\n\t},\n\n\t//must have a value\n\trequired:function(cell, value, parameters){\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultValidators from './defaults/validators.js';\n\nclass Validate extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.invalidCells = [];\n\t\t\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\n\t\t\n\t\tthis.registerColumnOption(\"validator\");\n\t\t\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n\t}\n\t\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-success\", this.editValidate.bind(this));\n\t\tthis.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n\t\tthis.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Event Handling //////////\n\t///////////////////////////////////\n\t\n\teditValidate(cell, value, previousValue){\n\t\tvar valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\t\t\n\t\t// allow time for editor to make render changes then style cell\n\t\tif(valid !== true){\n\t\t\tsetTimeout(() => {\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t\tthis.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn valid;\n\t}\n\t\n\teditorClear(cell, cancelled){\n\t\tif(cancelled){\n\t\t\tif(cell.column.modules.validate){\n\t\t\t\tthis.cellValidate(cell);\n\t\t\t}\n\t\t}\n\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t}\n\t\n\teditedClear(cell){\n\t\tif(cell.modules.validate){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Cell Functions /////////\n\t///////////////////////////////////\n\t\n\tcellIsValid(cell){\n\t\treturn cell.modules.validate ? (cell.modules.validate.invalid || true) : true;\n\t}\n\t\n\tcellValidate(cell){\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Column Functions ////////\n\t///////////////////////////////////\n\t\n\tcolumnValidate(column){\n\t\tvar invalid = [];\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Row Functions //////////\n\t///////////////////////////////////\n\t\n\trowValidate(row){\n\t\tvar invalid = [];\n\t\t\n\t\trow.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\tuserClearCellValidation(cells){\n\t\tif(!cells){\n\t\t\tcells = this.getInvalidCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.clearValidation(cell._getSelf());\n\t\t});\n\t}\n\t\n\tuserValidate(cells){\n\t\tvar output = [];\n\t\t\n\t\t//clear row data\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trow = row.getComponent();\n\t\t\t\n\t\t\tvar valid = row.validate();\n\t\t\t\n\t\t\tif(valid !== true){\n\t\t\t\toutput = output.concat(valid);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output.length ? output : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.validator !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//validate\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = [],\n\t\tvalidator;\n\t\t\n\t\tif(column.definition.validator){\n\t\t\t\n\t\t\tif(Array.isArray(column.definition.validator)){\n\t\t\t\tcolumn.definition.validator.forEach((item) => {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\t\t\t\t\t\n\t\t\t\t\tif(validator){\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\t\t\t\t\n\t\t\t\tif(validator){\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t}\n\t\n\t_extractValidator(value){\n\t\tvar type, params, pos;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tpos = value.indexOf(':');\n\t\t\t\n\t\t\t\tif(pos > -1){\n\t\t\t\t\ttype = value.substring(0,pos);\n\t\t\t\t\tparams = value.substring(pos+1);\n\t\t\t\t}else{\n\t\t\t\t\ttype = value;\n\t\t\t\t}\n\t\t\t\n\t\t\t\treturn this._buildValidator(type, params);\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\treturn this._buildValidator(value);\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t}\n\t}\n\t\n\t_buildValidator(type, params){\n\t\t\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\n\t\t\n\t\tif(!func){\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn {\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc:func,\n\t\t\t\tparams:params,\n\t\t\t};\n\t\t}\n\t}\n\t\n\tvalidate(validators, cell, value){\n\t\tvar self = this,\n\t\tfailedValidators = [],\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\n\t\tif(validators){\n\t\t\tvalidators.forEach((item) => {\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\n\t\t\t\t\tfailedValidators.push({\n\t\t\t\t\t\ttype:item.type,\n\t\t\t\t\t\tparameters:item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(!cell.modules.validate){\n\t\t\tcell.modules.validate = {};\n\t\t}\n\t\t\n\t\tif(!failedValidators.length){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}else{\n\t\t\tcell.modules.validate.invalid = failedValidators;\n\t\t\t\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t}\n\t\t\t\n\t\t\tif(invalidIndex == -1){\n\t\t\t\tthis.invalidCells.push(cell);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn failedValidators.length ? failedValidators : true;\n\t}\n\t\n\tgetInvalidCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.invalidCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearValidation(cell){\n\t\tvar invalidIndex;\n\t\t\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\n\t\t\t\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\t\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nValidate.moduleName = \"validate\";\n\n//load defaults\nValidate.validators = defaultValidators;\n\nexport default Validate;\n","export default class OptionsList {\n\tconstructor(table, msgType, defaults = {}){\n\t\tthis.table = table;\n\t\tthis.msgType = msgType;\n\t\tthis.registeredDefaults = Object.assign({}, defaults);\n\t}\n\t\n\tregister(option, value){\n\t\tthis.registeredDefaults[option] = value;\n\t}\n\t\n\tgenerate(defaultOptions, userOptions = {}){\n\t\tvar output = Object.assign({}, this.registeredDefaults),\n\t\twarn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true;\n\t\t\n\t\tObject.assign(output, defaultOptions);\n\t\t\n\t\tfor (let key in userOptions){\n\t\t\tif(!output.hasOwnProperty(key)){\n\t\t\t\tif(warn){\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key);\n\t\t\t\t}\n\n\t\t\t\toutput[key] = userOptions.key;\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfor (let key in output){\n\t\t\tif(key in userOptions){\n\t\t\t\toutput[key] = userOptions[key];\n\t\t\t}else{\n\t\t\t\tif(Array.isArray(output[key])){\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\n\t\t\t\t\tdelete output[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Renderer extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.elementVertical = table.rowManager.element;\n\t\tthis.elementHorizontal = table.columnManager.element;\n\t\tthis.tableElement =  table.rowManager.tableElement;\n\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\n\t}\n\n\n\t///////////////////////////////////\n\t/////// Internal Bindings /////////\n\t///////////////////////////////////\n\n\tinitialize(){\n\t\t//initialize core functionality\n\t}\n\n\tclearRows(){\n\t\t//clear down existing rows layout\n\t}\n\n\tclearColumns(){\n\t\t//clear down existing columns layout\n\t}\n\n\n\treinitializeColumnWidths(columns){\n\t\t//resize columns to fit data\n\t}\n\n\n\trenderRows(){\n\t\t//render rows from a clean slate\n\t}\n\n\trenderColumns(){\n\t\t//render columns from a clean slate\n\t}\n\n\trerenderRows(callback){\n\t\t// rerender rows and keep position\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t}\n\n\trerenderColumns(update, blockRedraw){\n\t\t//rerender columns\n\t}\n\n\trenderRowCells(row){\n\t\t//render the cells in a row\n\t}\n\n\trerenderRowCells(row, force){\n\t\t//rerender the cells in a row\n\t}\n\n\tscrollColumns(left, dir){\n\t\t//handle horizontal scrolling\n\t}\n\n\tscrollRows(top, dir){\n\t\t//handle vertical scrolling\n\t}\n\n\tresize(){\n\t\t//container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n\t}\n\n\tscrollToRow(row){\n\t\t//scroll to a specific row\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\t//determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\t//return the visible rows\n\t\treturn [];\n\t}\n\n\t///////////////////////////////////\n\t//////// Helper Functions /////////\n\t///////////////////////////////////\n\n\trows(){\n\t\treturn this.table.rowManager.getDisplayRows();\n\t}\n\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t/////// External Triggers /////////\n\t/////// (DO NOT OVERRIDE) /////////\n\t///////////////////////////////////\n\n\tclear(){\n\t\t//clear down existing layout\n\t\tthis.clearRows();\n\t\tthis.clearColumns();\n\t}\n\n\trender(){\n\t\t//render from a clean slate\n\t\tthis.renderRows();\n\t\tthis.renderColumns();\n\t}\n\n\trerender(callback){\n\t\t// rerender and keep position\n\t\tthis.rerenderRows();\n\t\tthis.rerenderColumns();\n\t}\n\n\tscrollToRowPosition(row, position, ifVisible){\n\t\tvar rowIndex = this.rows().indexOf(row),\n\t\trowEl = row.getElement(),\n\t\toffset = 0;\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(rowIndex > -1){\n\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif(position === \"nearest\"){\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\t\t\t\tthis.scrollToRow(row);\n\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\tthis.elementVertical.scrollTop = rowEl.offsetTop;\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\n\nexport default class BasicHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\trenderRowCells(row, inFragment) {\n\t\tconst rowFrag = document.createDocumentFragment();\n\t\trow.cells.forEach((cell) => {\n\t\t\trowFrag.appendChild(cell.getElement());\n\t\t});\n\t\trow.element.appendChild(rowFrag);\n\t\t\n\t\tif(!inFragment){\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tcolumns.forEach(function(column){\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\n\nexport default class VirtualDomHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftCol = 0;\n\t\tthis.rightCol = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\t\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t\t\n\t\tthis.fitDataColAvg = 0;\n\t\t\n\t\tthis.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\t\t\n\t\tthis.visibleRows = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.isFitData = false;\n\t\t\n\t\tthis.columns = [];\n\t}\n\t\n\tinitialize(){\n\t\tthis.compatibilityCheck();\n\t\tthis.layoutCheck();\n\t\tthis.vertScrollListen();\n\t}\n\t\n\tcompatibilityCheck(){\t\t\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n\t\t}\n\t\t\n\t\tif(this.options(\"responsiveLayout\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n\t\t}\n\t\t\n\t\tif(this.options(\"rtl\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n\t\t}\n\t}\n\t\n\tlayoutCheck(){\n\t\tthis.isFitData = this.options(\"layout\").startsWith('fitData');\n\t}\n\t\n\tvertScrollListen(){\n\t\tthis.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n\t}\n\t\n\tclearVisRowCache(){\n\t\tthis.visibleRows = null;\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\t\n\trenderColumns(row, force){\n\t\tthis.dataChange();\n\t}\n\t\n\t\n\tscrollColumns(left, dir){\n\t\tif(this.scrollLeft != left){\n\t\t\tthis.scrollLeft = left;\n\t\t\t\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n\t\t}\n\t}\n\t\n\tcalcWindowBuffer(){\n\t\tvar buffer = this.elementVertical.clientWidth;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\tvar width = column.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > buffer){\n\t\t\t\t\tbuffer = width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.windowBuffer = buffer * 2;\n\t}\n\t\n\trerenderColumns(update, blockRedraw){\t\t\n\t\tvar old = {\n\t\t\tcols:this.columns,\n\t\t\tleftCol:this.leftCol,\n\t\t\trightCol:this.rightCol,\n\t\t},\n\t\tcolPos = 0;\n\t\t\n\t\tif(update && !this.initialized){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.clear();\n\t\t\n\t\tthis.calcWindowBuffer();\n\t\t\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\n\t\t\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tvar config = {},\n\t\t\twidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tif(!column.modules.frozen){\t\t\t\n\t\t\t\t\twidth = column.getWidth();\n\n\t\t\t\t\tconfig.leftPos = colPos;\n\t\t\t\t\tconfig.rightPos = colPos + width;\n\t\t\t\t\t\n\t\t\t\t\tconfig.width = width;\n\t\t\t\t\t\n\t\t\t\t\tif (this.isFitData) {\n\t\t\t\t\t\tconfig.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\n\t\t\t\t\t\t//column is visible\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.leftCol == -1){\n\t\t\t\t\t\t\tthis.leftCol = this.columns.length;\n\t\t\t\t\t\t\tthis.vDomPadLeft = colPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.rightCol = this.columns.length;\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// column is hidden\n\t\t\t\t\t\tif(this.leftCol !== -1){\n\t\t\t\t\t\t\tthis.vDomPadRight += width;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.columns.push(column);\n\t\t\t\t\t\n\t\t\t\t\tcolumn.modules.vdomHoz = config;\n\t\t\t\t\t\n\t\t\t\t\tcolPos += width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tif(!update || this.reinitChanged(old)){\n\t\t\t\tthis.reinitializeRows();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\n\t}\n\t\n\trenderRowCells(row){\n\t\tif(this.initialized){\n\t\t\tthis.initializeRow(row);\n\t\t}else{\n\t\t\tconst rowFrag = document.createDocumentFragment();\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\trowFrag.appendChild(cell.getElement());\n\t\t\t});\n\t\t\trow.element.appendChild(rowFrag);\n\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\trerenderRowCells(row, force){\n\t\tthis.reinitializeRow(row, force);\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\tthis.columns[i].reinitializeWidth();\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\t\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tclear(){\n\t\tthis.columns = [];\n\t\t\n\t\tthis.leftCol = -1;\n\t\tthis.rightCol = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t}\n\t\n\tdataChange(){\n\t\tvar change = false,\n\t\trow, rowEl;\n\t\t\n\t\tif(this.isFitData){\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif(!column.definition.width && column.visible){\n\t\t\t\t\tchange = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\n\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\t\t\n\t\t\t\trow = this.chain(\"rows-sample\", [1], [], () => {\n\t\t\t\t\treturn this.table.rowManager.getDisplayRows();\n\t\t\t\t})[0];\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trowEl = row.getElement();\n\t\t\t\t\t\n\t\t\t\t\trow.generateCells();\n\t\t\t\t\t\n\t\t\t\t\tthis.tableElement.appendChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tfor(let colEnd = 0; colEnd < row.cells.length; colEnd++){\n\t\t\t\t\t\tlet cell = row.cells[colEnd];\n\t\t\t\t\t\trowEl.appendChild(cell.getElement());\n\t\t\t\t\t\t\n\t\t\t\t\t\tcell.column.reinitializeWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\n\t\t\t\tthis.layoutRefresh();\n\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treinitChanged(old){\n\t\tvar match = true;\n\t\t\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\told.cols.forEach((col, i) => {\n\t\t\tif(col !== this.columns[i]){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn !match;\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.getVisibleRows(),\n\t\totherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\n\t\tvisibleRows.forEach((row) => {\n\t\t\tthis.reinitializeRow(row, true);\n\t\t});\n\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t}\n\t\n\tgetVisibleRows(){\n\t\tif (!this.visibleRows){\n\t\t\tthis.visibleRows = this.table.rowManager.getVisibleRows();\n\t\t}\n\t\t\n\t\treturn this.visibleRows;\t\n\t}\n\t\n\tscroll(diff){\n\t\tthis.vDomScrollPosLeft += diff;\n\t\tthis.vDomScrollPosRight += diff;\n\t\t\n\t\tif(Math.abs(diff) > (this.windowBuffer / 2)){\n\t\t\tthis.rerenderColumns();\n\t\t}else{\n\t\t\tif(diff > 0){\n\t\t\t\t//scroll right\n\t\t\t\tthis.addColRight();\n\t\t\t\tthis.removeColLeft();\n\t\t\t}else{\n\t\t\t\t//scroll left\n\t\t\t\tthis.addColLeft();\n\t\t\t\tthis.removeColRight();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcolPositionAdjust (start, end, diff){\n\t\tfor(let i = start; i < end; i++){\n\t\t\tlet column = this.columns[i];\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\n\t\t}\n\t}\n\t\n\taddColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\n\t\t\tlet column = this.columns[this.rightCol + 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling);\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tthis.rightCol++; // Don't move this below the >= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.rightCol >= (this.columns.length - 1)){\n\t\t\t\t\t\tthis.vDomPadRight = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadRight -= column.getWidth();\n\t\t\t\t\t}\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\taddColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol - 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement());\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.leftCol--; // don't move this below the <= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.leftCol <= 0){ // replicating logic in addColRight\n\t\t\t\t\t\tthis.vDomPadLeft = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadLeft -= column.getWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet diff = this.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tif(diff){\n\t\t\t\t\t\tthis.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n\t\t\t\t\t\tthis.vDomPadRight -= diff;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.rightCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColRight\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadRight += column.getWidth();\n\t\t\t\t\tthis.rightCol --;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\t\t\t\t\t\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColLeft\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadLeft += column.getWidth();\n\t\t\t\t\tthis.leftCol ++;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tfitDataColActualWidthCheck(column){\n\t\tvar newWidth, widthDiff;\n\t\t\n\t\tif(column.modules.vdomHoz.fitDataCheck){\n\t\t\tcolumn.reinitializeWidth();\n\t\t\t\n\t\t\tnewWidth = column.getWidth();\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\n\t\t\t\n\t\t\tif(widthDiff){\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\n\t\t\t\tthis.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\n\t\t}\n\t\t\n\t\treturn widthDiff;\n\t}\n\t\n\tinitializeRow(row){\n\t\tif(row.type !== \"group\"){\n\t\t\trow.modules.vdomHoz = {\n\t\t\t\tleftCol:this.leftCol,\n\t\t\t\trightCol:this.rightCol,\n\t\t\t};\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\t\tthis.appendCell(row, this.columns[i]);\n\t\t\t}\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tappendCell(row, column){\n\t\tif(column && column.visible){\n\t\t\tlet cell = row.getCell(column);\n\t\t\t\n\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\tcell.cellRendered();\n\t\t}\n\t}\n\t\n\treinitializeRow(row, force){\n\t\tif(row.type !== \"group\"){\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\n\t\t\t\t\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n\n\t\t\t\tthis.initializeRow(row);\n\t\t\t}\n\t\t}\n\t}\n}","import CoreFeature from './CoreFeature.js';\nimport Column from './column/Column.js';\nimport ColumnComponent from './column/ColumnComponent.js';\nimport Helpers from './tools/Helpers.js';\nimport OptionsList from './tools/OptionsList.js';\n\nimport RendererBasicHorizontal from './rendering/renderers/BasicHorizontal.js';\nimport RendererVirtualDomHorizontal from './rendering/renderers/VirtualDomHorizontal.js';\n\nimport defaultColumnOptions from './column/defaults/options.js';\n\nexport default class ColumnManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.blockHozScrollEvent = false;\n\t\tthis.headersElement = null;\n\t\tthis.contentsElement = null;\n\t\tthis.element = null ; //containing element\n\t\tthis.columns = []; // column definition object\n\t\tthis.columnsByIndex = []; //columns by index\n\t\tthis.columnsByField = {}; //columns by field\n\t\tthis.scrollLeft = 0;\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockUpdate = null; //store latest redraw update only status\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t////////////// Setup Functions /////////////////\n\t\n\tinitialize(){\n\t\tthis.initializeRenderer();\n\t\t\n\t\tthis.headersElement = this.createHeadersElement();\n\t\tthis.contentsElement = this.createHeaderContentsElement();\n\t\tthis.element = this.createHeaderElement();\n\t\t\n\t\tthis.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild);\n\t\tthis.element.insertBefore(this.contentsElement, this.element.firstChild);\n\n\t\tthis.initializeScrollWheelWatcher();\n\t\t\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n\t}\n\n\tpadVerticalScrollbar(width){\n\t\tif(this.table.rtl){\n\t\t\tthis.headersElement.style.marginLeft = width + \"px\";\n\t\t}else{\n\t\t\tthis.headersElement.style.marginRight = width + \"px\";\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomHorizontal,\n\t\t\t\"basic\": RendererBasicHorizontal,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderHorizontal;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n\t\t}\n\t}\n\t\n\t\n\tcreateHeadersElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-headers\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\treturn el;\n\t}\n\n\tcreateHeaderContentsElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header-contents\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tif(!this.table.options.headerVisible){\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return containing contents element\n\tgetContentsElement(){\n\t\treturn this.contentsElement;\n\t}\n\t\n\t\n\t//return header containing element\n\tgetHeadersElement(){\n\t\treturn this.headersElement;\n\t}\n\t\n\t//scroll horizontally to match table body\n\tscrollHorizontal(left){\n\t\tthis.contentsElement.scrollLeft = left;\n\n\t\tthis.scrollLeft = left;\n\t\t\n\t\tthis.renderer.scrollColumns(left);\n\t}\n\n\tinitializeScrollWheelWatcher(){\n\t\tthis.contentsElement.addEventListener(\"wheel\", (e) => {\n\t\t\tvar left;\n\n\t\t\tif(e.deltaX){\n\t\t\t\tleft = this.contentsElement.scrollLeft + e.deltaX;\n\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t///////////// Column Setup Functions /////////////\n\tgenerateColumnsFromRowData(data){\n\t\tvar cols = [],\n\t\tdefinitions = this.table.options.autoColumnsDefinitions,\n\t\trow, sorter;\n\t\t\n\t\tif(data && data.length){\n\t\t\t\n\t\t\trow = data[0];\n\t\t\t\n\t\t\tfor(var key in row){\n\t\t\t\tlet col = {\n\t\t\t\t\tfield:key,\n\t\t\t\t\ttitle:key,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tlet value = row[key];\n\t\t\t\t\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(value)){\n\t\t\t\t\t\t\tsorter = \"array\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcol.sorter = sorter;\n\t\t\t\t\n\t\t\t\tcols.push(col);\n\t\t\t}\n\t\t\t\n\t\t\tif(definitions){\n\t\t\t\t\n\t\t\t\tswitch(typeof definitions){\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(definitions)){\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.table.options.columns = cols;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.table.options.columns = cols;\n\t\t\t}\n\t\t\t\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t}\n\t\n\tsetColumns(cols, row){\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n\t\t\n\t\tthis.columns = [];\n\t\tthis.columnsByIndex = [];\n\t\tthis.columnsByField = {};\n\t\t\n\t\tthis.dispatch(\"columns-loading\");\n\t\t\n\t\tcols.forEach((def, i) => {\n\t\t\tthis._addColumn(def);\n\t\t});\n\t\t\n\t\tthis._reIndexColumns();\n\t\t\n\t\tthis.dispatch(\"columns-loaded\");\n\t\t\n\t\tthis.rerenderColumns(false, true);\n\t\t\n\t\tthis.redraw(true);\n\t}\n\t\n\t_addColumn(definition, before, nextToColumn){\n\t\tvar column = new Column(definition, this),\n\t\tcolEl = column.getElement(),\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\t\t\n\t\tif(nextToColumn && index > -1){\n\t\t\tvar topColumn = nextToColumn.getTopColumn();\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\n\t\t\tvar nextEl = topColumn.getElement();\n\t\t\t\n\t\t\tif(before){\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t}else{\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t}else{\n\t\t\tif(before){\n\t\t\t\tthis.columns.unshift(column);\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t}else{\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\t\t}\n\t\t\n\t\tcolumn.columnRendered();\n\t\t\n\t\treturn column;\n\t}\n\t\n\tregisterColumnField(col){\n\t\tif(col.definition.field){\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t}\n\t\n\tregisterColumnPosition(col){\n\t\tthis.columnsByIndex.push(col);\n\t}\n\t\n\t_reIndexColumns(){\n\t\tthis.columnsByIndex = [];\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t}\n\t\n\t//ensure column headers take up the correct amount of space in column groups\n\tverticalAlignHeaders(){\n\t\tvar minHeight = 0;\n\t\t\n\t\tif(!this.redrawBlock){\n\n\t\t\tthis.headersElement.style.height=\"\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.clearVerticalAlign();\n\t\t\t});\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tvar height = column.getHeight();\n\t\t\t\t\n\t\t\t\tif(height > minHeight){\n\t\t\t\t\tminHeight = height;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.headersElement.style.height = minHeight + \"px\";\n\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n\t\t\t});\n\t\t\t\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\t//////////////// Column Details /////////////////\n\tfindColumn(subject){\n\t\tvar columns;\n\n\t\tif(typeof subject == \"object\"){\n\t\t\t\n\t\t\tif(subject instanceof Column){\n\t\t\t\t//subject is column element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof ColumnComponent){\n\t\t\t\t//subject is public column component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\n\t\t\t\tcolumns = [];\n\n\t\t\t\tthis.columns.forEach((column) => {\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t\t});\n\n\t\t\t\t//subject is a HTML element of the column header\n\t\t\t\tlet match = columns.find((column) => {\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t//subject should be treated as the field name of the column\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetColumnByField(field){\n\t\treturn this.columnsByField[field];\n\t}\n\t\n\tgetColumnsByFieldRoot(root){\n\t\tvar matches = [];\n\t\t\n\t\tObject.keys(this.columnsByField).forEach((field) => {\n\t\t\tvar fieldRoot = field.split(\".\")[0];\n\t\t\tif(fieldRoot === root){\n\t\t\t\tmatches.push(this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn matches;\n\t}\n\t\n\tgetColumnByIndex(index){\n\t\treturn this.columnsByIndex[index];\n\t}\n\t\n\tgetFirstVisibleColumn(){\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\n\t\t\treturn col.visible;\n\t\t});\n\t\t\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t}\n\t\n\tgetColumns(){\n\t\treturn this.columns;\n\t}\n\t\n\tfindColumnIndex(column){\n\t\treturn this.columnsByIndex.findIndex((col) => {\n\t\t\treturn column === col;\n\t\t});\n\t}\n\t\n\t//return all columns that are not groups\n\tgetRealColumns(){\n\t\treturn this.columnsByIndex;\n\t}\n\t\n\t//traverse across columns and call action\n\ttraverse(callback){\n\t\tthis.columnsByIndex.forEach((column,i) =>{\n\t\t\tcallback(column, i);\n\t\t});\n\t}\n\t\n\t//get definitions of actual columns\n\tgetDefinitions(active){\n\t\tvar output = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(!active || (active && column.visible)){\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//get full nested definition tree\n\tgetDefinitionTree(){\n\t\tvar output = [];\n\t\t\n\t\tthis.columns.forEach((column) => {\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(structured){\n\t\tvar output = [],\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn width;\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\t\t\n\t\tif(after){\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\t\t\n\t\tthis.moveColumnActual(from, to, after);\n\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.table.rowManager.reinitialize();\n\t}\n\t\n\tmoveColumnActual(from, to, after){\n\t\tif(from.parent.isGroup){\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t}else{\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\t\t\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\t\t\n\t\tthis.rerenderColumns(true);\n\t\t\n\t\tthis.dispatch(\"column-moved\", from, to, after);\n\t\t\n\t\tif(this.subscribedExternal(\"columnMoved\")){\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\t}\n\t\n\t_moveColumnInArray(columns, from, to, after, updateRows){\n\t\tvar\tfromIndex = columns.indexOf(from),\n\t\ttoIndex, rows = [];\n\t\t\n\t\tif (fromIndex > -1) {\n\t\t\t\n\t\t\tcolumns.splice(fromIndex, 1);\n\t\t\t\n\t\t\ttoIndex = columns.indexOf(to);\n\t\t\t\n\t\t\tif (toIndex > -1) {\n\t\t\t\t\n\t\t\t\tif(after){\n\t\t\t\t\ttoIndex = toIndex+1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\t\t\t\n\t\t\tcolumns.splice(toIndex, 0, from);\n\t\t\t\n\t\t\tif(updateRows){\n\t\t\t\t\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n\t\t\t\t\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\n\t\t\t\t\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tif(row.cells.length){\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tscrollToColumn(column, position, ifVisible){\n\t\tvar left = 0,\n\t\toffset = column.getLeftOffset(),\n\t\tadjust = 0,\n\t\tcolEl = column.getElement();\n\t\t\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\tadjust = -this.element.clientWidth / 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//check column visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//calculate scroll position\n\t\t\t\tleft = offset + adjust;\n\t\t\t\t\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t\t\n\t\t\t\tresolve();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tgenerateCells(row){\n\t\tvar cells = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\t\t\n\t\treturn cells;\n\t}\n\t\n\t//////////////// Column Management /////////////////\n\tgetFlexBaseWidth(){\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\n\t\tfixedWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar if present\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t}\n\t\t\n\t\tthis.columnsByIndex.forEach(function(column){\n\t\t\tvar width, minWidth, colWidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\twidth = column.definition.width || 0;\n\t\t\t\t\n\t\t\t\tminWidth = parseInt(column.minWidth);\n\t\t\t\t\n\t\t\t\tif(typeof(width) == \"string\"){\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn fixedWidth;\n\t}\n\t\n\taddColumn(definition, before, nextToColumn){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\n\t\t\t\n\t\t\tthis._reIndexColumns();\n\t\t\t\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\n\t\t\t\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.redraw(true);\n\t\t\t\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t\t\n\t\t\tthis.rerenderColumns();\n\t\t\t\n\t\t\tresolve(column);\n\t\t});\n\t}\n\t\n\t//remove column from system\n\tderegisterColumn(column){\n\t\tvar field = column.getField(),\n\t\tindex;\n\t\t\n\t\t//remove from field list\n\t\tif(field){\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\t\t\n\t\t//remove from index list\n\t\tindex = this.columnsByIndex.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\t\t\n\t\t//remove from column list\n\t\tindex = this.columns.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.redraw();\n\t}\n\t\n\trerenderColumns(update, silent){\n\t\tif(!this.redrawBlock){\n\t\t\tthis.renderer.rerenderColumns(update, silent);\n\t\t}else{\n\t\t\tif(update === false || (update === true && this.redrawBlockUpdate === null)){\n\t\t\t\tthis.redrawBlockUpdate = update;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockUpdate = null;\n\t}\n\t\n\trestoreRedraw(){\n\t\tthis.redrawBlock = false;\n\t\tthis.verticalAlignHeaders();\n\t\tthis.renderer.rerenderColumns(this.redrawBlockUpdate);\n\t\t\n\t}\n\t\n\t//redraw columns\n\tredraw(force){\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.verticalAlignHeaders();\n\t\t}\n\t\t\n\t\tif(force){\n\t\t\tthis.table.rowManager.resetScroll();\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\t\t\n\t\tif(!this.confirm(\"table-redrawing\", force)){\n\t\t\tthis.layoutRefresh(force);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-redraw\", force);\n\t\t\n\t\tthis.table.footerManager.redraw();\n\t}\n}","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class BasicVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.verticalFillMode = \"fill\";\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\t\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\t\t\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\telement.scrollTop = 0;\n\t\telement.scrollLeft = 0;\n\t\t\n\t\telement.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\t}\n\t\n\trenderRows() {\n\t\tvar element = this.tableElement,\n\t\tonlyGroupHeaders = true,\n\t\ttableFrag = document.createDocumentFragment(),\n\t\trows = this.rows();\n\t\t\n\t\trows.forEach((row, index) => {\n\t\t\tthis.styleRow(row, index);\n\t\t\trow.initialize(false, true);\n\t\t\t\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t\t\n\t\t\ttableFrag.appendChild(row.getElement());\n\t\t});\n\t\t\n\t\telement.appendChild(tableFrag);\n\t\t\n\t\trows.forEach((row) => {\n\t\t\trow.rendered();\n\t\t\t\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.calcHeight(true);\n\t\t\t}\n\t\t});\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.setCellHeight();\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n\t\n\trerenderRows(callback){\t\n\t\tthis.clearRows();\n\t\t\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t\t\n\t\tthis.renderRows();\n\t}\n\t\n\tscrollToRowNearestTop(row){\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\n\t\t\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n\t}\n\t\n\tscrollToRow(row){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n\t}\n\t\n\tvisibleRows(includingBuffer){\n\t\treturn this.rows();\n\t}\n\t\n}\n","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class VirtualDomVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\t\tthis.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\t}\n\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.style.paddingTop = \"\";\n\t\telement.style.paddingBottom = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\n\t\tthis.elementVertical.scrollTop = 0;\n\t\tthis.elementVertical.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\t\tthis.vDomBottom = 0;\n\t\tthis.vDomTopPad = 0;\n\t\tthis.vDomBottomPad = 0;\n\t\tthis.vDomScrollPosTop = 0;\n\t\tthis.vDomScrollPosBottom = 0;\n\t}\n\n\trenderRows(){\n\t\tthis._virtualRenderFill();\n\t}\n\n\trerenderRows(callback){\n\t\tvar scrollTop = this.elementVertical.scrollTop;\n\t\tvar topRow = false;\n\t\tvar topOffset = false;\n\n\t\tvar left = this.table.rowManager.scrollLeft;\n\n\t\tvar rows = this.rows();\n\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\n\t\t\tif(rows[i]){\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\n\t\t\t\t\ttopOffset = diff;\n\t\t\t\t\ttopRow = i;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trows.forEach((row) => {\n\t\t\trow.deinitializeHeight();\n\t\t});\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\n\t\tif(this.rows().length){\n\t\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\n\t\t}else{\n\t\t\tthis.clear();\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\n\t\tthis.scrollColumns(left);\n\t}\n\n\tscrollColumns(left){\n\t\tthis.table.rowManager.scrollHorizontal(left);\n\t}\n\n\tscrollRows(top, dir){\n\t\tvar topDiff = top - this.vDomScrollPosTop;\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\t\tvar rows = this.rows();\n\n\t\tthis.scrollTop = top;\n\n\t\tif(-topDiff > margin || bottomDiff > margin){\n\t\t\t//if big scroll redraw table;\n\t\t\tvar left = this.table.rowManager.scrollLeft;\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\n\t\t\tthis.scrollColumns(left);\n\t\t}else{\n\n\t\t\tif(dir){\n\t\t\t\t//scrolling up\n\t\t\t\tif(topDiff < 0){\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\n\t\t\t\t}\n\n\t\t\t\tif(bottomDiff < 0){\n\t\t\t\t\t//hide bottom row if needed\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(bottomDiff >= 0){\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\n\t\t\t\t}\n\n\t\t\t\t//scrolling down\n\t\t\t\tif(topDiff >= 0){\n\t\t\t\t\t//hide top row if needed\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(){\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowIndex = this.rows().indexOf(row);\n\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n\t}\n\n\tscrollToRow(row){\n\t\tvar index = this.rows().indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tthis._virtualRenderFill(index, true);\n\t\t}\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\tvar topEdge = this.elementVertical.scrollTop,\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\n\t\ttopFound = false,\n\t\ttopRow = 0,\n\t\tbottomRow = 0,\n\t\trows = this.rows();\n\n\t\tif(includingBuffer){\n\t\t\ttopRow = this.vDomTop;\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}else{\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\t\t\t\tif(rows[i]){\n\t\t\t\t\tif(!topFound){\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t}\n\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\n\t//full virtual render\n\t_virtualRenderFill(position, forceMove, offset) {\n\t\tvar\telement = this.tableElement,\n\t\tholder = this.elementVertical,\n\t\ttopPad = 0,\n\t\trowsHeight = 0,\n\t\trowHeight = 0,\n\t\theightOccupied = 0,\n\t\ttopPadHeight = 0,\n\t\ti = 0,\n\t\trows = this.rows(),\n\t\trowsCount = rows.length,\n\t\tindex = 0,\n\t\trow,\n\t\trowFragment,\n\t\trenderedRows = [],\n\t\ttotalRowsRendered = 0,\n\t\trowsToRender = 0,\n\t\tfixedHeight = this.table.rowManager.fixedHeight,\n\t\tcontainerHeight = this.elementVertical.clientHeight, \n\t\tavgRowHeight = this.table.options.rowHeight, \n\t\tresized = true;\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif(!position){\n\t\t\tthis.clear();\n\t\t}else {\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\t\t//check if position is too close to bottom of table\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n\n\t\t\tif(heightOccupied < containerHeight){\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n\t\t\t\tif(position < 0){\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\n\t\t\tthis.vDomTop = position;\n\t\t\tthis.vDomBottom = position -1;\n\n\t\t\tif(fixedHeight || this.table.options.maxHeight) {\n\t\t\t\tif(avgRowHeight) {\n\t\t\t\t\trowsToRender = (containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight);\n\t\t\t\t}\n\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil(rowsToRender));\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowsToRender = rowsCount;\n\t\t\t}\n\n\t\t\twhile(((rowsToRender == rowsCount || rowsHeight <= containerHeight + this.vDomWindowBuffer) || totalRowsRendered < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount -1) {\n\t\t\t\trenderedRows = [];\n\t\t\t\trowFragment = document.createDocumentFragment();\n\n\t\t\t\ti = 0;\n\n\t\t\t\twhile ((i < rowsToRender) && this.vDomBottom < rowsCount -1) {\t\n\t\t\t\t\tindex = this.vDomBottom + 1,\n\t\t\t\t\trow = rows[index];\n\n\t\t\t\t\tthis.styleRow(row, index);\n\n\t\t\t\t\trow.initialize(false, true);\n\t\t\t\t\tif(!row.heightInitialized && !this.table.options.rowHeight){\n\t\t\t\t\t\trow.clearCellHeight();\n\t\t\t\t\t}\n\n\t\t\t\t\trowFragment.appendChild(row.getElement());\n\t\t\t\t\trenderedRows.push(row);\n\t\t\t\t\tthis.vDomBottom ++;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t\tif(!renderedRows.length){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telement.appendChild(rowFragment);\n\t\t\t\t\n\t\t\t\t// NOTE: The next 3 loops are separate on purpose\n\t\t\t\t// This is to batch up the dom writes and reads which drastically improves performance \n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trow.rendered();\n\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.calcHeight(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.setCellHeight();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trowHeight = row.getHeight();\n\t\t\t\t\t\n\t\t\t\t\tif(totalRowsRendered < topPad){\n\t\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t\t}else {\n\t\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t}\n\t\t\t\t\ttotalRowsRendered++;\n\t\t\t\t});\n\n\t\t\t\tresized = this.table.rowManager.adjustTableSize();\n\t\t\t\tcontainerHeight = this.elementVertical.clientHeight;\n\t\t\t\tif(resized && (fixedHeight || this.table.options.maxHeight))\n\t\t\t\t{\n\t\t\t\t\tavgRowHeight = rowsHeight / totalRowsRendered;\n\t\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil((containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight)));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!position){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t//adjust row height to match average of rendered elements\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / totalRowsRendered);\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\n\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n\t\t\t}else {\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\t\t\t\n\t\t\telement.style.paddingTop = this.vDomTopPad+\"px\";\n\t\t\telement.style.paddingBottom = this.vDomBottomPad+\"px\";\n\n\t\t\tif(forceMove){\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove){\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\tthis.dispatch(\"render-virtual-fill\");\n\t\t}\n\t}\n\n\t_addTopRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomTop -1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tif(this.vDomTop){\n\t\t\t\tlet row = rows[index],\n\t\t\t\trowHeight, initialized;\n\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\n\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.initialize();\n\n\t\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\t\tthis.vDomTop--;\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t\ti++;\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad -= paddingAdjust;\n\n\t\t\tif(this.vDomTopPad < 0){\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t}\n\n\t\t\tif(index < 1){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\n\t\t}\n\t}\n\n\t_removeTopRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomTop],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomTop++;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad += paddingAdjust;\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n\t\t}\n\t}\n\n\t_addBottomRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomBottom + 1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[index],\n\t\t\trowHeight, initialized;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\ttable.appendChild(row.getElement());\n\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.initialize();\n\n\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tthis.vDomBottom++;\n\t\t\t\t\tindex++;\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\n\t\t}\n\t}\n\n\t_removeBottomRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomBottom],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomBottom --;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad += paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\n\t\t}\n\t}\n\n\t_quickNormalizeRowHeight(rows){\n\t\tfor(let row of rows){\n\t\t\trow.calcHeight();\n\t\t}\n\n\t\tfor(let row of rows){\n\t\t\trow.setCellHeight();\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\nimport Row from './row/Row.js';\nimport RowComponent from './row/RowComponent.js';\nimport Helpers from './tools/Helpers.js';\n\nimport RendererBasicVertical from './rendering/renderers/BasicVertical.js';\nimport RendererVirtualDomVertical from './rendering/renderers/VirtualDomVertical.js';\n\nexport default class RowManager extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = this.createHolderElement(); //containing element\n\t\tthis.tableElement = this.createTableElement(); //table element\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\t\tthis.placeholder = null; //placeholder element\n\t\tthis.placeholderContents = null; //placeholder element\n\t\t\n\t\tthis.firstRender = false; //handle first render\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\t\tthis.fixedHeight = false; //current rendering mode\n\t\t\n\t\tthis.rows = []; //hold row data objects\n\t\tthis.activeRowsPipeline = []; //hold calculation of active rows\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\t\tthis.activeRowsCount = 0; //count of active rows\n\t\t\n\t\tthis.displayRows = []; //rows currently on display in the table\n\t\tthis.displayRowsCount = 0; //count of display rows\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\t\tthis.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\t\t\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\n\t\t\n\t\tthis.scrollbarWidth = 0;\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t//////////////// Setup Functions /////////////////\n\t\n\tcreateHolderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-tableholder\");\n\t\tel.setAttribute(\"tabindex\", 0);\n\t\t// el.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateTableElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-table\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitializePlaceholder(){\n\t\tvar placeholder = this.table.options.placeholder;\n\t\t\n\t\tif(typeof placeholder === \"function\"){\n\t\t\tplaceholder = placeholder.call(this.table);\n\t\t}\n\t\t\n\t\tplaceholder = this.chain(\"placeholder\", [placeholder], placeholder, placeholder) || placeholder;\n\t\t\n\t\t//configure placeholder element\n\t\tif(placeholder){\t\n\t\t\tlet el = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\t\t\t\n\t\t\tif(typeof placeholder == \"string\"){\n\t\t\t\tlet contents = document.createElement(\"div\");\n\t\t\t\tcontents.classList.add(\"tabulator-placeholder-contents\");\n\t\t\t\tcontents.innerHTML = placeholder;\n\t\t\t\t\n\t\t\t\tel.appendChild(contents);\n\t\t\t\t\n\t\t\t\tthis.placeholderContents = contents;\n\t\t\t\t\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && placeholder instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tel.appendChild(placeholder);\n\t\t\t\tthis.placeholderContents = placeholder;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Invalid placeholder provided, must be string or HTML Element\", placeholder);\n\t\t\t\t\n\t\t\t\tthis.el = null;\n\t\t\t}\n\t\t\t\n\t\t\tthis.placeholder = el;\n\t\t}\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return table element\n\tgetTableElement(){\n\t\treturn this.tableElement;\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializePlaceholder();\n\t\tthis.initializeRenderer();\n\t\t\n\t\t//initialize manager\n\t\tthis.element.appendChild(this.tableElement);\n\t\t\n\t\tthis.firstRender = true;\n\t\t\n\t\t//scroll header along with table body\n\t\tthis.element.addEventListener(\"scroll\", () => {\n\t\t\tvar left = this.element.scrollLeft,\n\t\t\tleftDir = this.scrollLeft > left,\n\t\t\ttop = this.element.scrollTop,\n\t\t\ttopDir = this.scrollTop > top;\n\t\t\t\n\t\t\t//handle horizontal scrolling\n\t\t\tif(this.scrollLeft != left){\n\t\t\t\tthis.scrollLeft = left;\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n\t\t\t\t\n\t\t\t\tthis._positionPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\t//handle vertical scrolling\n\t\t\tif(this.scrollTop != top){\n\t\t\t\tthis.scrollTop = top;\n\t\t\t\t\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t////////////////// Row Manipulation //////////////////\n\tfindRow(subject){\n\t\tif(typeof subject == \"object\"){\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t//subject is a HTML element of the row\n\t\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\t\treturn row.getElement() === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}else if(subject === null){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\treturn false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t\t\n\t\t\treturn match || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetRowFromDataObject(data){\n\t\tvar match = this.rows.find((row) => {\n\t\t\treturn row.data === data;\n\t\t});\n\t\t\n\t\treturn match || false;\n\t}\n\t\n\tgetRowFromPosition(position){\n\t\treturn this.getDisplayRows().find((row) => {\n\t\t\treturn row.getPosition() === position && row.isDisplayed();\n\t\t});\n\t}\n\t\n\tscrollToRow(row, position, ifVisible){\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\tsetData(data, renderInPosition, columnsChanged){\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\n\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\tthis._setDataActual(data, true);\n\t\t\t\t}else{\n\t\t\t\t\tthis.reRenderInPosition(() => {\n\t\t\t\t\t\tthis._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\t\t\t\tthis.resetScroll();\n\t\t\t\t\n\t\t\t\tthis._setDataActual(data);\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\t_setDataActual(data, renderInPosition){\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\n\t\t\n\t\tthis._wipeElements();\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tthis.dispatch(\"data-processing\", data);\n\t\t\t\n\t\t\tdata.forEach((def, i) => {\n\t\t\t\tif(def && typeof def === \"object\"){\n\t\t\t\t\tvar row = new Row(def, this);\n\t\t\t\t\tthis.rows.push(row);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\n\t\t\t\n\t\t\tthis.dispatch(\"data-processed\", data);\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\n\t\t}else{\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n\t\t}\n\t}\n\t\n\t_wipeElements(){\n\t\tthis.dispatch(\"rows-wipe\");\n\t\t\n\t\tthis.destroy();\n\t\t\n\t\tthis.adjustTableSize();\n\t\t\n\t\tthis.dispatch(\"rows-wiped\");\n\t}\n\t\n\tdestroy(){\n\t\tthis.rows.forEach((row) => {\n\t\t\trow.wipe();\n\t\t});\n\t\t\n\t\tthis.rows = [];\n\t\tthis.activeRows = [];\n\t\tthis.activeRowsPipeline = [];\n\t\tthis.activeRowsCount = 0;\n\t\tthis.displayRows = [];\n\t\tthis.displayRowsCount = 0;\n\t}\n\t\n\tdeleteRow(row, blockRedraw){\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\tactiveIndex = this.activeRows.indexOf(row);\n\t\t\n\t\tif(activeIndex > -1){\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\t\t\n\t\tif(allIndex > -1){\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tvar displayIndex = rows.indexOf(row);\n\t\t\t\n\t\t\tif(displayIndex > -1){\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis.tableEmpty();\n\t\t}\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\n\t\t}\n\t}\n\t\n\taddRow(data, pos, index, blockRedraw){\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\t\treturn row;\n\t}\n\t\n\t//add multiple rows\n\taddRows(data, pos, index, refreshDisplayOnly){\n\t\tvar rows = [];\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tpos = this.findAddRowPos(pos);\n\t\t\t\n\t\t\tif(!Array.isArray(data)){\n\t\t\t\tdata = [data];\n\t\t\t}\n\t\t\t\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\n\t\t\t\tdata.reverse();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach((item, i) => {\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\n\t\t\t\trows.push(row);\n\t\t\t\tthis.dispatch(\"row-added\", row, item, pos, index);\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(refreshDisplayOnly ? \"displayPipeline\" : false, false, true);\n\t\t\t\n\t\t\tthis.regenerateRowPositions();\n\t\t\t\n\t\t\tif(rows.length){\n\t\t\t\tthis._clearPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\tresolve(rows);\n\t\t});\n\t}\n\t\n\tfindAddRowPos(pos){\n\t\tif(typeof pos === \"undefined\"){\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\t\t\n\t\tif(pos === \"pos\"){\n\t\t\tpos = true;\n\t\t}\n\t\t\n\t\tif(pos === \"bottom\"){\n\t\t\tpos = false;\n\t\t}\n\t\t\n\t\treturn pos;\n\t}\n\t\n\taddRowActual(data, pos, index, blockRedraw){\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\ttop = this.findAddRowPos(pos),\n\t\tallIndex = -1,\n\t\tactiveIndex, chainResult;\n\t\t\n\t\tif(!index){\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\n\t\t\t\n\t\t\tindex = chainResult.index;\n\t\t\ttop = chainResult.top;\n\t\t}\n\t\t\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tindex = this.findRow(index);\n\t\t}\n\t\t\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\n\t\t\n\t\tif(index){\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\t\t\n\t\tif(index && allIndex > -1){\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\t\t\t\n\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\t\t\t\t\n\t\t\t\tif(displayIndex > -1){\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(activeIndex > -1){\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\n\t\t\t}\n\t\t\t\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(top){\n\t\t\t\t\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.unshift(row);\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}else{\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.push(row);\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t}\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\treturn row;\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tthis.dispatch(\"row-move\", from, to, after);\n\t\t\n\t\tthis.moveRowActual(from, to, after);\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatch(\"row-moved\", from, to, after);\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\n\t}\n\t\n\tmoveRowActual(from, to, after){\n\t\tthis.moveRowInArray(this.rows, from, to, after);\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tthis.moveRowInArray(rows, from, to, after);\n\t\t});\n\t\t\n\t\tthis.dispatch(\"row-moving\", from, to, after);\n\t}\n\t\n\tmoveRowInArray(rows, from, to, after){\n\t\tvar\tfromIndex, toIndex, start, end;\n\t\t\n\t\tif(from !== to){\n\t\t\t\n\t\t\tfromIndex = rows.indexOf(from);\n\t\t\t\n\t\t\tif (fromIndex > -1) {\n\t\t\t\t\n\t\t\t\trows.splice(fromIndex, 1);\n\t\t\t\t\n\t\t\t\ttoIndex = rows.indexOf(to);\n\t\t\t\t\n\t\t\t\tif (toIndex > -1) {\n\t\t\t\t\t\n\t\t\t\t\tif(after){\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\n\t\t\t\t\t}else{\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//restyle rows\n\t\t\tif(rows === this.getDisplayRows()){\n\t\t\t\t\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\n\t\t\t\t\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tif(rows[i]){\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearData(){\n\t\tthis.setData([]);\n\t}\n\t\n\tgetRowIndex(row){\n\t\treturn this.findRowIndex(row, this.rows);\n\t}\n\t\n\tgetDisplayRowIndex(row){\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\t\treturn index > -1 ? index : false;\n\t}\n\t\n\tnextDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tnextRow = false;\n\t\t\n\t\t\n\t\tif(index !== false && index < this.displayRowsCount -1){\n\t\t\tnextRow = this.getDisplayRows()[index+1];\n\t\t}\n\t\t\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn nextRow;\n\t}\n\t\n\tprevDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tprevRow = false;\n\t\t\n\t\tif(index){\n\t\t\tprevRow = this.getDisplayRows()[index-1];\n\t\t}\n\t\t\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn prevRow;\n\t}\n\t\n\tfindRowIndex(row, list){\n\t\tvar rowIndex;\n\t\t\n\t\trow = this.findRow(row);\n\t\t\n\t\tif(row){\n\t\t\trowIndex = list.indexOf(row);\n\t\t\t\n\t\t\tif(rowIndex > -1){\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tgetData(active, transform){\n\t\tvar output = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tif(row.type == \"row\"){\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(active){\n\t\tvar\toutput = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetDataCount(active){\n\t\tvar rows = this.getRows(active);\n\t\t\n\t\treturn rows.length;\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tthis.scrollLeft = left;\n\t\tthis.element.scrollLeft = left;\n\t\t\n\t\tthis.dispatch(\"scroll-horizontal\", left);\n\t}\n\t\n\tregisterDataPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.dataPipeline.push({handler, priority});\n\t\t\tthis.dataPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\tregisterDisplayPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.displayPipeline.push({handler, priority});\n\t\t\tthis.displayPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\t//set active data set\n\trefreshActiveData(handler, skipStage, renderInPosition){\n\t\tvar table = this.table,\n\t\tstage = \"\",\n\t\tindex = 0,\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n\t\t\n\t\tif(!this.table.destroyed){\n\t\t\tif(typeof handler === \"function\"){\n\t\t\t\tindex = this.dataPipeline.findIndex((item) => {\n\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(index > -1){\n\t\t\t\t\tstage = \"dataPipeline\";\n\t\t\t\t\t\n\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\tif(index == this.dataPipeline.length - 1){\n\t\t\t\t\t\t\tstage = \"display\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\n\t\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(index > -1){\n\t\t\t\t\t\tstage = \"displayPipeline\";\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\n\t\t\t\t\t\t\t\tstage = \"end\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tstage = handler || \"all\";\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.redrawBlock){\n\t\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\n\t\t\t\t\tthis.redrawBlockRestoreConfig = {\n\t\t\t\t\t\thandler: handler,\n\t\t\t\t\t\tskipStage: skipStage,\n\t\t\t\t\t\trenderInPosition: renderInPosition,\n\t\t\t\t\t\tstage:stage,\n\t\t\t\t\t\tindex:index,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t}else{\n\t\t\t\tif(Helpers.elVisible(this.element)){\n\t\t\t\t\tif(renderInPosition){\n\t\t\t\t\t\tthis.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!handler){\n\t\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.renderTable();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\n\t\t\t\t\t\t\tthis.table.columnManager.redraw(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"data-refreshed\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\trefreshPipelines(handler, stage, index, renderInPosition){\n\t\tthis.dispatch(\"data-refreshing\");\n\t\t\n\t\tif(!handler){\n\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\n\t\t}\n\t\t\n\t\t//cascade through data refresh stages\n\t\tswitch(stage){\n\t\t\tcase \"all\":\n\t\t\t//handle case where all data needs refreshing\n\t\t\t\n\t\t\tcase \"dataPipeline\":\n\t\t\t\n\t\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\n\t\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n\t\t\t\t\n\t\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n\t\t\t\t}\n\t\t\t\n\t\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\tindex = 0;\n\t\t\t\tthis.resetDisplayRows();\n\t\t\t\n\t\t\tcase \"displayPipeline\":\n\t\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\n\t\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n\t\t\t\t\n\t\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"end\":\n\t\t\t//case to handle scenario when trying to skip past end stage\n\t\t\t\tthis.regenerateRowPositions();\n\t\t}\n\t\t\n\t\tif(this.getDisplayRows().length){\n\t\t\tthis._clearPlaceholder();\n\t\t}\n\t}\n\t\n\t//regenerate row positions\n\tregenerateRowPositions(){\n\t\tvar rows = this.getDisplayRows();\n\t\tvar index = 1;\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\"){\n\t\t\t\trow.setPosition(index);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tsetActiveRows(activeRows){\n\t\tthis.activeRows = this.activeRows = Object.assign([], activeRows);\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t}\n\t\n\t//reset display rows array\n\tresetDisplayRows(){\n\t\tthis.displayRows = [];\n\t\t\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\t}\n\t\n\t//set display row pipeline data\n\tsetDisplayRows(displayRows, index){\n\t\tthis.displayRows[index] = displayRows;\n\t\t\n\t\tif(index == this.displayRows.length -1){\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t\t}\n\t}\n\t\n\tgetDisplayRows(index){\n\t\tif(typeof index == \"undefined\"){\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\n\t\t}else{\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t}\n\t\n\tgetVisibleRows(chain, viewable){\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\n\t\t\n\t\tif(chain){\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t//repeat action across display rows\n\tdisplayRowIterator(callback){\n\t\tthis.activeRowsPipeline.forEach(callback);\n\t\tthis.displayRows.forEach(callback);\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t}\n\t\n\t//return only actual rows (not group headers etc)\n\tgetRows(type){\n\t\tvar rows = [];\n\t\t\n\t\tswitch(type){\n\t\t\tcase \"active\":\n\t\t\t\trows = this.activeRows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"visible\":\n\t\t\t\trows = this.getVisibleRows(false, true);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t///////////////// Table Rendering /////////////////\n\t//trigger rerender of table in current position\n\treRenderInPosition(callback){\n\t\tif(this.redrawBlock){\n\t\t\tif(callback){\n\t\t\t\tcallback();\n\t\t\t}else{\n\t\t\t\tthis.redrawBlockRenderInPosition = true;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\t\n\t\t\tthis.renderer.rerenderRows(callback);\n\t\t\t\n\t\t\tif(!this.fixedHeight){\n\t\t\t\tthis.adjustTableSize();\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"renderComplete\");\n\t\t}\n\t}\n\t\n\tscrollBarCheck(){\n\t\tvar scrollbarWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar moving table when present\n\t\tif(this.element.scrollHeight > this.element.clientHeight){\n\t\t\tscrollbarWidth = this.element.offsetWidth - this.element.clientWidth;\n\t\t}\n\t\t\n\t\tif(scrollbarWidth !== this.scrollbarWidth){\n\t\t\tthis.scrollbarWidth = scrollbarWidth;\n\t\t\tthis.dispatch(\"scrollbar-vertical\", scrollbarWidth);\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomVertical,\n\t\t\t\"basic\": RendererBasicVertical,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderVertical;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderMode = this.table.options.renderVertical;\n\t\t\t\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t\t\n\t\t\tif((this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight)){\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t}else{\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n\t\t}\n\t}\n\t\n\tgetRenderMode(){\n\t\treturn this.renderMode;\n\t}\n\t\n\trenderTable(){\n\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tthis._clearTable();\n\t\t\n\t\tif(this.displayRowsCount){\n\t\t\tthis.renderer.renderRows();\n\t\t\t\n\t\t\tif(this.firstRender){\n\t\t\t\tthis.firstRender = false;\n\t\t\t\t\n\t\t\t\tif(!this.fixedHeight){\n\t\t\t\t\tthis.adjustTableSize();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.layoutRefresh(true);\n\t\t\t}\n\t\t}else{\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t\t\n\t\tif(!this.fixedHeight){\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-layout\");\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis._showPlaceholder();\n\t\t}\n\t\t\n\t\tthis.scrollBarCheck();\n\t\t\n\t\tthis.dispatchExternal(\"renderComplete\");\n\t}\n\t\n\t//show scrollbars on empty table div\n\trenderEmptyScroll(){\n\t\tif(this.placeholder){\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t_clearTable(){\t\n\t\tthis._clearPlaceholder();\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.renderer.clearRows();\n\t}\n\t\n\ttableEmpty(){\n\t\tthis.renderEmptyScroll();\n\t\tthis._showPlaceholder();\n\t}\n\t\n\t_showPlaceholder(){\n\t\tif(this.placeholder){\n\t\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t\t}\n\t\t\t\n\t\t\tthis.initializePlaceholder();\n\t\t\t\n\t\t\tthis.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\t\t\t\n\t\t\tthis.getElement().appendChild(this.placeholder);\n\t\t\tthis._positionPlaceholder();\n\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t}\n\t\n\t_clearPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t}\n\t\t\n\t\t// clear empty table placeholder min\n\t\tthis.tableElement.style.minWidth = \"\";\n\t\tthis.tableElement.style.display = \"\";\n\t}\n\t\n\t_positionPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\tthis.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n\t\t\tthis.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n\t\t}\n\t}\n\t\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\t\n\t//normalize height of active rows\n\tnormalizeHeight(){\n\t\tthis.activeRows.forEach(function(row){\n\t\t\trow.normalizeHeight();\n\t\t});\n\t}\n\t\n\t//adjust the height of the table holder to fit in the Tabulator element\n\tadjustTableSize(){\n\t\tlet initialHeight = this.element.clientHeight, minHeight;\n\t\tlet resized = false;\n\t\t\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n\t\t\t\n\t\t\tif(this.fixedHeight){\n\t\t\t\tminHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n\t\t\t\t\n\t\t\t\tconst height = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.height = height;\n\t\t\t\tthis.element.style.maxHeight = height;\n\t\t\t} else {\n\t\t\t\tthis.element.style.height = \"\";\n\t\t\t\tthis.element.style.height =\n\t\t\t\tthis.table.element.clientHeight - otherHeight + \"px\";\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\t\t\t\n\t\t\tthis.renderer.resize();\n\t\t\t\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\n\t\t\t\tresized = true;\n\t\t\t\tif(this.subscribed(\"table-resize\")){\n\t\t\t\t\tthis.dispatch(\"table-resize\");\n\t\t\t\t}else{\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t}\n\t\t\n\t\tthis._positionPlaceholder();\n\t\treturn resized;\n\t}\n\t\n\t//reinitialize all rows\n\treinitialize(){\n\t\tthis.rows.forEach(function(row){\n\t\t\trow.reinitialize(true);\n\t\t});\n\t}\n\t\n\t//prevent table from being redrawn\n\tblockRedraw (){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockRestoreConfig = false;\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw (){\n\t\tthis.redrawBlock = false;\n\t\t\n\t\tif(this.redrawBlockRestoreConfig){\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\t\t\t\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t}else{\n\t\t\tif(this.redrawBlockRenderInPosition){\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.redrawBlockRenderInPosition = false;\n\t}\n\t\n\t//redraw table\n\tredraw (force){\n\t\tconst resized = this.adjustTableSize();\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\t\t\n\t\tif(!force){\n\t\t\tif(resized) {\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t\tthis.scrollHorizontal(this.scrollLeft);\n\t\t}else{\n\t\t\tthis.renderTable();\n\t\t}\n\t}\n\t\n\tresetScroll(){\n\t\tthis.element.scrollLeft = 0;\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tif(this.table.browser === \"ie\"){\n\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\t\t\tthis.element.dispatchEvent(event);\n\t\t}else{\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\n\nexport default class FooterManager extends CoreFeature{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.active = false;\n\t\tthis.element = this.createElement(); //containing element\n\t\tthis.containerElement = this.createContainerElement(); //containing element\n\t\tthis.external = false;\n\t}\n\n\tinitialize(){\n\t\tthis.initializeElement();\n\t}\n\n\tcreateElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t}\n\n\t\n\tcreateContainerElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer-contents\");\n\n\t\tthis.element.appendChild(el);\n\n\t\treturn el;\n\t}\n\n\tinitializeElement(){\n\t\tif(this.table.options.footerElement){\n\n\t\t\tswitch(typeof this.table.options.footerElement){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\n\t\t\t\t\t\tthis.containerElement.innerHTML = this.table.options.footerElement;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.external = true;\n\t\t\t\t\t\tthis.containerElement = document.querySelector(this.table.options.footerElement);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.element = this.table.options.footerElement;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tappend(element){\n\t\tthis.activate();\n\n\t\tthis.containerElement.appendChild(element);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tprepend(element){\n\t\tthis.activate();\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tremove(element){\n\t\telement.parentNode.removeChild(element);\n\t\tthis.deactivate();\n\t}\n\n\tdeactivate(force){\n\t\tif(!this.element.firstChild || force){\n\t\t\tif(!this.external){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.active = false;\n\t\t}\n\t}\n\n\tactivate(){\n\t\tif(!this.active){\n\t\t\tthis.active = true;\n\t\t\tif(!this.external){\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(){\n\t\tthis.dispatch(\"footer-redraw\");\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Row from '../row/Row.js';\n\nexport default class InteractionManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.el = null;\n\t\t\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n\t\t\n\t\tthis.previousTargets = {};\n\t\t\n\t\tthis.listeners = [\n\t\t\t\"click\",\n\t\t\t\"dblclick\",\n\t\t\t\"contextmenu\",\n\t\t\t\"mouseenter\",\n\t\t\t\"mouseleave\",\n\t\t\t\"mouseover\",\n\t\t\t\"mouseout\",\n\t\t\t\"mousemove\",\n\t\t\t\"mouseup\",\n\t\t\t\"mousedown\",\n\t\t\t\"touchstart\",\n\t\t\t\"touchend\",\n\t\t];\n\t\t\n\t\tthis.componentMap = {\n\t\t\t\"tabulator-cell\":\"cell\",\n\t\t\t\"tabulator-row\":\"row\",\n\t\t\t\"tabulator-group\":\"group\",\n\t\t\t\"tabulator-col\":\"column\",\n\t\t};\n\t\t\n\t\tthis.pseudoTrackers = {\n\t\t\t\"row\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"cell\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"group\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"column\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t};\n\t\t\n\t\tthis.pseudoTracking = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.el = this.table.element;\n\t\t\n\t\tthis.buildListenerMap();\n\t\tthis.bindSubscriptionWatchers();\n\t}\n\t\n\tbuildListenerMap(){\n\t\tvar listenerMap = {};\n\t\t\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistenerMap[listener] = {\n\t\t\t\thandler:null,\n\t\t\t\tcomponents:[],\n\t\t\t};\n\t\t});\n\t\t\n\t\tthis.listeners = listenerMap;\n\t}\n\t\n\tbindPseudoEvents(){\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n\t\t});\n\t\t\n\t\tthis.pseudoTracking = true;\n\t}\n\t\n\tpseudoMouseEnter(key, e, target){\n\t\tif(this.pseudoTrackers[key].target !== target){\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n\t\t\t}\n\t\t\t\n\t\t\tthis.pseudoMouseLeave(key, e);\n\t\t\t\n\t\t\tthis.pseudoTrackers[key].target = target;\n\t\t\t\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\n\t\t}\n\t}\n\t\n\tpseudoMouseLeave(key, e){\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\n\t\tlinkedKeys = {\n\t\t\t\"row\":[\"cell\"],\n\t\t\t\"cell\":[\"row\"],\n\t\t};\n\t\t\n\t\tleaveList = leaveList.filter((item) => {\n\t\t\tvar links = linkedKeys[key];\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\n\t\t});\n\t\t\n\t\t\n\t\tleaveList.forEach((key) => {\n\t\t\tvar target = this.pseudoTrackers[key].target;\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\n\t\t\t\t\n\t\t\t\tthis.pseudoTrackers[key].target = null;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\tbindSubscriptionWatchers(){\n\t\tvar listeners = Object.keys(this.listeners),\n\t\tcomponents = Object.values(this.componentMap);\n\t\t\n\t\tfor(let comp of components){\n\t\t\tfor(let listener of listeners){\n\t\t\t\tlet key = comp + \"-\" + listener;\n\t\t\t\t\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n\t}\n\t\n\tsubscriptionChanged(component, key, added){\n\t\tvar listener = this.listeners[key].components,\n\t\tindex = listener.indexOf(component),\n\t\tchanged = false;\n\t\t\n\t\tif(added){\n\t\t\tif(index === -1){\n\t\t\t\tlistener.push(component);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\n\t\t\t\tif(index > -1){\n\t\t\t\t\tlistener.splice(index, 1);\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\n\t\t\tthis.bindPseudoEvents();\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.updateEventListeners();\n\t\t}\n\t}\n\t\n\tupdateEventListeners(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.components.length){\n\t\t\t\tif(!listener.handler){\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler);\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(listener.handler){\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\t\tlistener.handler = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\ttrack(type, e){\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\n\t\t\n\t\tvar targets = this.findTargets(path);\n\t\ttargets = this.bindComponents(type, targets);\n\t\t\n\t\tthis.triggerEvents(type, e, targets);\n\t\t\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\n\t\t}\n\t}\n\t\n\tfindTargets(path){\n\t\tvar targets = {};\n\t\t\n\t\tlet componentMap = Object.keys(this.componentMap);\n\t\t\n\t\tfor (let el of path) {\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\n\t\t\t\n\t\t\tlet abort = classList.filter((item) => {\n\t\t\t\treturn this.abortClasses.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tif(abort.length){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tlet elTargets = classList.filter((item) => {\n\t\t\t\treturn componentMap.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tfor (let target of elTargets) {\n\t\t\t\tif(!targets[this.componentMap[target]]){\n\t\t\t\t\ttargets[this.componentMap[target]] = el;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(targets.group && targets.group === targets.row){\n\t\t\tdelete targets.row;\n\t\t}\n\t\t\n\t\treturn targets;\n\t}\n\t\n\tbindComponents(type, targets){\n\t\t//ensure row component is looked up before cell\n\t\tvar keys = Object.keys(targets).reverse(),\n\t\tlistener = this.listeners[type],\n\t\tmatches = {},\n\t\ttargetMatches = {};\n\t\t\n\t\tfor(let key of keys){\n\t\t\tlet component,\n\t\t\ttarget = targets[key],\n\t\t\tpreviousTarget = this.previousTargets[key];\n\t\t\t\n\t\t\tif(previousTarget && previousTarget.target === target){\n\t\t\t\tcomponent = previousTarget.component;\n\t\t\t}else{\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")){\n\t\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tcomponent = rows.find((row) => {\n\t\t\t\t\t\t\t\treturn row.getElement() === target;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")){\n\t\t\t\t\t\t\t\ttargets[key] = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"column\":\n\t\t\t\t\t\tif(listener.components.includes(\"column\")){\n\t\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"cell\":\n\t\t\t\t\t\tif(listener.components.includes(\"cell\")){\n\t\t\t\t\t\t\tif(matches[\"row\"] instanceof Row){\n\t\t\t\t\t\t\t\tcomponent = matches[\"row\"].findCell(target);\n\t\t\t\t\t\t\t}else{\t\n\t\t\t\t\t\t\t\tif(targets[\"row\"]){\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(component){\n\t\t\t\tmatches[key] = component;\n\t\t\t\ttargetMatches[key] = {\n\t\t\t\t\ttarget:target,\n\t\t\t\t\tcomponent:component,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.previousTargets = targetMatches;\n\t\t\n\t\treturn matches;\n\t}\n\t\n\ttriggerEvents(type, e, targets){\n\t\tvar listener = this.listeners[type];\n\n\t\tfor(let key in targets){\n\t\t\tif(targets[key] && listener.components.includes(key)){\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearWatchers(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.handler){\n\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\tlistener.handler = null;\n\t\t\t}\n\t\t}\n\t}\n}","export default class ComponentFunctionBinder{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\n\t\tthis.bindings = {};\n\t}\n\n\tbind(type, funcName, handler){\n\t\tif(!this.bindings[type]){\n\t\t\tthis.bindings[type] = {};\n\t\t}\n\n\t\tif(this.bindings[type][funcName]){\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\n\t\t}else{\n\t\t\tthis.bindings[type][funcName] = handler;\n\t\t}\n\t}\n\n\thandle(type, component, name){\n\t\tif(this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function'){\n\t\t\treturn this.bindings[type][name].bind(null, component);\n\t\t}else{\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\n\t\t\t\tif(this.table.options.debugInvalidComponentFuncs){\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import CoreFeature from '../CoreFeature.js';\n\nexport default class DataLoader extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n\t\tthis.loading = false;\n\t}\n\t\n\tinitialize(){}\n\t\n\tload(data, params, config, replace, silent, columnsChanged){\n\t\tvar requestNo = ++this.requestOrder;\n\n\t\tif(this.table.destroyed){\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\t\n\t\tthis.dispatchExternal(\"dataLoading\", data);\n\t\t\n\t\t//parse json data to array\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\n\t\t\tthis.loading = true;\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.alertLoader();\n\t\t\t}\n\t\t\t\n\t\t\t//get params for request\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n\t\t\t\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\n\t\t\t\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n\t\t\t\n\t\t\treturn result.then((response) => {\n\t\t\t\tif(!this.table.destroyed){\n\t\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\n\t\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar rowData = this.chain(\"data-loaded\", response, null, response);\n\t\t\t\t\t\n\t\t\t\t\tif(requestNo == this.requestOrder){\n\t\t\t\t\t\tthis.clearAlert();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(rowData !== false){\n\t\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\n\t\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - Table has been destroyed\");\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\n\t\t\t\t\n\t\t\t\tif(!silent){\n\t\t\t\t\tthis.alertError();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.clearAlert();\n\t\t\t\t}, this.table.options.dataLoaderErrorTimeout);\n\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\n\t\t\t\n\t\t\tif(!data){\n\t\t\t\tdata = [];\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\t\n\tmapParams(params, map){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in params){\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tobjectInvert(obj){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in obj){\n\t\t\toutput[obj[key]] = key;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tblockActiveLoad(){\n\t\tthis.requestOrder++;\n\t}\n\t\n\talertLoader(){\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n\t\t\n\t\tif(shouldLoad){\n\t\t\tthis.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n\t\t}\n\t}\n\t\n\talertError(){\n\t\tthis.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n\t}\n\t\n\tclearAlert(){\n\t\tthis.table.alertManager.clear();\n\t}\n}","export default class ExternalEventBus {\n\n\tconstructor(table, optionsList, debug){\n\t\tthis.table = table;\n\t\tthis.events = {};\n\t\tthis.optionsList = optionsList || {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push(callback);\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tdelete this.events[key];\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift(),\n\t\tresult;\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((callback, i) => {\n\t\t\t\tlet callResult = callback.apply(this.table, args);\n\n\t\t\t\tif(!i){\n\t\t\t\t\tresult = callResult;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"ExternalEvent:\" + args[0];\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n}","export default class InternalEventBus {\n\n\tconstructor(debug){\n\t\tthis.events = {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback, priority = 10000){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push({callback, priority});\n\n\t\tthis.events[key].sort((a, b) => {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item.callback === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_chain(key, args, initialValue, fallback){\n\t\tvar value = initialValue;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}else{\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\n\t\t}\n\t}\n\n\t_confirm(key, args){\n\t\tvar confirmed = false;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tif(subscriber.callback.apply(this, args)){\n\t\t\t\t\tconfirmed = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn confirmed;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift();\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((subscriber) => {\n\t\t\t\tsubscriber.callback.apply(this, args);\n\t\t\t});\n\t\t}\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n\n\t_debugChain(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._chain(...arguments);\n\t}\n\n\t_debugConfirm(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._confirm(...arguments);\n\t}\n}","import CoreFeature from '../CoreFeature.js';\n\nexport default class DeprecationAdvisor extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\t_warnUser(){\n\t\tif(this.options(\"debugDeprecation\")){\n\t\t\tconsole.warn(...arguments);\n\t\t}\n\t}\n\t\n\tcheck(oldOption, newOption){\n\t\tvar msg = \"\";\n\t\t\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tmsg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\n\t\t\t\n\t\t\tif(newOption){\n\t\t\t\tmsg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}else{\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tcheckMsg(oldOption, msg){\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tthis._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tmsg(msg){\n\t\tthis._warnUser(msg);\n\t}\n}","import Tabulator from '../Tabulator.js';\n\nclass TableRegistry {\n\n\tstatic register(table){\n\t\tTableRegistry.tables.push(table);\n\t}\n\n\tstatic deregister(table){\n\t\tvar index = TableRegistry.tables.indexOf(table);\n\n\t\tif(index > -1){\n\t\t\tTableRegistry.tables.splice(index, 1);\n\t\t}\n\t}\n\n\tstatic lookupTable(query, silent){\n\t\tvar results = [],\n\t\tmatches, match;\n\n\t\tif(typeof query === \"string\"){\n\t\t\tmatches = document.querySelectorAll(query);\n\n\t\t\tif(matches.length){\n\t\t\t\tfor(var i = 0; i < matches.length; i++){\n\t\t\t\t\tmatch = TableRegistry.matchElement(matches[i]);\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof Tabulator){\n\t\t\tmatch = TableRegistry.matchElement(query);\n\n\t\t\tif(match){\n\t\t\t\tresults.push(match);\n\t\t\t}\n\t\t}else if(Array.isArray(query)){\n\t\t\tquery.forEach(function(item){\n\t\t\t\tresults = results.concat(TableRegistry.lookupTable(item));\n\t\t\t});\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tstatic matchElement(element){\n\t\treturn TableRegistry.tables.find(function(table){\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\n\t\t});\n\t}\n}\n\nTableRegistry.tables = [];\n\nexport default TableRegistry;","//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nexport default function(columns, forced){\n\tcolumns.forEach(function(column){\n\t\tcolumn.reinitializeWidth();\n\t});\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}","import fitData from './modes/fitData.js';\nimport fitDataGeneral from './modes/fitDataGeneral.js';\nimport fitDataStretch from './modes/fitDataStretch.js';\nimport fitColumns from './modes/fitColumns.js';\n\nexport default {\n\tfitData:fitData,\n\tfitDataFill:fitDataGeneral,\n\tfitDataTable:fitDataGeneral,\n\tfitDataStretch:fitDataStretch,\n\tfitColumns:fitColumns ,\n};","//resize columns to fit data they contain\nexport default function(columns, forced){\n\tif(forced){\n\t\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\n\t}\n\t\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}","//resize columns to fit data the contain and stretch last column to fill table\nexport default function(columns, forced){\n\tvar colsWidth = 0,\n\ttableWidth = this.table.rowManager.element.clientWidth,\n\tgap = 0,\n\tlastCol = false;\n\n\tcolumns.forEach((column, i) => {\n\t\tif(!column.widthFixed){\n\t\t\tcolumn.reinitializeWidth();\n\t\t}\n\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\n\t\t\tlastCol = column;\n\t\t}\n\n\t\tif(column.visible){\n\t\t\tcolsWidth += column.getWidth();\n\t\t}\n\t});\n\n\tif(lastCol){\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tlastCol.setWidth(0);\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\n\t\tif(gap > 0){\n\t\t\tlastCol.setWidth(gap);\n\t\t}else{\n\t\t\tlastCol.reinitializeWidth();\n\t\t}\n\t}else{\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t}\n}","//resize columns to fit\nexport default function(columns, forced){\n\tvar totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\n\tvar fixedWidth = 0; //total width of columns with a defined width\n\tvar flexWidth = 0; //total width available to flexible columns\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks across all columns\n\tvar flexColWidth = 0; //desired width of flexible columns\n\tvar flexColumns = []; //array of flexible width columns\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\n\tvar overflowWidth = 0; //horizontal overflow width\n\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\tfunction calcWidth(width){\n\t\tvar colWidth;\n\n\t\tif(typeof(width) == \"string\"){\n\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\n\t\t\t}else{\n\t\t\t\tcolWidth = parseInt(width);\n\t\t\t}\n\t\t}else{\n\t\t\tcolWidth = width;\n\t\t}\n\n\t\treturn colWidth;\n\t}\n\n\t//ensure columns resize to take up the correct amount of space\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\n\t\tvar oversizeCols = [],\n\t\toversizeSpace = 0,\n\t\tremainingSpace = 0,\n\t\tnextColWidth = 0,\n\t\tremainingFlexGrowUnits = flexGrowUnits,\n\t\tgap = 0,\n\t\tchangeUnits = 0,\n\t\tundersizeCols = [];\n\n\t\tfunction calcGrow(col){\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\n\t\t}\n\n\t\tfunction calcShrink(col){\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)));\n\t\t}\n\n\t\tcolumns.forEach(function(col, i){\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\t\t\tif(col.column.minWidth >= width){\n\t\t\t\toversizeCols.push(col);\n\t\t\t}else{\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\n\t\t\t\t\tcol.width = col.column.maxWidth;\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\n\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\n\t\t\t\t\tif(remainingFlexGrowUnits){\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tundersizeCols.push(col);\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(oversizeCols.length){\n\t\t\toversizeCols.forEach(function(col){\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\n\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t});\n\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\n\n\t\t\tgap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t}else{\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\n\n\t\t\tundersizeCols.forEach(function(column){\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t});\n\t\t}\n\n\t\treturn gap;\n\t}\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n\n\t//adjust for vertical scrollbar if present\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t}\n\n\tcolumns.forEach(function(column){\n\t\tvar width, minWidth, colWidth;\n\n\t\tif(column.visible){\n\n\t\t\twidth = column.definition.width;\n\t\t\tminWidth =  parseInt(column.minWidth);\n\n\t\t\tif(width){\n\n\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\tif(column.definition.widthShrink){\n\t\t\t\t\tfixedShrinkColumns.push({\n\t\t\t\t\t\tcolumn:column,\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\n\t\t\t\t\t});\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tflexColumns.push({\n\t\t\t\t\tcolumn:column,\n\t\t\t\t\twidth:0,\n\t\t\t\t});\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t}\n\t\t}\n\t});\n\n\t//calculate available space\n\tflexWidth = totalWidth - fixedWidth;\n\n\t//calculate correct column size\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t//generate column widths\n\tgapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t//increase width of last column to account for rounding errors\n\tif(flexColumns.length && gapFill > 0){\n\t\tflexColumns[flexColumns.length-1].width += gapFill;\n\t}\n\n\t//calculate space for columns to be shrunk into\n\tflexColumns.forEach(function(col){\n\t\tflexWidth -= col.width;\n\t});\n\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t//shrink oversize columns if there is no available space\n\tif(overflowWidth > 0 && flexShrinkUnits){\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t}\n\n\t//decrease width of last column to account for rounding errors\n\tif(gapFill && fixedShrinkColumns.length){\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\n\t}\n\n\tflexColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n\n\tfixedShrinkColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n}\n","import Module from '../../core/Module.js';\n\nimport defaultModes from './defaults/modes.js';\n\nclass Layout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table, \"layout\");\n\n\t\tthis.mode = null;\n\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n\t\tthis.registerColumnOption(\"widthGrow\");\n\t\tthis.registerColumnOption(\"widthShrink\");\n\t}\n\n\t//initialize layout system\n\tinitialize(){\n\t\tvar layout = this.table.options.layout;\n\n\t\tif(Layout.modes[layout]){\n\t\t\tthis.mode = layout;\n\t\t}else{\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.widthGrow){\n\t\t\tcolumn.definition.widthGrow = Number(column.definition.widthGrow);\n\t\t}\n\t\tif(column.definition.widthShrink){\n\t\t\tcolumn.definition.widthShrink = Number(column.definition.widthShrink);\n\t\t}\n\t}\n\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\n\t//trigger table layout\n\tlayout(dataChanged){\n\t\tthis.dispatch(\"layout-refreshing\");\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\n\t\tthis.dispatch(\"layout-refreshed\");\n\t}\n}\n\nLayout.moduleName = \"layout\";\n\n//load defaults\nLayout.modes = defaultModes;\n\nexport default Layout;","import Module from '../../core/Module.js';\n\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultLangs from './defaults/langs.js';\n\nclass Localize extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.locale = \"default\"; //current locale\n\t\tthis.lang = false; //current language\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t\tthis.langList = {};\n\n\t\tthis.registerTableOption(\"locale\", false); //current system language\n\t\tthis.registerTableOption(\"langs\", {});\n\t}\n\n\tinitialize(){\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\n\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor(let locale in this.table.options.langs){\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\n\t\t}\n\n\t\tthis.setLocale(this.table.options.locale);\n\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\n\t}\n\n\t//set header placeholder\n\tsetHeaderFilterPlaceholder(placeholder){\n\t\tthis.langList.default.headerFilters.default = placeholder;\n\t}\n\n\t//setup a lang description object\n\tinstallLang(locale, lang){\n\t\tif(this.langList[locale]){\n\t\t\tthis._setLangProp(this.langList[locale], lang);\n\t\t}else{\n\t\t\tthis.langList[locale] = lang;\n\t\t}\n\t}\n\n\t_setLangProp(lang, values){\n\t\tfor(let key in values){\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t\t}else{\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t}\n\n\t//set current locale\n\tsetLocale(desiredLocale){\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching language values\n\t\tfunction traverseLang(trans, path){\n\t\t\tfor(var prop in trans){\n\t\t\t\tif(typeof trans[prop] == \"object\"){\n\t\t\t\t\tif(!path[prop]){\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t}else{\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determining correct locale to load\n\t\tif(desiredLocale === true && navigator.language){\n\t\t\t//get local from system\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif(desiredLocale){\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\t\t\tif(!this.langList[desiredLocale]){\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif(this.langList[prefix]){\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.locale = desiredLocale;\n\n\t\t//load default lang template\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\n\n\t\tif(desiredLocale != \"default\"){\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\n\t\t}\n\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\n\n\t\tthis._executeBindings();\n\t}\n\n\t//get current locale\n\tgetLocale(locale){\n\t\treturn this.locale;\n\t}\n\n\t//get lang object for given local or current if none provided\n\tgetLang(locale){\n\t\treturn locale ? this.langList[locale] : this.lang;\n\t}\n\n\t//get text for current locale\n\tgetText(path, value){\n\t\tvar fillPath = value ? path + \"|\" + value : path,\n\t\tpathArray = fillPath.split(\"|\"),\n\t\ttext = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\t\t// }\n\n\t\treturn text || \"\";\n\t}\n\n\t//traverse langs object and find localized copy\n\t_getLangElement(path, locale){\n\t\tvar root = this.lang;\n\n\t\tpath.forEach(function(level){\n\t\t\tvar rootPath;\n\n\t\t\tif(root){\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif(typeof rootPath != \"undefined\"){\n\t\t\t\t\troot = rootPath;\n\t\t\t\t}else{\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t}\n\n\t//set update binding\n\tbind(path, callback){\n\t\tif(!this.bindings[path]){\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t}\n\n\t//iterate through bindings and trigger updates\n\t_executeBindings(){\n\t\tfor(let path in this.bindings){\n\t\t\tthis.bindings[path].forEach((binding) => {\n\t\t\t\tbinding(this.getText(path), this.lang);\n\t\t\t});\n\t\t}\n\t}\n}\n\nLocalize.moduleName = \"localize\";\n\n//load defaults\nLocalize.langs = defaultLangs;\n\nexport default Localize;","export default {\n\t\"default\":{ //hold default locale text\n\t\t\"groups\":{\n\t\t\t\"item\":\"item\",\n\t\t\t\"items\":\"items\",\n\t\t},\n\t\t\"columns\":{\n\t\t},\n\t\t\"data\":{\n\t\t\t\"loading\":\"Loading\",\n\t\t\t\"error\":\"Error\",\n\t\t},\n\t\t\"pagination\":{\n\t\t\t\"page_size\":\"Page Size\",\n\t\t\t\"page_title\":\"Show Page\",\n\t\t\t\"first\":\"First\",\n\t\t\t\"first_title\":\"First Page\",\n\t\t\t\"last\":\"Last\",\n\t\t\t\"last_title\":\"Last Page\",\n\t\t\t\"prev\":\"Prev\",\n\t\t\t\"prev_title\":\"Prev Page\",\n\t\t\t\"next\":\"Next\",\n\t\t\t\"next_title\":\"Next Page\",\n\t\t\t\"all\":\"All\",\n\t\t\t\"counter\":{\n\t\t\t\t\"showing\": \"Showing\",\n\t\t\t\t\"of\": \"of\",\n\t\t\t\t\"rows\": \"rows\",\n\t\t\t\t\"pages\": \"pages\",\n\t\t\t}\n\t\t},\n\t\t\"headerFilters\":{\n\t\t\t\"default\":\"filter column...\",\n\t\t\t\"columns\":{}\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\nimport TableRegistry from '../../core/tools/TableRegistry.js';\n\nclass Comms extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\n\t}\n\n\tgetConnections(selectors){\n\t\tvar connections = [],\n\t\tconnection;\n\n\t\tconnection = TableRegistry.lookupTable(selectors);\n\n\t\tconnection.forEach((con) =>{\n\t\t\tif(this.table !== con){\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsend(selectors, module, action, data){\n\t\tvar connections = this.getConnections(selectors);\n\n\t\tconnections.forEach((connection) => {\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\n\t\t});\n\n\t\tif(!connections.length && selectors){\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t}\n\n\treceive(table, module, action, data){\n\t\tif(this.table.modExists(module)){\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t}else{\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t}\n}\n\nComms.moduleName = \"comms\";\n\nexport default Comms;","import * as coreModules from '../modules/core.js';\nimport TableRegistry from './TableRegistry.js';\n\nexport default class ModuleBinder {\n\t\n\tconstructor(tabulator, modules){\n\t\tthis.bindStaticFunctionality(tabulator);\n\t\tthis.bindModules(tabulator, coreModules, true);\n\t\t\n\t\tif(modules){\n\t\t\tthis.bindModules(tabulator, modules);\n\t\t}\n\t}\n\t\n\tbindStaticFunctionality(tabulator){\n\t\ttabulator.moduleBindings = {};\n\t\t\n\t\ttabulator.extendModule = function(name, property, values){\n\t\t\tif(tabulator.moduleBindings[name]){\n\t\t\t\tvar source = tabulator.moduleBindings[name][property];\n\t\t\t\t\n\t\t\t\tif(source){\n\t\t\t\t\tif(typeof values == \"object\"){\n\t\t\t\t\t\tfor(let key in values){\n\t\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t\t}\n\t\t};\n\t\t\n\t\ttabulator.registerModule = function(modules){\n\t\t\tif(!Array.isArray(modules)){\n\t\t\t\tmodules = [modules];\n\t\t\t}\n\t\t\t\n\t\t\tmodules.forEach((mod) => {\n\t\t\t\ttabulator.registerModuleBinding(mod);\n\t\t\t});\n\t\t};\n\t\t\n\t\ttabulator.registerModuleBinding = function(mod){\n\t\t\ttabulator.moduleBindings[mod.moduleName] = mod;\n\t\t};\n\t\t\n\t\ttabulator.findTable = function(query){\n\t\t\tvar results = TableRegistry.lookupTable(query, true);\n\t\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t\t};\n\t\t\n\t\t//ensure that module are bound to instantiated function\n\t\ttabulator.prototype.bindModules = function(){\n\t\t\tvar orderedStartMods = [],\n\t\t\torderedEndMods = [],\n\t\t\tunOrderedMods = [];\n\t\t\t\n\t\t\tthis.modules = {};\n\t\t\t\n\t\t\tfor(var name in tabulator.moduleBindings){\n\t\t\t\tlet mod = tabulator.moduleBindings[name];\n\t\t\t\tlet module = new mod(this);\n\t\t\t\t\n\t\t\t\tthis.modules[name] = module;\n\t\t\t\t\n\t\t\t\tif(mod.prototype.moduleCore){\n\t\t\t\t\tthis.modulesCore.push(module);\n\t\t\t\t}else{\n\t\t\t\t\tif(mod.moduleInitOrder){\n\t\t\t\t\t\tif(mod.moduleInitOrder < 0){\n\t\t\t\t\t\t\torderedStartMods.push(module);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\torderedEndMods.push(module);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tunOrderedMods.push(module);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\torderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\torderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\t\n\t\t\tthis.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n\t\t};\n\t}\n\t\n\tbindModules(tabulator, modules, core){\n\t\tvar mods = Object.values(modules);\n\t\t\n\t\tif(core){\n\t\t\tmods.forEach((mod) => {\n\t\t\t\tmod.prototype.moduleCore = true;\n\t\t\t});\n\t\t}\n\t\t\n\t\ttabulator.registerModule(mods);\n\t}\n}","import CoreFeature from '../CoreFeature.js';\n\nexport default class Alert extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.element = this._createAlertElement();\n\t\tthis.msgElement = this._createMsgElement();\n\t\tthis.type = null;\n        \n\t\tthis.element.appendChild(this.msgElement);\n\t}\n    \n\t_createAlertElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert\");\n\t\treturn el;\n\t}\n    \n\t_createMsgElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert-msg\");\n\t\tel.setAttribute(\"role\", \"alert\");\n\t\treturn el;\n\t}\n    \n\t_typeClass(){\n\t\treturn \"tabulator-alert-state-\" + this.type;\n\t}\n    \n\talert(content, type = \"msg\"){\n\t\tif(content){\n\t\t\tthis.clear();\n            \n\t\t\tthis.type = type;\n            \n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n            \n\t\t\tthis.msgElement.classList.add(this._typeClass());\n            \n\t\t\tif(typeof content === \"function\"){\n\t\t\t\tcontent = content();\n\t\t\t}\n            \n\t\t\tif(content instanceof HTMLElement){\n\t\t\t\tthis.msgElement.appendChild(content);\n\t\t\t}else{\n\t\t\t\tthis.msgElement.innerHTML = content;\n\t\t\t}\n            \n\t\t\tthis.table.element.appendChild(this.element);\n\t\t}\n\t}\n    \n\tclear(){\n\t\tif(this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n        \n\t\tthis.msgElement.classList.remove(this._typeClass());\n\t}\n}","'use strict';\n\nimport defaultOptions from './defaults/options.js';\n\nimport ColumnManager from './ColumnManager.js';\nimport RowManager from './RowManager.js';\nimport FooterManager from './FooterManager.js';\n\nimport InteractionMonitor from './tools/InteractionMonitor.js';\nimport ComponentFunctionBinder from './tools/ComponentFunctionBinder.js';\nimport DataLoader from './tools/DataLoader.js';\n\nimport ExternalEventBus from './tools/ExternalEventBus.js';\nimport InternalEventBus from './tools/InternalEventBus.js';\n\nimport DeprecationAdvisor from './tools/DeprecationAdvisor.js';\n\nimport TableRegistry from './tools/TableRegistry.js';\nimport ModuleBinder from './tools/ModuleBinder.js';\n\nimport OptionsList from './tools/OptionsList.js';\n\nimport Alert from './tools/Alert.js';\n\nclass Tabulator {\n\t\n\tconstructor(element, options){\n\t\t\n\t\tthis.options = {};\n\t\t\n\t\tthis.columnManager = null; // hold Column Manager\n\t\tthis.rowManager = null; //hold Row Manager\n\t\tthis.footerManager = null; //holder Footer Manager\n\t\tthis.alertManager = null; //hold Alert Manager\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\n\t\tthis.externalEvents = null; //handle external event messaging\n\t\tthis.eventBus = null; //handle internal event messaging\n\t\tthis.interactionMonitor = false; //track user interaction\n\t\tthis.browser = \"\"; //hold current browser type\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n\t\tthis.rtl = false; //check if the table is in RTL mode\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\n\t\t\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n\t\tthis.dataLoader = false; //bind component functions\n\t\t\n\t\tthis.modules = {}; //hold all modules bound to this table\n\t\tthis.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n\t\tthis.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\t\t\n\t\tthis.deprecationAdvisor = new DeprecationAdvisor(this);\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.destroyed = false;\n\t\t\n\t\tif(this.initializeElement(element)){\n\t\t\t\n\t\t\tthis.initializeCoreSystems(options);\n\t\t\t\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._create();\n\t\t\t});\n\t\t}\n\t\t\n\t\tTableRegistry.register(this); //register table for inter-device communication\n\t}\n\t\n\tinitializeElement(element){\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\n\t\t\tthis.element = element;\n\t\t\treturn true;\n\t\t}else if(typeof element === \"string\"){\n\t\t\tthis.element = document.querySelector(element);\n\t\t\t\n\t\t\tif(this.element){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tinitializeCoreSystems(options){\n\t\tthis.columnManager = new ColumnManager(this);\n\t\tthis.rowManager = new RowManager(this);\n\t\tthis.footerManager = new FooterManager(this);\n\t\tthis.dataLoader = new DataLoader(this);\n\t\tthis.alertManager = new Alert(this);\n\t\t\n\t\tthis.bindModules();\n\t\t\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options);\n\t\t\n\t\tthis._clearObjectPointers();\n\t\t\n\t\tthis._mapDeprecatedFunctionality();\n\t\t\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n\t\t\n\t\tthis.interactionMonitor = new InteractionMonitor(this);\n\t\t\n\t\tthis.dataLoader.initialize();\n\t\t// this.columnManager.initialize();\n\t\t// this.rowManager.initialize();\n\t\tthis.footerManager.initialize();\n\t}\n\t\n\t//convert deprecated functionality to new functions\n\t_mapDeprecatedFunctionality(){\n\t\t//all previously deprecated functionality removed in the 5.0 release\n\t}\n\t\n\t_clearSelection(){\n\t\t\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tif (window.getSelection) {\n\t\t\tif (window.getSelection().empty) {  // Chrome\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {  // Firefox\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {  // IE?\n\t\t\tdocument.selection.empty();\n\t\t}\n\t\t\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t}\n\t\n\t//create table\n\t_create(){\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\n\t\tthis.eventBus.dispatch(\"table-building\");\n\t\t\n\t\tthis._rtlCheck();\n\t\t\n\t\tthis._buildElement();\n\t\t\n\t\tthis._initializeTable();\n\t\t\n\t\tthis._loadInitialData();\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tthis.externalEvents.dispatch(\"tableBuilt\");\n\t}\n\t\n\t_rtlCheck(){\n\t\tvar style = window.getComputedStyle(this.element);\n\t\t\n\t\tswitch(this.options.textDirection){\n\t\t\tcase\"auto\":\n\t\t\t\tif(style.direction !== \"rtl\"){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"rtl\":\n\t\t\t\tthis.element.classList.add(\"tabulator-rtl\");\n\t\t\t\tthis.rtl = true;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"ltr\":\n\t\t\t\tthis.element.classList.add(\"tabulator-ltr\");\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis.rtl = false;\n\t\t}\n\t}\n\t\n\t//clear pointers to objects in default config object\n\t_clearObjectPointers(){\n\t\tthis.options.columns = this.options.columns.slice(0);\n\t\t\n\t\tif(Array.isArray(this.options.data) && !this.options.reactiveData){\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t}\n\t\n\t//build tabulator element\n\t_buildElement(){\n\t\tvar element = this.element,\n\t\toptions = this.options,\n\t\tnewElement;\n\t\t\n\t\tif(element.tagName === \"TABLE\"){\n\t\t\tthis.originalElement = this.element;\n\t\t\tnewElement = document.createElement(\"div\");\n\t\t\t\n\t\t\t//transfer attributes to new element\n\t\t\tvar attributes = element.attributes;\n\t\t\t\n\t\t\t// loop through attributes and apply them on div\n\t\t\tfor(var i in attributes){\n\t\t\t\tif(typeof attributes[i] == \"object\"){\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// replace table with div element\n\t\t\telement.parentNode.replaceChild(newElement, element);\n\t\t\t\n\t\t\tthis.element = element = newElement;\n\t\t}\n\t\t\n\t\telement.classList.add(\"tabulator\");\n\t\telement.setAttribute(\"role\", \"grid\");\n\t\t\n\t\t//empty element\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\t//set table height\n\t\tif(options.height){\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\t\t\telement.style.height = options.height;\n\t\t}\n\t\t\n\t\t//set table min height\n\t\tif(options.minHeight !== false){\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\t\t\n\t\t//set table maxHeight\n\t\tif(options.maxHeight !== false){\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\t}\n\t\n\t//initialize core systems and modules\n\t_initializeTable(){\n\t\tvar element = this.element,\n\t\toptions = this.options;\n\t\t\n\t\tthis.interactionMonitor.initialize();\n\t\t\n\t\tthis.columnManager.initialize();\n\t\tthis.rowManager.initialize();\n\t\t\n\t\tthis._detectBrowser();\n\t\t\n\t\t//initialize core modules\n\t\tthis.modulesCore.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\t//build table elements\n\t\telement.appendChild(this.columnManager.getElement());\n\t\telement.appendChild(this.rowManager.getElement());\n\t\t\n\t\tif(options.footerElement){\n\t\t\tthis.footerManager.activate();\n\t\t}\n\t\t\n\t\tif(options.autoColumns && options.data){\n\t\t\t\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\t\t\n\t\t//initialize regular modules\n\t\tthis.modulesRegular.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\tthis.columnManager.setColumns(options.columns);\n\t\t\n\t\tthis.eventBus.dispatch(\"table-built\");\n\t}\n\t\n\t_loadInitialData(){\n\t\tthis.dataLoader.load(this.options.data);\n\t}\n\t\n\t//deconstructor\n\tdestroy(){\n\t\tvar element = this.element;\n\t\t\n\t\tthis.destroyed = true;\n\t\t\n\t\tTableRegistry.deregister(this); //deregister table from inter-device communication\n\t\t\n\t\tthis.eventBus.dispatch(\"table-destroy\");\n\t\t\n\t\t//clear row data\n\t\tthis.rowManager.destroy();\n\t\t\n\t\t//clear DOM\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\telement.classList.remove(\"tabulator\");\n\n\t\tthis.externalEvents.dispatch(\"tableDestroyed\");\n\t}\n\t\n\t_detectBrowser(){\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\n\t\t\n\t\tif(ua.indexOf(\"Trident\") > -1){\n\t\t\tthis.browser = \"ie\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\n\t\t\tthis.browser = \"edge\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\n\t\t\tthis.browser = \"firefox\";\n\t\t\tthis.browserSlow = false;\n\t\t}else if(ua.indexOf(\"Mac OS\") > -1){\n\t\t\tthis.browser = \"safari\";\n\t\t\tthis.browserSlow = false;\n\t\t}else{\n\t\t\tthis.browser = \"other\";\n\t\t\tthis.browserSlow = false;\n\t\t}\n\t\t\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0,4));\n\t}\n\t\n\tinitGuard(func, msg){\n\t\tvar stack, line;\n\t\t\n\t\tif(this.options.debugInitialization && !this.initialized){\n\t\t\tif(!func){\n\t\t\t\tstack = new Error().stack.split(\"\\n\");\n\t\t\t\t\n\t\t\t\tline = stack[0] == \"Error\" ? stack[2] : stack[1];\n\t\t\t\t\n\t\t\t\tif(line[0] == \" \"){\n\t\t\t\t\tfunc = line.trim().split(\" \")[1].split(\".\")[1];\n\t\t\t\t}else{\n\t\t\t\t\tfunc = line.trim().split(\"@\")[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n\t\t}\n\t\t\n\t\treturn this.initialized;\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\t//block table redrawing\n\tblockRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocking\");\n\t\t\n\t\tthis.rowManager.blockRedraw();\n\t\tthis.columnManager.blockRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocked\");\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-restoring\");\n\n\t\tthis.rowManager.restoreRedraw();\n\t\tthis.columnManager.restoreRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-restored\");\n\t}\n\t\n\t//load data\n\tsetData(data, params, config){\n\t\tthis.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, false);\n\t}\n\t\n\t//clear data\n\tclearData(){\n\t\tthis.initGuard();\n\t\t\n\t\tthis.dataLoader.blockActiveLoad();\n\t\tthis.rowManager.clearData();\n\t}\n\t\n\t//get table data array\n\tgetData(active){\n\t\treturn this.rowManager.getData(active);\n\t}\n\t\n\t//get table data array count\n\tgetDataCount(active){\n\t\treturn this.rowManager.getDataCount(active);\n\t}\n\t\n\t//replace data, keeping table in position with same sort\n\treplaceData(data, params, config){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, true, true);\n\t}\n\t\n\t//update table data\n\tupdateData(data, forceRowUpdate, forcedColumnUpdateName){\n\t\tvar responses = 0;\n\t\t\n\t\tthis.initGuard();\n\n\t\tif((!Array.isArray(forcedColumnUpdateName) && typeof forcedColumnUpdateName != 'string') || forcedColumnUpdateName.length == 0){\n\t\t\tforcedColumnUpdateName = undefined;\n\t\t}\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\tresponses++;\n\t\t\t\t\t\t\n\t\t\t\t\t\trow.updateData(item, forceRowUpdate, forcedColumnUpdateName)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\t\t\treject(\"Update Error - Unable to update row\", item, e);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\treject(\"Update Error - Unable to find row\", item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\taddData(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\n\t\t\t\t\t.then((rows) => {\n\t\t\t\t\t\tvar output = [];\n\t\t\t\t\t\n\t\t\t\t\t\trows.forEach(function(row){\n\t\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t\tresolve(output);\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//update table data\n\tupdateOrAddData(data){\n\t\tvar rows = [],\n\t\tresponses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tresponses++;\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(row.getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.rowManager.addRows(item)\n\t\t\t\t\t\t\t.then((newRows)=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//get row object\n\tgetRow(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//get row object\n\tgetRowFromPosition(position){\n\t\tvar row = this.rowManager.getRowFromPosition(position);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//delete row from table\n\tdeleteRow(index){\n\t\tvar foundRows = [];\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(!Array.isArray(index)){\n\t\t\tindex = [index];\n\t\t}\n\t\t\n\t\t//find matching rows\n\t\tfor(let item of index){\n\t\t\tlet row = this.rowManager.findRow(item, true);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\tfoundRows.push(row);\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//sort rows into correct order to ensure smooth delete from table\n\t\tfoundRows.sort((a, b) => {\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t});\n\t\t\n\t\t//delete rows\n\t\tfoundRows.forEach((row) =>{\n\t\t\trow.delete();\n\t\t});\n\t\t\n\t\tthis.rowManager.reRenderInPosition();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\t//add row to table\n\taddRow(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\treturn this.rowManager.addRows(data, pos, index, true)\n\t\t\t.then((rows)=>{\n\t\t\t\treturn rows[0].getComponent();\n\t\t\t});\n\t}\n\t\n\t//update a row if it exists otherwise create it\n\tupdateOrAddRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn row.getComponent();\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn this.rowManager.addRows(data)\n\t\t\t\t.then((rows)=>{\n\t\t\t\t\treturn rows[0].getComponent();\n\t\t\t\t});\n\t\t}\n\t}\n\t\n\t//update row data\n\tupdateRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn Promise.resolve(row.getComponent());\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\n\t\t}\n\t}\n\t\n\t//scroll to row in DOM\n\tscrollToRow(index, position, ifVisible){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible);\n\t\t}else{\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\n\t\t}\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tvar fromRow = this.rowManager.findRow(from);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromRow){\n\t\t\tfromRow.moveToRow(to, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t}\n\t\n\tgetRows(active){\n\t\treturn this.rowManager.getComponents(active);\t\n\t}\n\t\n\t//get position of row in table\n\tgetRowPosition(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getPosition();\n\t\t}else{\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t/////////////// Column Functions  ///////////////\n\tsetColumns(definition){\n\t\tthis.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n\t\t\n\t\tthis.columnManager.setColumns(definition);\n\t}\n\t\n\tgetColumns(structured){\n\t\treturn this.columnManager.getComponents(structured);\n\t}\n\t\n\tgetColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tif(column){\n\t\t\treturn column.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetColumnDefinitions(){\n\t\treturn this.columnManager.getDefinitionTree();\n\t}\n\t\n\tshowColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.show();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\thideColumn(field){\n\t\tvar column = this.columnManager.findColumn(field); \n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.hide();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\ttoggleColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tif(column.visible){\n\t\t\t\tcolumn.hide();\n\t\t\t}else{\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\taddColumn(definition, before, field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.columnManager.addColumn(definition, before, column)\n\t\t\t.then((column) => {\n\t\t\t\treturn column.getComponent();\n\t\t\t});\n\t}\n\t\n\tdeleteColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.delete();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tupdateColumnDefinition(field, definition){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.updateDefinition(definition);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tvar fromColumn = this.columnManager.findColumn(from),\n\t\ttoColumn = this.columnManager.findColumn(to);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromColumn){\n\t\t\tif(toColumn){\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t}\n\t\n\t//scroll to column in DOM\n\tscrollToColumn(field, position, ifVisible){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this.columnManager.findColumn(field);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//////////// General Public Functions ////////////\n\t//redraw list without updating data\n\tredraw(force){\n\t\tthis.initGuard();\n\n\t\tthis.columnManager.redraw(force);\n\t\tthis.rowManager.redraw(force);\n\t}\n\t\n\tsetHeight(height){\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\t\tthis.element.style.height = this.options.height;\n\t\tthis.rowManager.initializeRenderer();\n\t\tthis.rowManager.redraw();\n\t}\n\t\n\t//////////////////// Event Bus ///////////////////\n\t\n\ton(key, callback){\n\t\tthis.externalEvents.subscribe(key, callback);\n\t}\n\t\n\toff(key, callback){\n\t\tthis.externalEvents.unsubscribe(key, callback);\n\t}\n\t\n\tdispatchEvent(){\n\t\tvar args = Array.from(arguments);\n\t\targs.shift();\n\t\t\n\t\tthis.externalEvents.dispatch(...arguments);\n\t}\n\n\t//////////////////// Alerts ///////////////////\n\n\talert(contents, type){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.alert(contents, type);\n\t}\n\n\tclearAlert(){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.clear();\n\t}\n\t\n\t////////////// Extension Management //////////////\n\tmodExists(plugin, required){\n\t\tif(this.modules[plugin]){\n\t\t\treturn true;\n\t\t}else{\n\t\t\tif(required){\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule(key){\n\t\tvar mod = this.modules[key];\n\t\t\n\t\tif(!mod){\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\n\t\t}\n\t\t\n\t\treturn mod;\n\t}\n}\n\n//default setup options\nTabulator.defaultOptions = defaultOptions;\n\n//bind modules and static functionality\nnew ModuleBinder(Tabulator);\n\nexport default Tabulator;\n","export default {\n\n\tdebugEventsExternal:false, //flag to console log events\n\tdebugEventsInternal:false, //flag to console log events\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\n\tdebugInvalidComponentFuncs:true, //allow toggling of invalid component warnings\n\tdebugInitialization:true, //allow toggling of pre initialization function call warnings\n\tdebugDeprecation:true, //allow toggling of deprecation warnings\n\n\theight:false, //height of tabulator\n\tminHeight:false, //minimum height of tabulator\n\tmaxHeight:false, //maximum height of tabulator\n\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\n\n\tpopupContainer:false,\n\n\tcolumns:[],//store for colum header info\n\tcolumnDefaults:{}, //store column default props\n\n\tdata:false, //default starting data\n\n\tautoColumns:false, //build columns from data row structure\n\tautoColumnsDefinitions:false,\n\n\tnestedFieldSeparator:\".\", //separator for nested data\n\n\tfooterElement:false, //hold footer element\n\n\tindex:\"id\", //filed for row index\n\n\ttextDirection:\"auto\",\n\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\n\n\theaderVisible:true, //hide header\n\n\trenderVertical:\"virtual\",\n\trenderHorizontal:\"basic\",\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\n\n\tscrollToRowPosition:\"top\",\n\tscrollToRowIfVisible:true,\n\n\tscrollToColumnPosition:\"left\",\n\tscrollToColumnIfVisible:true,\n\n\trowFormatter:false,\n\trowFormatterPrint:null,\n\trowFormatterClipboard:null,\n\trowFormatterHtmlOutput:null,\n\n\trowHeight:null,\n\n\tplaceholder:false,\n\n\tdataLoader:true,\n\tdataLoaderLoading:false,\n\tdataLoaderError:false,\n\tdataLoaderErrorTimeout:3000,\n\n\tdataSendParams:{},\n\n\tdataReceiveParams:{},\n};\n","//tabulator with all modules installed\nimport {default as Tabulator} from './Tabulator.js';\nimport * as modules from '../core/modules/optional.js';\nimport ModuleBinder from './tools/ModuleBinder.js';\n\nclass TabulatorFull extends Tabulator {}\n\n//bind modules and static functionality\nnew ModuleBinder(TabulatorFull, modules);\n\nexport default TabulatorFull;","export default class PseudoRow {\n\n\tconstructor (type){\n\t\tthis.type = type;\n\t\tthis.element = this._createElement();\n\t}\n\n\t_createElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-row\");\n\t\treturn el;\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tgetComponent(){\n\t\treturn false;\n\t}\n\n\tgetData(){\n\t\treturn {};\n\t}\n\n\tgetHeight(){\n\t\treturn this.element.outerHeight;\n\t}\n\n\tinitialize(){}\n\n\treinitialize(){}\n\n\tnormalizeHeight(){}\n\n\tgenerateCells(){}\n\n\treinitializeHeight(){}\n\n\tcalcHeight(){}\n\n\tsetCellHeight(){}\n\n\tclearCellHeight(){}\n}"],"names":["CoreFeature","constructor","table","this","reloadData","data","silent","columnsChanged","dataLoader","load","undefined","langText","modules","localize","getText","arguments","langBind","bind","langLocale","getLocale","commsConnections","comms","getConnections","commsSend","send","layoutMode","layout","getMode","layoutRefresh","force","subscribe","eventBus","unsubscribe","subscribed","key","subscriptionChange","dispatch","chain","confirm","dispatchExternal","externalEvents","subscribedExternal","subscriptionChangeExternal","options","setOption","value","deprecationCheck","oldOption","newOption","deprecationAdvisor","check","deprecationCheckMsg","msg","checkMsg","deprecationMsg","module","Helpers","static","el","offsetWidth","offsetHeight","box","getBoundingClientRect","top","window","pageYOffset","document","documentElement","clientTop","left","pageXOffset","clientLeft","obj","clone","list","objectProto","__proto__","arrayProto","i","Object","assign","Array","isArray","match","copy","subject","findIndex","item","unshift","deepClone","computedStyle","getComputedStyle","padding","parseFloat","getPropertyValue","margin","border","height","Popup","element","parent","super","container","_lookupContainer","reversedX","childPopup","blurable","blurCallback","blurEventsBound","renderedCallback","visible","hideable","classList","add","blurEvent","hide","escEvent","_escapeCheck","destroyBinding","tableDestroyed","destroyed","popupContainer","querySelector","console","warn","_checkContainerIsParent","body","parentNode","renderCallback","callback","containerEventCoords","e","touch","MouseEvent","x","touches","pageX","y","pageY","parentOffset","elOffset","elementPositionCoords","position","containerOffset","offset","show","origin","parentEl","coords","HTMLElement","style","appendChild","_fitToScreen","addEventListener","stopPropagation","scrollTop","right","Math","max","scrollHeight","parseInt","isVisible","hideOnBlur","setTimeout","rowManager","keyCode","blockHide","restoreHide","removeEventListener","removeChild","child","Module","name","_handler","initialize","registerTableOption","optionsList","register","registerColumnOption","columnManager","registerTableFunction","func","args","initGuard","registerComponentFunction","component","handler","componentFunctionBinder","registerDataHandler","priority","registerDataPipelineHandler","registerDisplayHandler","registerDisplayPipelineHandler","displayRows","adjust","lookupIndex","index","length","displayPipeline","getDisplayRows","activeRows","refreshData","renderInPosition","refreshActiveData","footerAppend","footerManager","append","footerPrepend","prepend","footerRemove","remove","popup","menuEl","menuContainer","alert","content","type","alertManager","clearAlert","clear","Accessor","allowedTypes","initializeColumn","transformRow","column","config","forEach","accessor","charAt","toUpperCase","slice","definition","lookupAccessor","params","accessors","row","rowComponent","getComponent","traverse","colComponent","getFieldValue","setFieldValue","moduleName","generateParamsList","prefix","output","concat","push","serializeParams","encoded","encodeURIComponent","join","url","keys","method","toLowerCase","includes","json","headers","JSON","stringify","form","FormData","Ajax","urlGenerator","loaderPromise","contentTypeFormatters","ajaxRequestFunc","defaultLoaderPromise","ajaxURLGenerator","defaultURLGenerator","ajaxURL","setUrl","setDefaultConfig","ajaxConfig","getUrl","requestDataCheck","requestParams","requestData","ajaxParams","call","previousData","generateConfig","sendRequest","defaultConfig","ajaxRequesting","then","ajaxResponse","Promise","reject","contentType","resolve","ajaxContentType","Accept","mode","location","credentials","fetch","response","ok","catch","error","status","statusText","defaultContentTypeFormatters","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","clipboard","clipboardCopyRowRange","plain","html","preventDefault","clipboardCopyFormatter","export","generateExportList","clipboardCopyConfig","clipboardCopyStyled","generateHTMLTable","generatePlainContent","clipboardData","setData","originalEvent","reset","paste","setPasteParser","clipboardPasteParser","setPasteAction","clipboardPasteAction","rowData","columns","col","getKey","range","internal","sel","textRange","getSelection","createRange","selectNodeContents","toString","removeAllRanges","addRange","selection","createTextRange","moveToElementText","select","execCommand","action","pasteActions","parser","pasteParsers","rows","checkPaseOrigin","getPasteData","modExists","mutateData","mutator","valid","target","tagName","edit","currentCell","getData","replace","update","updateOrAddData","insert","addData","headerFindSuccess","columnMap","split","find","title","trim","field","columnsByIndex","shift","CalcComponent","_row","Proxy","get","receiver","handle","transform","getElement","getTable","getCells","cells","cell","getCell","_getSelf","CellComponent","_cell","getValue","getOldValue","getInitialValue","initialValue","getRow","getType","getField","getColumn","setValue","mutate","restoreOldValue","setValueActual","restoreInitialValue","checkHeight","Cell","oldValue","width","minWidth","loaded","build","generateElement","setWidth","_configureCell","createElement","className","setAttribute","textAlign","hozAlign","vertAlign","display","alignItems","bottom","middle","justifyContent","center","cssClass","_generateContents","val","innerHTML","Node","firstChild","cellRendered","containerOnly","layoutElement","setValueProcessData","cellEdited","changed","widthStyled","clearWidth","getWidth","setMinWidth","minWidthStyled","setMaxWidth","maxWidth","maxWidthStyled","reinitializeHeight","clearHeight","setHeight","heightStyled","getHeight","outerRowHeight","elOuterHeight","delete","redrawBlock","deleteCell","calcs","getIndex","getCellIndex","ColumnComponent","_column","getDefinition","getTitleDownload","isGroup","toggle","getSubColumns","getParentColumn","Column","scrollTo","ifVisible","scrollToColumn","move","to","after","toColumn","findColumn","moveColumn","getNextColumn","nextCol","nextColumn","getPrevColumn","prevCol","prevColumn","updateDefinition","updates","result","reinitializeWidth","rerenderColumns","maxInitialWidth","variableHeight","headerVertical","headerHozAlign","headerWordWrap","editableTitle","def","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","fieldStructure","titleDownload","titleFormatterRendered","mapDefinitions","setField","widthFixed","newCol","attachColumn","checkColumnVisibility","registerColumnField","_initialize","columnHeaderVertAlign","defaults","columnDefaults","generate","defaultOptionList","checkDefinition","indexOf","nestedFieldSeparator","_getNestedData","_getFlatData","_setNestedData","_setFlatData","registerColumnPosition","reRegisterPosition","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","_buildColumnHeaderTitle","focus","text","_formatColumnHeaderTitle","contents","dataObj","structure","columnRendered","verticalAlign","alignment","parentHeight","getGroupElement","clientHeight","getHeadersElement","minHeight","clearVerticalAlign","paddingTop","getFirstColumn","getLastColumn","getColumns","getTopColumn","updateBranches","colDefs","responsiveToggle","verticalAlignHeaders","matchChildWidths","childWidth","splice","setWidthActual","isNaN","floor","clientWidth","min","checkCellHeights","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","getLeftOffset","offsetLeft","ceil","cellCount","deregisterColumn","generateCell","findColumnIndex","_nextVisibleColumn","getColumnByIndex","_prevVisibleColumn","fitToData","setTo","addColumn","defaultOptions","RowComponent","getPosition","watchPosition","scrollToRow","moveToRow","forceRowUpdate","forcedColumnUpdateName","updateData","normalizeHeight","reformat","reinitialize","getNextRow","nextRow","getPrevRow","prevRow","Row","manualHeight","outerHeight","initialized","positionWatchers","created","create","detachElement","generateCells","inFragment","deleteCells","renderer","renderRowCells","rowFormatter","rerenderRowCells","rendered","deinitialize","deinitializeHeight","children","maxHeight","rowHeight","resizableRows","updatedData","newRowData","elVisible","tempData","parse","attrname","getColumnsByFieldRoot","forceColumnUpdate","findCell","nextDisplayRow","prevDisplayRow","before","toRow","findRow","moveRowActual","deleteActual","blockRedraw","detachModules","deleteRow","wipe","isDisplayed","setPosition","getGroup","group","avg","values","calcParams","precision","reduce","sum","Number","toFixed","String","count","unique","filter","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","topRow","botRow","topInitialized","botInitialized","recalcAfterBlock","cellValueChanged","initializeColumnCheck","rowsUpdated","scrollHorizontal","recalcActiveRows","recalcActiveRowsRefresh","tableRedraw","visibleRows","adjustForScrollbar","restoreRedraw","resizeHolderWidth","getResults","userRecalc","headersElement","recalc","redraw","blockCheck","viewable","groupBy","recalcRowGroup","dataTreeStartExpanded","dataTree","recalcAll","topCalc","bottomCalc","columnCalcs","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","removeCalcs","adjustTableSize","reinitializeCalcs","getContentsElement","insertBefore","nextSibling","scrollLeft","rowsToData","generateRow","frozenColumns","recalcGroup","groupRows","getRowGroup","getChildGroups","generateRowData","generateTopRow","generateBottomRow","dataTreeChildColumnCalcs","open","getFilteredTreeChildren","pos","disable","enable","format","formatter","getFormatter","paramKey","hasTopCalcs","hasBottomCalcs","results","getGroups","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","groups","rtl","paddingLeft","paddingRight","defaultCalculations","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","collapseRow","expandRow","toggleRow","getTreeParent","getRowChildren","addTreeChildRow","isRowExpanded","dummyEl","dataTreeChildField","dataTreeChildIndent","dataTreeBranchElement","dataTreeCollapseElement","tabIndex","dataTreeExpandElement","initializeRow","layoutRow","rowDelete","rowDataChanged","columnMoving","initializeElementField","tableRedrawing","getRows","reinitializeRowChildren","firstCol","getFirstVisibleColumn","dataTreeElementColumn","getTreeChildren","redrawNeeded","childArray","controlEl","generateControlElement","cloneNode","marginRight","marginLeft","oldControl","replaceChild","getChildren","allChildren","generateChildren","dataTreeFilter","dataTreeSort","sort","sub","childData","childRow","getTreeParentRoot","childIndex","findChildIndex","recurse","getChildField","csv","setFileContents","delimiter","fileContents","depth","bom","jsonLines","pdf","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","parseRow","styles","colSpan","rowSpan","orientation","unit","doc","jspdf","autoTable","didDrawPage","head","documentProcessing","xlsx","sheetName","workbook","XLSX","utils","book_new","tableFeatures","compression","compress","writeOptions","bookType","bookSST","generateSheet","merges","worksheet","s","c","r","a","b","j","Date","sheet_add_aoa","encode_range","SheetNames","Sheets","sheetOnly","sheets","sheet","active","intercept","buf","ArrayBuffer","view","Uint8Array","charCodeAt","s2ab","write","Download","mimeType","Blob","deprecatedOptionsCheck","download","downloadToTab","filename","interceptCallback","downloadFunc","downloaders","mime","triggerDownload","downloadConfig","downloadRowRange","groupHeader","groupHeaderDownload","_group","getRowCount","newTab","blob","downloadEncoder","URL","createObjectURL","navigator","msSaveOrOpenBlob","click","commsReceived","maskInput","mask","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","char","ctrlKey","metaKey","maskAutoFill","placeholder","defaultDownloaders","Edit","editor","onRendered","success","cancel","editorParams","_initializeParams","displayItems","currentItems","focusedItem","input","_createInputElement","listEl","_createListElement","initialValues","isFilter","filterTimeout","filtered","typing","listIteration","lastAction","filterTerm","actions","_deprecatedOptionsCheck","_initializeValue","_onRendered","listItemFormatter","sortValuesList","searchFunc","searchingPlaceholder","defaultValue","multiselect","headerFilterInitialListGen","cellEl","clickStop","preventScroll","_preventPopupBlur","_preventBlur","_inputKeyDown","_setListWidth","attribs","elementAttributes","clearable","boxSizing","autocomplete","cursor","caretColor","getAttribute","_bindInputEvents","valueCheck","valueKeys","verticalNavigation","placeholderLoading","placeholderEmpty","filterDelay","emptyValue","freetext","filterFunc","filterRemote","allowEmpty","listOnEmpty","valuesLookup","valuesURL","_inputFocus","_inputClick","_inputBlur","_inputSearch","_inputKeyUp","rebuildOptionsList","_filter","clearTimeout","_filterList","_resolveValue","_clearChoices","_keyUp","_keyDown","_keySide","_keyEnter","_keyEsc","_keyHomeEnd","_keyTab","_keySelectLetter","_keyAutoCompLetter","_chooseItem","stopImmediatePropagation","_focusItem","_cancel","_scrollToValue","character","fromCharCode","label","startsWith","scrollIntoView","behavior","block","inline","_generateOptions","_sortOptions","_buildList","_showList","isInteger","_filterOptions","iteration","_ajaxRequest","_uniqueColumnValues","valuesLookupField","_addPlaceholder","responseValues","_parseList","_clearList","term","urlBuilder","getColumnByField","inputValues","entries","map","_parseListItem","option","level","_parseListGroup","itemParams","selected","original","sorter","_defaultSortFunction","_sortGroup","as","bs","a1","b1","L","rx","rd","emptyAlign","isFinite","test","_defaultFilterFunc","_filterItem","matches","_buildItem","itemFormatter","_groupClick","_itemClick","_styleItem","startVis","blur","cellValue","search","onChange","selectContents","textarea","vertNav","whiteSpace","resize","heightNow","shiftKey","shiftEnterSubmit","selectionStart","number","step","blurFunc","date","inputFormat","DT","DateTime","luxon","convertDate","isDateTime","fromISO","fromFormat","toFormat","luxDate","toISO","relatedTarget","rangeParent","explicitOriginalTarget","time","newDatetime","luxTime","datetime","luxDateTime","List","star","self","maxStars","getElementsByTagName","size","stars","starsHolder","createElementNS","starChange","browser","buildStar","starHolder","nextStar","changeValue","overflow","textOverflow","progress","mouseDrag","mouseDragWidth","percent","bar","updateValue","calcVal","round","backgroundColor","screenX","tickCross","tristate","indetermValue","indeterminateValue","indetermState","trueValueSet","falseValueSet","marginTop","checkedValue","checked","trueValue","falseValue","indeterminate","mouseClick","recursionBlock","invalidEdit","editedCells","editors","getEditedCells","clearCellEdited","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","cellIsEdited","clearEdited","editCell","cellCancelEdit","bindEditor","updateCellClass","columnDeleteCheck","rowDeleteCheck","rowEditableCheck","cancelEdit","keybindingNavigateNext","newRow","addRow","edited","allowEdit","nextCell","findPrevEditableCell","findNextEditableCell","prevCell","editable","getCurrentCell","clearEditor","cellEditCancelled","contains","button","focusCellNoEvent","forceEdit","focusScrollAdjust","getRenderMode","topEdge","bottomEdge","rowEl","offsetTop","leftEdge","rightEdge","leftMargin","rightMargin","renderHorizontal","vDomPadLeft","cellEditor","cellClick","cellEditing","validationMode","editIndex","defaultEditors","ExportRow","ExportColumn","Export","cloneTableStyle","colVisProp","getHtml","columnHeaders","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","generateTable","generateTableElement","getVisibleRows","selectRow","selectedRows","pagination","columnGroups","colData","processColumnGroup","maxDepth","groupData","subGroup","subGroupData","columnVisCheck","visProp","headerDepth","exportRows","parseColumnGroup","rowGroups","exportCols","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","mapElementStyles","generateHeaderElement","generateGroupElement","generateCalcElement","generateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","firstCell","lastCell","classNames","generator","cellStyle","cellWrapper","formatCells","formatExportValue","align","holder","htmlOutputConfig","from","props","lookup","color","fromStyle","prop","filterVal","rowVal","filterParams","regex","RegExp","like","keywords","separator","keyword","matchAll","starts","ends","endsWith","in","Filter","filterList","headerFilters","headerFilterColumns","prevHeaderFilterChangeCheck","tableInitialized","searchRows","searchData","userSetFilter","userRefreshFilter","userAddFilter","getFilters","userSetHeaderFilterFocus","userGetHeaderFilterValue","userSetHeaderFilterValue","getHeaderFilters","userRemoveFilter","userClearFilter","userClearHeaderFilter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","initializeColumnHeaderFilter","hideHeaderFilterElements","showHeaderFilterElements","tableBuilt","generatePlaceholder","filterMode","remoteFilterParams","initialFilter","setFilter","initialHeaderFilter","placeholderHeaderFilter","refreshFilter","addFilter","removeFilter","all","clearFilter","clearHeaderFilter","headerFilter","filterType","tagType","attrType","filterChangeCheck","prevSuccess","emptyFunc","headerFilterFunc","filters","headerFilterFuncParams","fieldVal","colVal","trackChanges","generateHeaderFilterElement","filterElement","editorElement","typingTimer","searchTrigger","onRenderedCallback","headerElement","headerFilterEmptyCheck","headerFilterParams","headerFilterPlaceholder","contentsElement","headerFilterLiveFilterDelay","hasAttribute","headerFilterLiveFilter","hasChanged","findFilter","findSubFilters","ajax","filtersToArray","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","defaultFilters","plaintext","formatterParams","emptyToSpace","sanitizeHTML","money","integer","decimal","rgx","floatVal","sign","decimalSym","thousandSym","thousand","negativeSign","symbolAfter","abs","link","urlPrefix","labelField","labelTraverse","path","urlField","image","src","urlSuffix","empty","truthy","allowTruthy","tick","tickElement","cross","crossElement","outputFormat","invalid","invalidPlaceholder","isValid","timezone","setZone","datetimediff","suffix","humanize","now","diff","toHuman","traffic","percentValue","colors","legend","legendColor","legendAlign","barEl","barContainer","legendEl","holderEl","buttonTick","buttonCross","rownum","innerText","responsiveCollapse","responsiveLayout","toggleList","isOpen","rowSelection","checkbox","selectableRangeMode","toggleSelect","handleComplexRowClick","isSelected","registerRowSelectCheckbox","deselectRow","registerHeaderSelectCheckbox","Format","formatValue","formatHeader","lookupFormatter","formatterPrint","print","formatterClipboard","formatterHtmlOutput","htmlOutput","formatters","mockCell","titleFormatter","titleFormatterParams","entityMap","defaultFormatters","FrozenColumns","leftColumns","rightColumns","initializationMode","layoutCell","reinitializeColumns","blockLayout","unblockLayout","edge","frozenCheck","frozen","layoutCalcRows","layoutGroupCalcs","groupList","layoutColumnPosition","allCells","leftParents","marginValue","getColGroupParentElement","reinitializeRows","getTableElement","_calcSpace","FrozenRows","freezeRow","unfreezeRow","isRowFrozen","detachRow","frozenRows","initializeRows","rowType","isFrozen","styleRows","styleRow","GroupComponent","groupManager","getParentGroup","toggleVisibility","Group","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","old","elementContents","arrowElement","createElements","addBindings","createValueGroups","elementsOnly","arrow","movableRows","moveRow","initializeGroupHeader","allowedValues","_createGroup","groupToggleElement","groupID","groupKey","headerGenerator","insertRow","conformRowData","toIndex","updateGroupRows","scrollHeader","getRowIndex","removeRow","groupValues","generateGroupHeaderContents","removeGroup","getHeadersAndRows","_visSet","groupClosedShowCalcs","prev","includeChildren","getPath","childNodes","GroupRows","displayHandler","setGroupBy","setGroupValues","setGroupStartOpen","setGroupHeader","userGetGroups","userGetGroupedData","rowGetGroup","_blockRedrawing","_restore_redrawing","groupUpdateOnCellEdit","cellUpdated","reassignRowToGroup","configureGroupSetup","rowDeleting","scrollHeaders","rowMoving","rowAddingIndex","rowSample","virtualRenderFill","groupStartOpen","langValue","lang","items","getRealColumns","lookupFunc","prevValue","tableElement","assignRowToGroup","moveRowInArray","getGroupedData","toGroup","fromGroup","generateGroups","groupComponents","pullGroupListData","groupListData","rowCount","headerContent","countGroups","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","getExpectedPath","every","groupPath","groupId","checkBasicModeGroupHeaderWidth","onlyGroupHeaders","History","history","clearComponentHistory","rowDeleted","rowAdded","rowMoved","undo","redo","getHistoryUndoSize","getHistoryRedoSize","posFrom","posTo","newValue","undoers","redoers","_rebindRow","oldRow","cellEdit","rowAdd","addRowActual","rowMove","getRowFromPosition","regenerateRowPositions","reRenderInPosition","HtmlTableImport","fieldIndex","hasIndex","tableElementCheck","originalElement","parseTable","_extractOptions","_extractHeaders","_generateBlankHeaders","attributes","optionsArr","attrib","_attribValue","_findCol","exists","textContent","replaceAll","registeredDefaults","inQuote","nextChar","array","Import","importFromFile","importFormat","loadDataCheck","loadData","importData","lookupImporter","structureData","err","importer","importers","extension","pickFile","extensions","accept","file","files","reader","FileReader","importReader","readAsArrayBuffer","readAsBinaryString","readAsDataURL","readAsText","onload","onerror","parsedData","autoColumns","structureArrayToObject","structureArrayToColumns","defaultImporters","Interaction","eventMap","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowMouseDown","rowMouseUp","rowTap","rowDblTap","rowTapHold","cellDblClick","cellContext","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellMouseDown","cellMouseUp","cellTap","cellDblTap","cellTapHold","headerClick","headerDblClick","headerContext","headerMouseEnter","headerMouseLeave","headerMouseOver","headerMouseOut","headerMouseMove","headerMouseDown","headerMouseUp","headerTap","headerDblTap","headerTapHold","groupClick","groupDblClick","groupContext","groupMouseEnter","groupMouseLeave","groupMouseOver","groupMouseOut","groupMouseMove","groupMouseDown","groupMouseUp","groupTap","groupDblTap","groupTapHold","subscribers","touchSubscribers","columnSubscribers","touchWatchers","tap","tapDbl","tapHold","initializeExternalEvents","cellContentsSelectionFixer","clearTouchWatchers","selectNode","subscriptionChanged","added","subscribeTouchEvents","unsubscribeTouchEvents","handleTouch","noTouch","dispatchEvent","watchers","componentObj","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","bindings","keybindings","mergedBindings","mapBindings","bindEvents","clearBindings","binding","mapBinding","symbolsList","ctrl","meta","code","checkBinding","navPrev","navNext","navUp","navDown","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","copyToClipboard","keyBlock","newPos","displayRowsCount","scrollMax","navLeft","navRight","Menu","nestedMenuBlock","currentComponent","rootPopup","initializeRowWatchers","initializeGroupWatchers","rowContextMenu","loadMenuEvent","on","rowClickMenu","rowDblClickMenu","groupContextMenu","groupClickMenu","groupDblClickMenu","headerContextMenu","loadMenuTableColumnEvent","headerClickMenu","headerDblClickMenu","headerMenu","initializeColumnHeaderMenu","contextMenu","loadMenuTableCellEvent","clickMenu","dblClickMenu","headerMenuEl","icon","headerMenuIcon","menu","loadMenu","parentPopup","itemEl","disabled","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","movableColumns","colEl","mousemove","which","startMove","bindTouchEvents","nextColWidth","prevColWidth","nextColWidthLast","prevColWidthLast","startXMove","passive","moveToCol","_bindMouseMove","_unbindMouseMove","movingCells","moveColumnActual","scrollPos","columnHolder","xPos","MoveRows","toRowAfter","hasHandle","startY","tableRowDropEvent","connection","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connections","connectedTable","connectedRow","movableRowsConnectedTables","movableRowsConnectedElements","initializeCell","mouseup","tableRowDrop","previousSibling","rowHandle","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","startYMove","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","elementRowDrop","connectionTables","query","prototype","querySelectorAll","dropEvent","tabulatorElementDropEvent","connect","disconnect","dropComplete","sender","movableRowsSender","senders","movableRowsReceiver","receivers","fromRow","fromTable","toTable","Mutator","enabled","transformCell","mutateLink","lookupMutator","mutators","mutatorEdit","links","linkCell","pageSize","currentRow","currentPage","totalRows","totalPages","showingEl","valueEl","ofEl","totalEl","rowsEl","pages","Page","progressiveLoad","pageCounterElement","pageCounter","page","remoteRowCountEstimate","initialLoad","dataChanging","pageSizes","setMaxPage","setPage","userSetPageToRow","userSetPageSize","getPageSize","previousPage","nextPage","getPage","getPageMax","setPageToRow","initialLoadComplete","calculatePageSizes","footerRedraw","paginationAddRow","rowAddingPosition","paginationMode","remotePageParams","_parseRemoteData","restOnRenderBefore","initializePageCounter","initializePaginator","initializeProgressive","scrollVertical","testElRow","testElCell","paginationSize","visibility","generatePageSizeSelectList","setPageSize","dir","loading","progressiveLoadScrollMargin","pagesElement","firstBut","prevBut","nextBut","lastBut","paginationSizeSelector","pageSizeSelect","counter","paginationCounter","pageCounters","hidden","pageSelectLabel","paginationCounterHolder","paginationElement","paginationCounterElement","paginationInitialPage","paginationButtonCount","setMaxRows","trigger","_setPageCounter","_setPageButtons","leftSize","rightSize","_generatePageButton","start","end","actualStartRow","actualRowPageSize","actualRows","finally","last_page","last_row","addRows","progressiveLoadDelay","footer","containerElement","scrollWidth","defaultPageCounters","local","id","localStorage","getItem","cookie","cookiePos","setItem","expireDate","setDate","getDate","toUTCString","Persistence","defWatcherBlock","readFunc","writeFunc","localStorageTest","testKey","removeItem","persistence","retrievedData","persistenceMode","persistenceID","persistenceReaderFunc","readers","persistenceWriterFunc","writers","retrieveData","save","eventSave","getColumnLayout","setColumnLayout","sorters","initialSort","parseColumns","setColumns","mergeDefinition","getOwnPropertyDescriptor","defineProperty","set","current","oldCols","newCols","_findColumn","validateSorters","getSort","getGroupConfig","getPageConfig","definitions","excludedKeys","defStore","colDef","moduleInitOrder","defaultReaders","defaultWriters","_componentPopupCall","loadPopupEvent","rowContextPopup","rowClickPopup","rowDblClickPopup","groupContextPopup","groupClickPopup","groupDblClickPopup","headerContextPopup","loadPopupTableColumnEvent","headerClickPopup","headerDblClickPopup","headerPopup","initializeColumnHeaderPopup","contextPopup","loadPopupTableCellEvent","clickPopup","dblClickPopup","headerPopupEl","headerPopupIcon","loadPopup","contentsEl","Print","manualBlock","beforeprintEventHandler","afterprintEventHandler","printAsHtml","replaceTable","cleanup","destroy","printFullscreen","printConfig","printStyled","printRowRange","footerContent","scrollX","scrollY","footerEl","tableEl","printHeader","printFooter","printFormatter","ReactiveData","origFuncs","currentVersion","reactiveData","unblock","watchRow","watchData","unwatchData","version","enumerable","configurable","arg","apply","getRowFromDataObject","pop","startRow","newRows","reverse","oldRows","writable","watchKey","watchTreeChildren","childField","rebuildTree","unwatchRow","ResizeColumns","startColumn","startWidth","latestX","initialNextColumn","layoutColumnHeader","initializeEventWatchers","layoutCellHandles","deInitializeComponent","resizeHandle","columnLayoutUpdated","deInitializeColumn","columnWidthUpdated","resizable","reinitializeColumn","frozenColumnOffset","frozenOffset","handleEl","nearestColumn","_checkResizability","handleDown","_mouseDown","oldWidth","parentElement","mouseMove","blockedBefore","blockedAfter","startDiff","moveDiff","resizableColumnFit","colWidth","browserSlow","mouseUp","ResizeRows","startHeight","prevHandle","prevHandleDown","screenY","ResizeTable","visibilityObserver","resizeObserver","containerObserver","tableHeight","tableWidth","containerHeight","containerWidth","autoResize","initialRedraw","tableStyle","IntersectionObserver","ResizeObserver","initializeVisibilityObserver","entry","browserMobile","nodeHeight","contentRect","nodeWidth","redrawTable","observe","fixedHeight","tableResized","isIntersecting","unobserve","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","updateColumnVisibility","initializeResponsivity","generateCollapsedRowContent","responsiveLayoutCollapseFormatter","formatCollapsedData","responsiveLayoutCollapseStartOpen","responsive","order","generateCollapsedContent","hideColumn","colCount","showColumn","working","getFlexBaseWidth","headerVisible","activeRowsCount","renderEmptyScroll","generateCollapsedRowData","mockCellComponent","responsiveLayoutCollapseUseFormatters","node_content","titleData","valueData","titleHighlight","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","selectRows","deselectRows","getSelectedRows","getSelectedData","isRowSelected","selectable","clearSelectionData","rowRetrieve","selectablePersistence","_deselectRow","prevSelected","_rowSelectionChanged","endSelect","checkRowSelectability","_clearSelection","lastClickedRowIdx","getDisplayRowIndex","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","selectableCheck","clickNoDeselectRow","_selectRow","rowMatch","change","changes","rowInfo","selectableRollingSelection","checkboxEl","dataTreeSelectPropagate","childRowSelection","selectedRow","deselected","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","string","locale","localeCompare","boolean","calc","d","alphanum","Sort","sortList","userSetSort","clearSort","sortMode","remoteSortParams","setSort","refreshSort","arrowEl","sorterParams","startingDir","headerSortStartingDir","headerSortTristate","headerSort","headerSortClickElement","headerSortElement","setColumnHeaderSortIcon","columnHeaderSortMulti","newSortList","findSorter","sortOrderReverse","sortListActual","rowComponents","clearColumnHeaders","sortObj","setColumnHeader","_sortItems","sortEl","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","el1","el2","defaultSorters","Tooltip","tooltipSubscriber","headerSubscriber","timeout","popupInstance","headerTooltip","mousemoveCheck","mouseoutCheck","tooltip","clearPopup","loadTooltip","tooltipDelay","parameters","float","numeric","minLength","maxLength","cellData","required","Validate","invalidCells","getInvalidCells","userClearCellValidation","userValidate","cellIsValid","clearValidation","cellValidate","columnValidate","rowValidate","editValidate","editorClear","editedClear","previousValue","validate","cancelled","validator","_extractValidator","substring","_buildValidator","validators","failedValidators","invalidIndex","defaultValidators","OptionsList","msgType","userOptions","debugInvalidOptions","hasOwnProperty","Renderer","elementVertical","elementHorizontal","verticalFillMode","clearRows","clearColumns","reinitializeColumnWidths","renderRows","renderColumns","rerenderRows","scrollColumns","scrollRows","scrollToRowNearestTop","includingBuffer","render","rerender","scrollToRowPosition","rowIndex","scrollToRowIfVisible","BasicHorizontal","rowFrag","createDocumentFragment","VirtualDomHorizontal","leftCol","rightCol","vDomScrollPosLeft","vDomScrollPosRight","vDomPadRight","fitDataColAvg","windowBuffer","isFitData","compatibilityCheck","layoutCheck","vertScrollListen","clearVisRowCache","dataChange","scroll","calcWindowBuffer","buffer","cols","colPos","leftPos","rightPos","fitDataCheck","vdomHoz","reinitChanged","reinitializeRow","colEnd","otherRows","addColRight","removeColLeft","addColLeft","removeColRight","colPositionAdjust","fitDataColActualWidthCheck","ex","message","newWidth","widthDiff","appendCell","ColumnManager","blockHozScrollEvent","columnsByField","defaultColumnOptions","redrawBlockUpdate","initializeRenderer","createHeadersElement","createHeaderContentsElement","createHeaderElement","initializeScrollWheelWatcher","padVerticalScrollbar","renderClass","renderers","virtual","RendererVirtualDomHorizontal","basic","RendererBasicHorizontal","deltaX","generateColumnsFromRowData","autoColumnsDefinitions","_addColumn","_reIndexColumns","nextToColumn","topColumn","parentIndex","nextEl","root","getDefinitions","getDefinitionTree","getComponents","structured","_moveColumnInArray","updateRows","fromIndex","scrollToColumnPosition","scrollToColumnIfVisible","totalWidth","fixedWidth","resetScroll","BasicVertical","tableFrag","rowTop","VirtualDomVertical","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","paddingBottom","_virtualRenderFill","topOffset","tableEmpty","topDiff","bottomDiff","_addTopRow","vDomScrollHeight","_removeBottomRow","_addBottomRow","_removeTopRow","renderVerticalBuffer","topFound","bottomRow","forceMove","rowFragment","topPad","rowsHeight","heightOccupied","topPadHeight","rowsCount","renderedRows","totalRowsRendered","rowsToRender","avgRowHeight","resized","fillableSpace","addedRows","paddingAdjust","_quickNormalizeRowHeight","removableRows","RowManager","createHolderElement","createTableElement","heightFixer","placeholderContents","firstRender","renderMode","activeRowsPipeline","redrawBlockRestoreConfig","redrawBlockRenderInPosition","dataPipeline","scrollbarWidth","initializePlaceholder","leftDir","topDir","_positionPlaceholder","_setDataActual","_wipeElements","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","refreshDisplayOnly","findAddRowPos","_clearPlaceholder","addRowPos","chainResult","clearData","findRowIndex","rowOnly","getDataCount","skipStage","stage","cascadeOrder","refreshPipelines","renderTable","layoutColumnsOnNewData","resetDisplayRows","setDisplayRows","scrollBarCheck","RendererVirtualDomVertical","RendererBasicVertical","renderVertical","_clearTable","_showPlaceholder","initialHeight","otherHeight","external","event","createEvent","initEvent","Event","FooterManager","createContainerElement","initializeElement","footerElement","activate","deactivate","InteractionManager","abortClasses","previousTargets","listeners","componentMap","pseudoTrackers","subscriber","pseudoTracking","buildListenerMap","bindSubscriptionWatchers","listenerMap","listener","components","bindPseudoEvents","pseudoMouseEnter","pseudoMouseLeave","leaveList","linkedKeys","comp","clearWatchers","updateEventListeners","track","composedPath","targets","findTargets","bindComponents","triggerEvents","elTargets","targetMatches","previousTarget","closest","ComponentFunctionBinder","funcName","debugInvalidComponentFuncs","DataLoader","requestOrder","requestNo","alertLoader","mapParams","dataSendParams","objectInvert","dataReceiveParams","alertError","dataLoaderErrorTimeout","blockActiveLoad","dataLoaderLoading","dataLoaderError","ExternalEventBus","debug","events","subscriptionNotifiers","_debugDispatch","_dispatch","_notifySubscriptionChange","notifiers","callResult","log","InternalEventBus","_debugChain","_chain","_debugConfirm","_confirm","fallback","confirmed","DeprecationAdvisor","_warnUser","TableRegistry","tables","matchElement","Tabulator","lookupTable","forced","fitData","fitDataFill","fitDataGeneral","fitDataTable","fitDataStretch","colsWidth","gap","lastCol","fitColumns","flexColWidth","overflowWidth","flexWidth","flexGrowUnits","flexColumns","fixedShrinkColumns","flexShrinkUnits","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","remainingFlexGrowUnits","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","Layout","modes","dataChanged","defaultModes","Localize","langList","langs","setHeaderFilterPlaceholder","installLang","setLocale","getLang","default","_setLangProp","desiredLocale","language","traverseLang","trans","_executeBindings","pathArray","_getLangElement","rootPath","page_size","page_title","first","first_title","last","last_title","prev_title","next","next_title","showing","of","Comms","receive","selectors","con","tableComms","ModuleBinder","tabulator","bindStaticFunctionality","bindModules","coreModules","moduleBindings","extendModule","property","source","registerModule","mod","registerModuleBinding","findTable","orderedStartMods","orderedEndMods","unOrderedMods","moduleCore","modulesCore","modulesRegular","core","mods","Alert","_createAlertElement","msgElement","_createMsgElement","_typeClass","interactionMonitor","initializeCoreSystems","_create","_clearObjectPointers","_mapDeprecatedFunctionality","debugEventsExternal","debugEventsInternal","InteractionMonitor","_rtlCheck","_buildElement","_initializeTable","_loadInitialData","textDirection","direction","newElement","_detectBrowser","deregister","ua","userAgent","vendor","opera","stack","line","debugInitialization","Error","replaceData","responses","foundRows","updateOrAddRow","updateRow","getRowPosition","getColumnDefinitions","toggleColumn","deleteColumn","updateColumnDefinition","fromColumn","off","plugin","debugDeprecation","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","TabulatorFull","PseudoRow","_createElement"],"mappings":"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"}